/*! For license information please see client.js.LICENSE.txt */
(()=>{var __webpack_modules__={5578:t=>{"use strict";t.exports={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}},4893:(t,e,r)=>{"use strict";const i=r(5838),n=r(5578),s=[];for(var a=0;a<=8;a++)s.push(255<<a);t.exports=function(t){if(1!==t.bitDepth)throw new Error("Only bitDepth of 1 is supported");if(!t.height||!t.width)throw new Error("ImageData width and height are required");if(1!==t.components)throw new Error("Only 1 component is supported");if(1!==t.channels)throw new Error("Only 1 channel is supported");var e=new i;e.skip(14),function(t,e){t.writeUint32(124).writeInt32(e.width).writeInt32(e.height).writeUint16(1).writeUint16(e.bitDepth).writeUint32(n.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(e.width*e.height*e.bitDepth).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,e.bitDepth)).writeUint32(Math.pow(2,e.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(n.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(n.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}(e,t),function(t,e){e.bitDepth>8||t.writeUint32(0).writeUint32(16777215)}(e,t);const r=e.offset;return function(t,e){const r=4*Math.floor((e.bitDepth*e.width+31)/32),n=Math.ceil(e.bitDepth*e.width/8),a=r-n,o=e.bitDepth*e.width%8,h=0===o?0:8-o,l=r*e.height;var u,f;const c=new i(e.data);let d=0,m=0,p=8;t.mark(),f=c.readUint8();for(var g=e.height-1;g>=0;g--){const e=0===g;t.reset(),t.skip(g*r);for(var w=0;w<n;w++){const r=w===n-1;m<=h&&r?(t.writeByte(f<<m),0!==h&&h!==m||e||(u=f,f=c.readByte())):0===m?(u=f,f=c.readUint8(),t.writeByte(u)):(u=f,f=c.readUint8(),t.writeByte(u<<m&s[m]|f>>p)),r?(d+=o||8,t.skip(a),m=d%8,p=8-m):d+=8}}r>n&&(t.reset(),t.skip(l-1),t.writeUint8(0))}(e,t),e.rewind(),function(t,e){t.writeChars("BM"),t.writeInt32(t._lastWrittenByte),t.writeUint16(0),t.writeUint16(0),t.writeUint32(e)}(e,r),e.getBuffer()}},4665:(t,e,r)=>{"use strict";e.encode=r(4893)},7909:t=>{"use strict";const e=[];t.exports=class{constructor(t,e){e=e||{},void 0===t&&(t=8192),"number"==typeof t&&(t=new ArrayBuffer(t));let r=t.byteLength;const i=e.offset?e.offset>>>0:0;t.buffer&&(r=t.byteLength-i,t=t.byteLength!==t.buffer.byteLength?t.buffer.slice(t.byteOffset+i,t.byteOffset+t.byteLength):i?t.buffer.slice(i):t.buffer),this.buffer=t,this.length=r,this.byteLength=r,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=r||8192,this._mark=0}available(t){return void 0===t&&(t=1),this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(t){void 0===t&&(t=1),this.offset+=t}seek(t){this.offset=t}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(t){if(void 0===t&&(t=1),!this.available(t)){const t=this._increment+this._increment;this._increment=t;const e=this.length+t,r=new Uint8Array(e);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=e,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t){void 0===t&&(t=1);for(var e=new Uint8Array(t),r=0;r<t;r++)e[r]=this.readByte();return e}readInt16(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t){void 0===t&&(t=1),e.length=t;for(var r=0;r<t;r++)e[r]=this.readChar();return e.join("")}writeBoolean(t){this.writeUint8(t?255:0)}writeInt8(t){this.ensureAvailable(1),this._data.setInt8(this.offset++,t)}writeUint8(t){this.ensureAvailable(1),this._data.setUint8(this.offset++,t)}writeByte(t){this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(var e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e])}writeInt16(t){this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2}writeUint16(t){this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2}writeInt32(t){this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4}writeUint32(t){this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4}writeFloat32(t){this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4}writeFloat64(t){this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8}writeChar(t){this.writeUint8(t.charCodeAt(0))}writeChars(t){for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},3311:(t,e,r)=>{"use strict";const i=r(6752);t.exports=function(t,e){return new i(t,e).decode(e)}},8029:(t,e,r)=>{"use strict";const i={standard:r(4263),exif:r(9640),gps:r(5367)};t.exports=class{constructor(t){if(!t)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=t,this._map=null}get(t){if("number"==typeof t)return this.fields.get(t);if("string"==typeof t)return this.fields.get(i[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const e=i[this.kind].tagsById;for(var t of this.fields.keys())e[t]&&(this._map[e[t]]=this.fields.get(t))}return this._map}}},6486:(t,e)=>{"use strict";var r=new Map([[1,[1,i]],[2,[1,function(t,e){for(var r=[],i="",n=0;n<e;n++){var s=String.fromCharCode(t.readUint8());"\0"===s?(r.push(i),i=""):i+=s}return 1===r.length?r[0]:r}]],[3,[2,function(t,e){if(1===e)return t.readUint16();for(var r=new Uint16Array(e),i=0;i<e;i++)r[i]=t.readUint16();return r}]],[4,[4,function(t,e){if(1===e)return t.readUint32();for(var r=new Uint32Array(e),i=0;i<e;i++)r[i]=t.readUint32();return r}]],[5,[8,function(t,e){if(1===e)return t.readUint32()/t.readUint32();for(var r=new Array(e),i=0;i<e;i++)r[i]=t.readUint32()/t.readUint32();return r}]],[6,[1,function(t,e){if(1===e)return t.readInt8();for(var r=new Int8Array(e),i=0;i<e;i++)r[i]=t.readInt8();return r}]],[7,[1,i]],[8,[2,function(t,e){if(1===e)return t.readInt16();for(var r=new Int16Array(e),i=0;i<e;i++)r[i]=t.readInt16();return r}]],[9,[4,function(t,e){if(1===e)return t.readInt32();for(var r=new Int32Array(e),i=0;i<e;i++)r[i]=t.readInt32();return r}]],[10,[8,function(t,e){if(1===e)return t.readInt32()/t.readInt32();for(var r=new Array(e),i=0;i<e;i++)r[i]=t.readInt32()/t.readInt32();return r}]],[11,[4,function(t,e){if(1===e)return t.readFloat32();for(var r=new Float32Array(e),i=0;i<e;i++)r[i]=t.readFloat32();return r}]],[12,[8,function(t,e){if(1===e)return t.readFloat64();for(var r=new Float64Array(e),i=0;i<e;i++)r[i]=t.readFloat64();return r}]]]);function i(t,e){if(1===e)return t.readUint8();for(var r=new Uint8Array(e),i=0;i<e;i++)r[i]=t.readUint8();return r}e.getByteLength=function(t,e){return r.get(t)[0]*e},e.readData=function(t,e,i){return r.get(e)[1](t,i)}},9469:(t,e,r)=>{"use strict";e.decode=r(3311)},9640:t=>{"use strict";const e={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},r={};for(var i in e)r[e[i]]=i;t.exports={tagsById:e,tagsByName:r}},5367:t=>{"use strict";const e={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},r={};for(var i in e)r[e[i]]=i;t.exports={tagsById:e,tagsByName:r}},4263:t=>{"use strict";const e={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},r={};for(var i in e)r[e[i]]=i;t.exports={tagsById:e,tagsByName:r}},6752:(t,e,r)=>{"use strict";const i=r(7909),n=r(8029),s=r(8353),a=r(6486),o={ignoreImageData:!1,onlyFirst:!1};function h(t,e,r,i){for(var n=0;n<i;n++)t[r++]=e.getUint8(n);return r}function l(t,e,r,i,n){for(var s=0;s<2*i;s+=2)t[r++]=e.getUint16(s,n);return r}function u(t,e,r,i,n){for(var s=0;s<4*i;s+=4)t[r++]=e.getFloat32(s,n);return r}function f(t,e){throw new Error("Unsupported "+t+": "+e)}t.exports=class extends i{constructor(t,e){super(t,e),this._nextIFD=0}decode(t){t=Object.assign({},o,t);const e=[];for(this.decodeHeader();this._nextIFD;)if(e.push(this.decodeIFD(t)),t.onlyFirst)return e[0];return e}decodeHeader(){let t=this.readUint16();if(18761===t)this.setLittleEndian();else{if(19789!==t)throw new Error("invalid byte order: 0x"+t.toString(16));this.setBigEndian()}if(t=this.readUint16(),42!==t)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t){var e;this.seek(this._nextIFD),e=t.kind?new n(t.kind):new s;const r=this.readUint16();for(var i=0;i<r;i++)this.decodeIFDEntry(e);return t.ignoreImageData||this.decodeImageData(e),this._nextIFD=this.readUint32(),e}decodeIFDEntry(t){const e=this.offset,r=this.readUint16(),i=this.readUint16(),n=this.readUint32();if(i<1||i>12)return void this.skip(4);a.getByteLength(i,n)>4&&this.seek(this.readUint32());const s=a.readData(this,i,n);if(t.fields.set(r,s),34665===r||34853===r){let e,i=this.offset;34665===r?e="exif":34853===r&&(e="gps"),this._nextIFD=s,t[e]=this.decodeIFD({kind:e,ignoreImageData:!0}),this.offset=i}this.seek(e),this.skip(12)}decodeImageData(t){const e=t.orientation;switch(e&&1!==e&&f("orientation",e),t.type){case 1:case 2:this.readStripData(t);break;default:f("image type",t.type)}}readStripData(t){const e=t.width,r=t.height,i=function(t){if(t.length){const r=t;t=r[0];for(var e=0;e<r.length;e++)r[e]!==t&&f("bit depth",r)}return t}(t.bitsPerSample),n=t.sampleFormat;let s=e*r;const a=function(t,e,r,i){return 8===r?new Uint8Array(1*t):16===r?new Uint16Array(1*t):32===r&&3===i?new Float32Array(1*t):f("bit depth / sample format",r+" / "+i)}(s,0,i,n),o=t.compression,c=t.rowsPerStrip*e,d=t.stripOffsets,m=t.stripByteCounts;for(var p=0,g=0;g<d.length;g++){var w=this.getStripData(o,d[g],m[g]),b=s>c?c:s;s-=b,8===i?p=h(a,w,p,b):16===i?p=l(a,w,p,b,this.isLittleEndian()):32===i&&3===n?p=u(a,w,p,b,this.isLittleEndian()):f("bitDepth",i)}t.data=a}getStripData(t,e,r){switch(t){case 1:return new DataView(this.buffer,e,r);case 2:case 32773:return f("Compression",t);default:throw new Error("invalid compression: "+t)}}}},8353:(t,e,r)=>{"use strict";const i=r(8029),n=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;function s(t){return"number"==typeof t?[t]:t}t.exports=class extends i{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var t=new Date,e=n.exec(this.dateTime);return t.setFullYear(e[1],e[2]-1,e[3]),t.setHours(e[4],e[5],e[6]),t}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return s(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return s(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}},9698:(t,e,r)=>{"use strict";const i=r(7909),n=r(9469);t.exports=function(t){const e=new i(t),r={};if(e.setBigEndian(),65496!==e.readUint16())throw new Error("SOI marker not found. Not a valid JPEG file");if(65505===e.readUint16()){e.readUint16();const t=e.readBytes(6);if(69===t[0]&&120===t[1]&&105===t[2]&&102===t[3]&&0===t[4]&&0===t[5]){const t=n.decode(e,{onlyFirst:!0,ignoreImageData:!0,offset:e.offset});r.exif=t}}return r}},9464:(t,e,r)=>{"use strict";e.decode=r(9698)},8737:t=>{!function(){function e(t,e,r){this.next=r,r&&(r.prev=this),this.prev=e,e&&(e.next=this),this.data=t}function r(){if(!(this instanceof r))return new r;this._head=null,this._tail=null,this.length=0}r.prototype={push:function(t){this._tail=new e(t,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0!==this.length){var t=this._tail;return this._tail=t.prev,t.prev&&(t.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),t.data}},unshift:function(t){this._head=new e(t,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0!==this.length){var t=this._head;return this._head=t.next,t.next&&(t.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),t.data}},item:function(t){t<0&&(t=this.length+t);for(var e=this._head;t-- >0&&e;)e=e.next;return e?e.data:void 0},slice:function(t,e){if(t||(t=0),e||(e=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e===t)return[];if(e<t)throw new Error("invalid offset: "+t+","+e+" (length="+this.length+")");for(var r=e-t,i=new Array(r),n=0,s=this._head;t-- >0&&s;)s=s.next;for(;n<r&&s;)i[n++]=s.data,s=s.next;return i},drop:function(){r.call(this)},forEach:function(t,e){for(var r=this._head,i=0,n=this.length;i<n&&r;)t.call(e||this,r.data,i,this),r=r.next,i++},map:function(t,e){var i=new r;return this.forEach((function(r,n,s){i.push(t.call(e||s,r,n,s))})),i},filter:function(t,e){var i=new r;return this.forEach((function(r,n,s){t.call(e||s,r,n,s)&&i.push(r)})),i},reduce:function(t,e,r){var i=0,n=this._head,s=this.length;for(e||(i=1,e=n&&n.data,n=n&&n.next);i<s&&n;)e=t.call(r||this,e,n.data,this),i++,n=n.next;return e}},t.exports=r}()},7638:function(){"use strict";!function(t){if(t.TextEncoder&&t.TextDecoder)return!1;function e(t="utf-8"){if("utf-8"!==t)throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${t}') is invalid.`)}function r(t="utf-8",e={fatal:!1}){if("utf-8"!==t)throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${t}') is invalid.`);if(e.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,e={stream:!1}){if(e.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let r=0;const i=t.length;let n=0,s=Math.max(32,i+(i>>1)+7),a=new Uint8Array(s>>3<<3);for(;r<i;){let e=t.charCodeAt(r++);if(e>=55296&&e<=56319){if(r<i){const i=t.charCodeAt(r);56320==(64512&i)&&(++r,e=((1023&e)<<10)+(1023&i)+65536)}if(e>=55296&&e<=56319)continue}if(n+4>a.length){s+=8,s*=1+r/t.length*2,s=s>>3<<3;const e=new Uint8Array(s);e.set(a),a=e}if(0!=(4294967168&e)){if(0==(4294965248&e))a[n++]=e>>6&31|192;else if(0==(4294901760&e))a[n++]=e>>12&15|224,a[n++]=e>>6&63|128;else{if(0!=(4292870144&e))continue;a[n++]=e>>18&7|240,a[n++]=e>>12&63|128,a[n++]=e>>6&63|128}a[n++]=63&e|128}else a[n++]=e}return a.slice(0,n)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1}),r.prototype.decode=function(t,e={stream:!1}){if(e.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const r=new Uint8Array(t);let i=0;const n=r.length,s=[];for(;i<n;){const t=r[i++];if(0===t)break;if(0==(128&t))s.push(t);else if(192==(224&t)){const e=63&r[i++];s.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&r[i++],n=63&r[i++];s.push((31&t)<<12|e<<6|n)}else if(240==(248&t)){let e=(7&t)<<18|(63&r[i++])<<12|(63&r[i++])<<6|63&r[i++];e>65535&&(e-=65536,s.push(e>>>10&1023|55296),e=56320|1023&e),s.push(e)}}return String.fromCharCode.apply(null,s)},t.TextEncoder=e,t.TextDecoder=r}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this)},9645:t=>{"use strict";function e(t){if(this.size=0|t,this.size<=1||0!=(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var e=new Array(2*this.size),r=0;r<e.length;r+=2){const t=Math.PI*r/this.size;e[r]=Math.cos(t),e[r+1]=-Math.sin(t)}this.table=e;for(var i=0,n=1;this.size>n;n<<=1)i++;this._width=i%2==0?i-1:i,this._bitrev=new Array(1<<this._width);for(var s=0;s<this._bitrev.length;s++){this._bitrev[s]=0;for(var a=0;a<this._width;a+=2){var o=this._width-a-2;this._bitrev[s]|=(s>>>a&3)<<o}}this._out=null,this._data=null,this._inv=0}t.exports=e,e.prototype.fromComplexArray=function(t,e){for(var r=e||new Array(t.length>>>1),i=0;i<t.length;i+=2)r[i>>>1]=t[i];return r},e.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var e=0;e<t.length;e++)t[e]=0;return t},e.prototype.toComplexArray=function(t,e){for(var r=e||this.createComplexArray(),i=0;i<r.length;i+=2)r[i]=t[i>>>1],r[i+1]=0;return r},e.prototype.completeSpectrum=function(t){for(var e=this._csize,r=e>>>1,i=2;i<r;i+=2)t[e-i]=t[i],t[e-i+1]=-t[i+1]},e.prototype.transform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._transform4(),this._out=null,this._data=null},e.prototype.realTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._realTransform4(),this._out=null,this._data=null},e.prototype.inverseTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=1,this._transform4();for(var r=0;r<t.length;r++)t[r]/=this.size;this._out=null,this._data=null},e.prototype._transform4=function(){var t,e,r=this._out,i=this._csize,n=1<<this._width,s=i/n<<1,a=this._bitrev;if(4===s)for(t=0,e=0;t<i;t+=s,e++){const r=a[e];this._singleTransform2(t,r,n)}else for(t=0,e=0;t<i;t+=s,e++){const r=a[e];this._singleTransform4(t,r,n)}var o=this._inv?-1:1,h=this.table;for(n>>=2;n>=2;n>>=2){var l=(s=i/n<<1)>>>2;for(t=0;t<i;t+=s)for(var u=t+l,f=t,c=0;f<u;f+=2,c+=n){const t=f,e=t+l,i=e+l,n=i+l,s=r[t],a=r[t+1],u=r[e],d=r[e+1],m=r[i],p=r[i+1],g=r[n],w=r[n+1],b=s,_=a,y=h[c],v=o*h[c+1],x=u*y-d*v,k=u*v+d*y,M=h[2*c],A=o*h[2*c+1],E=m*M-p*A,S=m*A+p*M,D=h[3*c],I=o*h[3*c+1],C=g*D-w*I,R=g*I+w*D,B=b+E,P=_+S,z=b-E,T=_-S,U=x+C,F=k+R,O=o*(x-C),L=o*(k-R),N=B+U,Z=P+F,Y=B-U,V=P-F,j=z+L,X=T-O,G=z-L,q=T+O;r[t]=N,r[t+1]=Z,r[e]=j,r[e+1]=X,r[i]=Y,r[i+1]=V,r[n]=G,r[n+1]=q}}},e.prototype._singleTransform2=function(t,e,r){const i=this._out,n=this._data,s=n[e],a=n[e+1],o=n[e+r],h=n[e+r+1],l=s+o,u=a+h,f=s-o,c=a-h;i[t]=l,i[t+1]=u,i[t+2]=f,i[t+3]=c},e.prototype._singleTransform4=function(t,e,r){const i=this._out,n=this._data,s=this._inv?-1:1,a=2*r,o=3*r,h=n[e],l=n[e+1],u=n[e+r],f=n[e+r+1],c=n[e+a],d=n[e+a+1],m=n[e+o],p=n[e+o+1],g=h+c,w=l+d,b=h-c,_=l-d,y=u+m,v=f+p,x=s*(u-m),k=s*(f-p),M=g+y,A=w+v,E=b+k,S=_-x,D=g-y,I=w-v,C=b-k,R=_+x;i[t]=M,i[t+1]=A,i[t+2]=E,i[t+3]=S,i[t+4]=D,i[t+5]=I,i[t+6]=C,i[t+7]=R},e.prototype._realTransform4=function(){var t,e,r=this._out,i=this._csize,n=1<<this._width,s=i/n<<1,a=this._bitrev;if(4===s)for(t=0,e=0;t<i;t+=s,e++){const r=a[e];this._singleRealTransform2(t,r>>>1,n>>>1)}else for(t=0,e=0;t<i;t+=s,e++){const r=a[e];this._singleRealTransform4(t,r>>>1,n>>>1)}var o=this._inv?-1:1,h=this.table;for(n>>=2;n>=2;n>>=2){var l=(s=i/n<<1)>>>1,u=l>>>1,f=u>>>1;for(t=0;t<i;t+=s)for(var c=0,d=0;c<=f;c+=2,d+=n){var m=t+c,p=m+u,g=p+u,w=g+u,b=r[m],_=r[m+1],y=r[p],v=r[p+1],x=r[g],k=r[g+1],M=r[w],A=r[w+1],E=b,S=_,D=h[d],I=o*h[d+1],C=y*D-v*I,R=y*I+v*D,B=h[2*d],P=o*h[2*d+1],z=x*B-k*P,T=x*P+k*B,U=h[3*d],F=o*h[3*d+1],O=M*U-A*F,L=M*F+A*U,N=E+z,Z=S+T,Y=E-z,V=S-T,j=C+O,X=R+L,G=o*(C-O),q=o*(R-L),H=N+j,W=Z+X,$=Y+q,K=V-G;if(r[m]=H,r[m+1]=W,r[p]=$,r[p+1]=K,0!==c){if(c!==f){var J=Y+-o*q,Q=-o*G-V,tt=N+-o*j,et=-Z- -o*X,rt=t+u-c,it=t+l-c;r[rt]=J,r[rt+1]=Q,r[it]=tt,r[it+1]=et}}else{var nt=N-j,st=Z-X;r[g]=nt,r[g+1]=st}}}},e.prototype._singleRealTransform2=function(t,e,r){const i=this._out,n=this._data,s=n[e],a=n[e+r],o=s+a,h=s-a;i[t]=o,i[t+1]=0,i[t+2]=h,i[t+3]=0},e.prototype._singleRealTransform4=function(t,e,r){const i=this._out,n=this._data,s=this._inv?-1:1,a=2*r,o=3*r,h=n[e],l=n[e+r],u=n[e+a],f=n[e+o],c=h+u,d=h-u,m=l+f,p=s*(l-f),g=c+m,w=d,b=-p,_=c-m,y=d,v=p;i[t]=g,i[t+1]=0,i[t+2]=w,i[t+3]=b,i[t+4]=_,i[t+5]=0,i[t+6]=y,i[t+7]=v}},7769:module=>{"use strict";const toBytes=t=>[...t].map((t=>t.charCodeAt(0))),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(t,e=0){let r=t[e],i=1,n=0;for(;++n<8;)i*=256,r+=t[e+n]*i;return r}const fileType=t=>{if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Buffer.isBuffer(t)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof t}\``);const e=t instanceof Uint8Array?t:new Uint8Array(t);if(!(e&&e.length>1))return null;const r=(t,r)=>{r=Object.assign({offset:0},r);for(let i=0;i<t.length;i++)if(r.mask){if(t[i]!==(r.mask[i]&e[i+r.offset]))return!1}else if(t[i]!==e[i+r.offset])return!1;return!0},i=(t,e)=>r(toBytes(t),e);if(r([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(r([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(r([71,73,70]))return{ext:"gif",mime:"image/gif"};if(r([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(r([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((r([73,73,42,0])||r([77,77,0,42]))&&r([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r([73,73,42,0])||r([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(r([66,77]))return{ext:"bmp",mime:"image/bmp"};if(r([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(r([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(r([80,75,3,4])){if(r([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(r(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(i("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(i("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(i("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const t=(t,e=0)=>t.findIndex(((t,r,i)=>r>=e&&80===i[r]&&75===i[r+1]&&3===i[r+2]&&4===i[r+3]));let n=0,s=!1,a=null;do{const o=n+30;if(s||(s=r(oxmlContentTypes,{offset:o})||r(oxmlRels,{offset:o})),a||(i("word/",{offset:o})?a={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:i("ppt/",{offset:o})?a={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:i("xl/",{offset:o})&&(a={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),s&&a)return a;n=t(e,o)}while(n>=0);if(a)return a}if(r([80,75])&&(3===e[2]||5===e[2]||7===e[2])&&(4===e[3]||6===e[3]||8===e[3]))return{ext:"zip",mime:"application/zip"};if(r([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(r([82,97,114,33,26,7])&&(0===e[6]||1===e[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(r([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(r([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(r([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(r([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(r([51,103,112,53])||r([0,0,0])&&r([102,116,121,112],{offset:4})&&(r([109,112,52,49],{offset:8})||r([109,112,52,50],{offset:8})||r([105,115,111,109],{offset:8})||r([105,115,111,50],{offset:8})||r([109,109,112,52],{offset:8})||r([77,52,86],{offset:8})||r([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(r([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(r([26,69,223,163])){const t=e.subarray(4,4100),r=t.findIndex(((t,e,r)=>66===r[e]&&130===r[e+1]));if(-1!==r){const e=r+3,i=r=>[...r].every(((r,i)=>t[e+i]===r.charCodeAt(0)));if(i("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(i("webm"))return{ext:"webm",mime:"video/webm"}}}if(r([0,0,0,20,102,116,121,112,113,116,32,32])||r([102,114,101,101],{offset:4})||r([102,116,121,112,113,116,32,32],{offset:4})||r([109,100,97,116],{offset:4})||r([109,111,111,118],{offset:4})||r([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(r([82,73,70,70])){if(r([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(r([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(r([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(r([48,38,178,117,142,102,207,17,166,217])){let t=30;do{const i=readUInt64LE(e,t+16);if(r([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:t})){if(r([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:t+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(r([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:t+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}t+=i}while(t+24<=e.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(r([0,0,1,186])||r([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(r([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let t=0;t<2&&t<e.length-16;t++){if(r([73,68,51],{offset:t})||r([255,226],{offset:t,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(r([255,228],{offset:t,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([255,248],{offset:t,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([255,240],{offset:t,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(r([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(r([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(r([79,103,103,83]))return r([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:r([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:r([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:r([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:r([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(r([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(r([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(r([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(r([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(r([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(r([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===e[0]||70===e[0])&&r([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(r([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(r([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(r([119,79,70,70])&&(r([0,1,0,0],{offset:4})||r([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(r([119,79,70,50])&&(r([0,1,0,0],{offset:4})||r([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(r([76,80],{offset:34})&&(r([0,0,1],{offset:8})||r([1,0,2],{offset:8})||r([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(r([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(r([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(r([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(r([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(r([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(r([37,33]))return{ext:"ps",mime:"application/postscript"};if(r([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(r([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(r([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(r([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(r([77,83,67,70])||r([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(r([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(r([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(r([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(r([31,160])||r([31,157]))return{ext:"Z",mime:"application/x-compress"};if(r([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(r([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(r([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(r([71],{offset:4})&&(r([71],{offset:192})||r([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(r([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(r([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(r([0,0,0,12,106,80,32,32,13,10,135,10])){if(r([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(r([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(r([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(r([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(r([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(i("<?xml "))return{ext:"xml",mime:"application/xml"};if(r([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(r([102,116,121,112],{offset:4})){if(r([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(r([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(r([104,101,105,99],{offset:8})||r([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(r([104,101,118,99],{offset:8})||r([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return r([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:r([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:r([77,80,43])||r([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:r([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:r([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:r([212,195,178,161])||r([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise(((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",(()=>{const t=new stream.PassThrough,e=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{t.fileType=fileType(e)}catch(t){reject(t)}readableStream.unshift(e),stream.pipeline?resolve(stream.pipeline(readableStream,t,(()=>{}))):resolve(readableStream.pipe(t))}))}))},2251:(t,e,r)=>{var i=Object.prototype.hasOwnProperty;t.exports=e=function(t,e){return i.call(e,t)},e.version=r(5342).version},5342:t=>{"use strict";t.exports={version:"1.0.1"}},9184:(t,e,r)=>{"use strict";const i=r(7769),n=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),s=t=>{const e=i(t);return n.has(e&&e.ext)?e:null};t.exports=s,t.exports.default=s,Object.defineProperty(s,"minimumBytes",{value:i.minimumBytes})},5838:(t,e,r)=>{"use strict";const i=r(7458),n=[];t.exports=class{constructor(t,e){e=e||{};var r=!1;void 0===t&&(t=8192),"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this._lastWrittenByte=t.byteLength);const i=e.offset?e.offset>>>0:0;let n=t.byteLength-i,s=i;t.buffer&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+i),t=t.buffer),this._lastWrittenByte=r?n:0,this.buffer=t,this.length=n,this.byteLength=n,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,n),this._mark=0,this._marks=[]}available(t){return void 0===t&&(t=1),this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t){return void 0===t&&(t=1),this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t){if(void 0===t&&(t=1),!this.available(t)){const e=2*(this.offset+t),r=new Uint8Array(e);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t){void 0===t&&(t=1);for(var e=new Uint8Array(t),r=0;r<t;r++)e[r]=this.readByte();return e}readInt16(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t){void 0===t&&(t=1),n.length=t;for(var e=0;e<t;e++)n[e]=this.readChar();return n.join("")}readUtf8(t){void 0===t&&(t=1);const e=this.readChars(t);return i.decode(e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(var e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){const e=i.encode(t);return this.writeChars(e)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)}getBuffer(){return"undefined"!=typeof Buffer?Buffer.from(this.toArray()):this.toArray()}_updateLastWrittenByte(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)}}},7531:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});const i=Object.prototype.toString;function n(t){return i.call(t).endsWith("Array]")}},7811:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){return"Array"===e.call(t).substr(-6,5)}},1867:t=>{"use strict";t.exports=Number.isFinite||function(t){return!("number"!=typeof t||t!=t||t===1/0||t===-1/0)}},8336:(t,e,r)=>{var i=r(1867);t.exports=Number.isInteger||function(t){return"number"==typeof t&&i(t)&&Math.floor(t)===t}},7870:(t,e,r)=>{var i=r(587),n=r(914);t.exports={encode:i,decode:n}},914:t=>{var e=function(){"use strict";var t=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),e=4017,r=799,i=3406,n=2276,s=1567,a=3784,o=5793,h=2896;function l(){}function u(t,e){for(var r,i,n=0,s=[],a=16;a>0&&!t[a-1];)a--;s.push({children:[],index:0});var o,h=s[0];for(r=0;r<a;r++){for(i=0;i<t[r];i++){for((h=s.pop()).children[h.index]=e[n];h.index>0;){if(0===s.length)throw new Error("Could not recreate Huffman Table");h=s.pop()}for(h.index++,s.push(h);s.length<=r;)s.push(o={children:[],index:0}),h.children[h.index]=o.children,h=o;n++}r+1<a&&(s.push(o={children:[],index:0}),h.children[h.index]=o.children,h=o)}return s[0].children}function f(e,r,i,n,s,a,o,h,l,u){i.precision,i.samplesPerLine,i.scanLines;var f=i.mcusPerLine,c=i.progressive,d=(i.maxH,i.maxV,r),m=0,p=0;function g(){if(p>0)return p--,m>>p&1;if(255==(m=e[r++])){var t=e[r++];if(t)throw new Error("unexpected marker: "+(m<<8|t).toString(16))}return p=7,m>>>7}function w(t){for(var e,r=t;null!==(e=g());){if("number"==typeof(r=r[e]))return r;if("object"!=typeof r)throw new Error("invalid huffman sequence")}return null}function b(t){for(var e=0;t>0;){var r=g();if(null===r)return;e=e<<1|r,t--}return e}function _(t){var e=b(t);return e>=1<<t-1?e:e+(-1<<t)+1}var y,v=0,x=0;function k(t,e,r,i,n){var s=r%f,a=(r/f|0)*t.v+i,o=s*t.h+n;void 0===t.blocks[a]&&u.tolerantDecoding||e(t,t.blocks[a][o])}function M(t,e,r){var i=r/t.blocksPerLine|0,n=r%t.blocksPerLine;void 0===t.blocks[i]&&u.tolerantDecoding||e(t,t.blocks[i][n])}var A,E,S,D,I,C,R=n.length;C=c?0===a?0===h?function(t,e){var r=w(t.huffmanTableDC),i=0===r?0:_(r)<<l;e[0]=t.pred+=i}:function(t,e){e[0]|=g()<<l}:0===h?function(e,r){if(v>0)v--;else for(var i=a,n=o;i<=n;){var s=w(e.huffmanTableAC),h=15&s,u=s>>4;if(0!==h)r[t[i+=u]]=_(h)*(1<<l),i++;else{if(u<15){v=b(u)+(1<<u)-1;break}i+=16}}}:function(e,r){for(var i=a,n=o,s=0;i<=n;){var h=t[i],u=r[h]<0?-1:1;switch(x){case 0:var f=w(e.huffmanTableAC),c=15&f;if(s=f>>4,0===c)s<15?(v=b(s)+(1<<s),x=4):(s=16,x=1);else{if(1!==c)throw new Error("invalid ACn encoding");y=_(c),x=s?2:3}continue;case 1:case 2:r[h]?r[h]+=(g()<<l)*u:0==--s&&(x=2==x?3:0);break;case 3:r[h]?r[h]+=(g()<<l)*u:(r[h]=y<<l,x=0);break;case 4:r[h]&&(r[h]+=(g()<<l)*u)}i++}4===x&&0==--v&&(x=0)}:function(e,r){var i=w(e.huffmanTableDC),n=0===i?0:_(i);r[0]=e.pred+=n;for(var s=1;s<64;){var a=w(e.huffmanTableAC),o=15&a,h=a>>4;if(0!==o)r[t[s+=h]]=_(o),s++;else{if(h<15)break;s+=16}}};var B,P,z,T,U=0;for(P=1==R?n[0].blocksPerLine*n[0].blocksPerColumn:f*i.mcusPerColumn,s||(s=P);U<P;){for(E=0;E<R;E++)n[E].pred=0;if(v=0,1==R)for(A=n[0],I=0;I<s;I++)M(A,C,U),U++;else for(I=0;I<s;I++){for(E=0;E<R;E++)for(z=(A=n[E]).h,T=A.v,S=0;S<T;S++)for(D=0;D<z;D++)k(A,C,U,S,D);if(++U===P)break}if(U===P)do{if(255===e[r]&&0!==e[r+1])break;r+=1}while(r<e.length-2);if(p=0,(B=e[r]<<8|e[r+1])<65280)throw new Error("marker was not found");if(!(B>=65488&&B<=65495))break;r+=2}return r-d}function c(t,l){var u,f,c=[],d=l.blocksPerLine,m=l.blocksPerColumn,p=d<<3,w=new Int32Array(64),b=new Uint8Array(64);function _(t,u,f){var c,d,m,p,g,w,b,_,y,v,x=l.quantizationTable,k=f;for(v=0;v<64;v++)k[v]=t[v]*x[v];for(v=0;v<8;++v){var M=8*v;0!=k[1+M]||0!=k[2+M]||0!=k[3+M]||0!=k[4+M]||0!=k[5+M]||0!=k[6+M]||0!=k[7+M]?(c=o*k[0+M]+128>>8,d=o*k[4+M]+128>>8,m=k[2+M],p=k[6+M],g=h*(k[1+M]-k[7+M])+128>>8,_=h*(k[1+M]+k[7+M])+128>>8,w=k[3+M]<<4,b=k[5+M]<<4,y=c-d+1>>1,c=c+d+1>>1,d=y,y=m*a+p*s+128>>8,m=m*s-p*a+128>>8,p=y,y=g-b+1>>1,g=g+b+1>>1,b=y,y=_+w+1>>1,w=_-w+1>>1,_=y,y=c-p+1>>1,c=c+p+1>>1,p=y,y=d-m+1>>1,d=d+m+1>>1,m=y,y=g*n+_*i+2048>>12,g=g*i-_*n+2048>>12,_=y,y=w*r+b*e+2048>>12,w=w*e-b*r+2048>>12,b=y,k[0+M]=c+_,k[7+M]=c-_,k[1+M]=d+b,k[6+M]=d-b,k[2+M]=m+w,k[5+M]=m-w,k[3+M]=p+g,k[4+M]=p-g):(y=o*k[0+M]+512>>10,k[0+M]=y,k[1+M]=y,k[2+M]=y,k[3+M]=y,k[4+M]=y,k[5+M]=y,k[6+M]=y,k[7+M]=y)}for(v=0;v<8;++v){var A=v;0!=k[8+A]||0!=k[16+A]||0!=k[24+A]||0!=k[32+A]||0!=k[40+A]||0!=k[48+A]||0!=k[56+A]?(c=o*k[0+A]+2048>>12,d=o*k[32+A]+2048>>12,m=k[16+A],p=k[48+A],g=h*(k[8+A]-k[56+A])+2048>>12,_=h*(k[8+A]+k[56+A])+2048>>12,w=k[24+A],b=k[40+A],y=c-d+1>>1,c=c+d+1>>1,d=y,y=m*a+p*s+2048>>12,m=m*s-p*a+2048>>12,p=y,y=g-b+1>>1,g=g+b+1>>1,b=y,y=_+w+1>>1,w=_-w+1>>1,_=y,y=c-p+1>>1,c=c+p+1>>1,p=y,y=d-m+1>>1,d=d+m+1>>1,m=y,y=g*n+_*i+2048>>12,g=g*i-_*n+2048>>12,_=y,y=w*r+b*e+2048>>12,w=w*e-b*r+2048>>12,b=y,k[0+A]=c+_,k[56+A]=c-_,k[8+A]=d+b,k[48+A]=d-b,k[16+A]=m+w,k[40+A]=m-w,k[24+A]=p+g,k[32+A]=p-g):(y=o*f[v+0]+8192>>14,k[0+A]=y,k[8+A]=y,k[16+A]=y,k[24+A]=y,k[32+A]=y,k[40+A]=y,k[48+A]=y,k[56+A]=y)}for(v=0;v<64;++v){var E=128+(k[v]+8>>4);u[v]=E<0?0:E>255?255:E}}g(p*m*8);for(var y=0;y<m;y++){var v=y<<3;for(u=0;u<8;u++)c.push(new Uint8Array(p));for(var x=0;x<d;x++){_(l.blocks[y][x],b,w);var k=0,M=x<<3;for(f=0;f<8;f++){var A=c[v+f];for(u=0;u<8;u++)A[M+u]=b[k++]}}}return c}function d(t){return t<0?0:t>255?255:t}l.prototype={load:function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){var t=new Uint8Array(e.response||e.mozResponseArrayBuffer);this.parse(t),this.onload&&this.onload()}.bind(this),e.send(null)},parse:function(e){var r=1e3*this.opts.maxResolutionInMP*1e3,i=0;function n(){var t=e[i]<<8|e[i+1];return i+=2,t}function s(t){var e,r,i=0,n=0;for(r in t.components)t.components.hasOwnProperty(r)&&(i<(e=t.components[r]).h&&(i=e.h),n<e.v&&(n=e.v));var s=Math.ceil(t.samplesPerLine/8/i),a=Math.ceil(t.scanLines/8/n);for(r in t.components)if(t.components.hasOwnProperty(r)){e=t.components[r];var o=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/i),h=Math.ceil(Math.ceil(t.scanLines/8)*e.v/n),l=s*e.h,u=a*e.v,f=[];g(u*l*256);for(var c=0;c<u;c++){for(var d=[],m=0;m<l;m++)d.push(new Int32Array(64));f.push(d)}e.blocksPerLine=o,e.blocksPerColumn=h,e.blocks=f}t.maxH=i,t.maxV=n,t.mcusPerLine=s,t.mcusPerColumn=a}e.length;var a,o,h,l,d=null,m=null,p=[],w=[],b=[],_=[],y=n(),v=-1;if(this.comments=[],65496!=y)throw new Error("SOI not found");for(y=n();65497!=y;){switch(y){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var x=(h=void 0,l=void 0,h=n(),l=e.subarray(i,i+h-2),i+=l.length,l);if(65534===y){var k=String.fromCharCode.apply(null,x);this.comments.push(k)}65504===y&&74===x[0]&&70===x[1]&&73===x[2]&&70===x[3]&&0===x[4]&&(d={version:{major:x[5],minor:x[6]},densityUnits:x[7],xDensity:x[8]<<8|x[9],yDensity:x[10]<<8|x[11],thumbWidth:x[12],thumbHeight:x[13],thumbData:x.subarray(14,14+3*x[12]*x[13])}),65505===y&&69===x[0]&&120===x[1]&&105===x[2]&&102===x[3]&&0===x[4]&&(this.exifBuffer=x.subarray(5,x.length)),65518===y&&65===x[0]&&100===x[1]&&111===x[2]&&98===x[3]&&101===x[4]&&0===x[5]&&(m={version:x[6],flags0:x[7]<<8|x[8],flags1:x[9]<<8|x[10],transformCode:x[11]});break;case 65499:for(var M=n()+i-2;i<M;){var A=e[i++];g(256);var E=new Int32Array(64);if(A>>4==0)for(H=0;H<64;H++)E[t[H]]=e[i++];else{if(A>>4!=1)throw new Error("DQT: invalid table spec");for(H=0;H<64;H++)E[t[H]]=n()}p[15&A]=E}break;case 65472:case 65473:case 65474:n(),(a={}).extended=65473===y,a.progressive=65474===y,a.precision=e[i++],a.scanLines=n(),a.samplesPerLine=n(),a.components={},a.componentsOrder=[];var S=a.scanLines*a.samplesPerLine;if(S>r){var D=Math.ceil((S-r)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${D}MP`)}var I,C=e[i++];for(G=0;G<C;G++){I=e[i];var R=e[i+1]>>4,B=15&e[i+1],P=e[i+2];a.componentsOrder.push(I),a.components[I]={h:R,v:B,quantizationIdx:P},i+=3}s(a),w.push(a);break;case 65476:var z=n();for(G=2;G<z;){var T=e[i++],U=new Uint8Array(16),F=0;for(H=0;H<16;H++,i++)F+=U[H]=e[i];g(16+F);var O=new Uint8Array(F);for(H=0;H<F;H++,i++)O[H]=e[i];G+=17+F,(T>>4==0?_:b)[15&T]=u(U,O)}break;case 65501:n(),o=n();break;case 65500:n(),n();break;case 65498:n();var L=e[i++],N=[];for(G=0;G<L;G++){W=a.components[e[i++]];var Z=e[i++];W.huffmanTableDC=_[Z>>4],W.huffmanTableAC=b[15&Z],N.push(W)}var Y=e[i++],V=e[i++],j=e[i++],X=f(e,i,a,N,o,Y,V,j>>4,15&j,this.opts);i+=X;break;case 65535:255!==e[i]&&i--;break;default:if(255==e[i-3]&&e[i-2]>=192&&e[i-2]<=254){i-=3;break}if(224===y||225==y){if(-1!==v)throw new Error(`first unknown JPEG marker at offset ${v.toString(16)}, second unknown JPEG marker ${y.toString(16)} at offset ${(i-1).toString(16)}`);v=i-1;const t=n();if(255===e[i+t-2]){i+=t-2;break}}throw new Error("unknown JPEG marker "+y.toString(16))}y=n()}if(1!=w.length)throw new Error("only single frame JPEGs supported");for(var G=0;G<w.length;G++){var q=w[G].components;for(var H in q)q[H].quantizationTable=p[q[H].quantizationIdx],delete q[H].quantizationIdx}for(this.width=a.samplesPerLine,this.height=a.scanLines,this.jfif=d,this.adobe=m,this.components=[],G=0;G<a.componentsOrder.length;G++){var W=a.components[a.componentsOrder[G]];this.components.push({lines:c(0,W),scaleX:W.h/a.maxH,scaleY:W.v/a.maxV})}},getData:function(t,e){var r,i,n,s,a,o,h,l,u,f,c,m,p,w,b,_,y,v,x,k,M,A=this.width/t,E=this.height/e,S=0,D=t*e*this.components.length;g(D);var I=new Uint8Array(D);switch(this.components.length){case 1:for(r=this.components[0],f=0;f<e;f++)for(a=r.lines[0|f*r.scaleY*E],u=0;u<t;u++)c=a[0|u*r.scaleX*A],I[S++]=c;break;case 2:for(r=this.components[0],i=this.components[1],f=0;f<e;f++)for(a=r.lines[0|f*r.scaleY*E],o=i.lines[0|f*i.scaleY*E],u=0;u<t;u++)c=a[0|u*r.scaleX*A],I[S++]=c,c=o[0|u*i.scaleX*A],I[S++]=c;break;case 3:for(M=!0,this.adobe&&this.adobe.transformCode?M=!0:void 0!==this.opts.colorTransform&&(M=!!this.opts.colorTransform),r=this.components[0],i=this.components[1],n=this.components[2],f=0;f<e;f++)for(a=r.lines[0|f*r.scaleY*E],o=i.lines[0|f*i.scaleY*E],h=n.lines[0|f*n.scaleY*E],u=0;u<t;u++)M?(c=a[0|u*r.scaleX*A],m=o[0|u*i.scaleX*A],v=d(c+1.402*((p=h[0|u*n.scaleX*A])-128)),x=d(c-.3441363*(m-128)-.71413636*(p-128)),k=d(c+1.772*(m-128))):(v=a[0|u*r.scaleX*A],x=o[0|u*i.scaleX*A],k=h[0|u*n.scaleX*A]),I[S++]=v,I[S++]=x,I[S++]=k;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(M=!1,this.adobe&&this.adobe.transformCode?M=!0:void 0!==this.opts.colorTransform&&(M=!!this.opts.colorTransform),r=this.components[0],i=this.components[1],n=this.components[2],s=this.components[3],f=0;f<e;f++)for(a=r.lines[0|f*r.scaleY*E],o=i.lines[0|f*i.scaleY*E],h=n.lines[0|f*n.scaleY*E],l=s.lines[0|f*s.scaleY*E],u=0;u<t;u++)M?(c=a[0|u*r.scaleX*A],m=o[0|u*i.scaleX*A],p=h[0|u*n.scaleX*A],w=l[0|u*s.scaleX*A],b=255-d(c+1.402*(p-128)),_=255-d(c-.3441363*(m-128)-.71413636*(p-128)),y=255-d(c+1.772*(m-128))):(b=a[0|u*r.scaleX*A],_=o[0|u*i.scaleX*A],y=h[0|u*n.scaleX*A],w=l[0|u*s.scaleX*A]),I[S++]=255-b,I[S++]=255-_,I[S++]=255-y,I[S++]=255-w;break;default:throw new Error("Unsupported color mode")}return I},copyToImageData:function(t,e){var r,i,n,s,a,o,h,l,u,f=t.width,c=t.height,m=t.data,p=this.getData(f,c),g=0,w=0;switch(this.components.length){case 1:for(i=0;i<c;i++)for(r=0;r<f;r++)n=p[g++],m[w++]=n,m[w++]=n,m[w++]=n,e&&(m[w++]=255);break;case 3:for(i=0;i<c;i++)for(r=0;r<f;r++)h=p[g++],l=p[g++],u=p[g++],m[w++]=h,m[w++]=l,m[w++]=u,e&&(m[w++]=255);break;case 4:for(i=0;i<c;i++)for(r=0;r<f;r++)a=p[g++],o=p[g++],n=p[g++],h=255-d(a*(1-(s=p[g++])/255)+s),l=255-d(o*(1-s/255)+s),u=255-d(n*(1-s/255)+s),m[w++]=h,m[w++]=l,m[w++]=u,e&&(m[w++]=255);break;default:throw new Error("Unsupported color mode")}}};var m=0,p=0;function g(t=0){var e=m+t;if(e>p){var r=Math.ceil((e-p)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${r}MB`)}m=e}return l.resetMaxMemoryUsage=function(t){m=0,p=t},l.getBytesAllocated=function(){return m},l.requestMemoryAllocation=g,l}();t.exports=function(t,r={}){var i={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...r},n=new Uint8Array(t),s=new e;s.opts=i,e.resetMaxMemoryUsage(1024*i.maxMemoryUsageInMB*1024),s.parse(n);var a=i.formatAsRGBA?4:3,o=s.width*s.height*a;try{e.requestMemoryAllocation(o);var h={width:s.width,height:s.height,exifBuffer:s.exifBuffer,data:i.useTArray?new Uint8Array(o):Buffer.alloc(o)};s.comments.length>0&&(h.comments=s.comments)}catch(t){throw t instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+o):t}return s.copyToImageData(h,i.formatAsRGBA),h}},587:t=>{function e(t){Math.round;var e,r,i,n,s,a=Math.floor,o=new Array(64),h=new Array(64),l=new Array(64),u=new Array(64),f=new Array(65535),c=new Array(65535),d=new Array(64),m=new Array(64),p=[],g=0,w=7,b=new Array(64),_=new Array(64),y=new Array(64),v=new Array(256),x=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],R=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function B(t,e){for(var r=0,i=0,n=new Array,s=1;s<=16;s++){for(var a=1;a<=t[s];a++)n[e[i]]=[],n[e[i]][0]=r,n[e[i]][1]=s,i++,r++;r*=2}return n}function P(t){for(var e=t[0],r=t[1]-1;r>=0;)e&1<<r&&(g|=1<<w),r--,--w<0&&(255==g?(z(255),z(0)):z(g),w=7,g=0)}function z(t){p.push(t)}function T(t){z(t>>8&255),z(255&t)}function U(t,e,r,i,n){for(var s,a=n[0],o=n[240],h=function(t,e){var r,i,n,s,a,o,h,l,u,f,c=0;for(u=0;u<8;++u){r=t[c],i=t[c+1],n=t[c+2],s=t[c+3],a=t[c+4],o=t[c+5],h=t[c+6];var m=r+(l=t[c+7]),p=r-l,g=i+h,w=i-h,b=n+o,_=n-o,y=s+a,v=s-a,x=m+y,k=m-y,M=g+b,A=g-b;t[c]=x+M,t[c+4]=x-M;var E=.707106781*(A+k);t[c+2]=k+E,t[c+6]=k-E;var S=.382683433*((x=v+_)-(A=w+p)),D=.5411961*x+S,I=1.306562965*A+S,C=.707106781*(M=_+w),R=p+C,B=p-C;t[c+5]=B+D,t[c+3]=B-D,t[c+1]=R+I,t[c+7]=R-I,c+=8}for(c=0,u=0;u<8;++u){r=t[c],i=t[c+8],n=t[c+16],s=t[c+24],a=t[c+32],o=t[c+40],h=t[c+48];var P=r+(l=t[c+56]),z=r-l,T=i+h,U=i-h,F=n+o,O=n-o,L=s+a,N=s-a,Z=P+L,Y=P-L,V=T+F,j=T-F;t[c]=Z+V,t[c+32]=Z-V;var X=.707106781*(j+Y);t[c+16]=Y+X,t[c+48]=Y-X;var G=.382683433*((Z=N+O)-(j=U+z)),q=.5411961*Z+G,H=1.306562965*j+G,W=.707106781*(V=O+U),$=z+W,K=z-W;t[c+40]=K+q,t[c+24]=K-q,t[c+8]=$+H,t[c+56]=$-H,c++}for(u=0;u<64;++u)f=t[u]*e[u],d[u]=f>0?f+.5|0:f-.5|0;return d}(t,e),l=0;l<64;++l)m[k[l]]=h[l];var u=m[0]-r;r=m[0],0==u?P(i[0]):(P(i[c[s=32767+u]]),P(f[s]));for(var p=63;p>0&&0==m[p];p--);if(0==p)return P(a),r;for(var g,w=1;w<=p;){for(var b=w;0==m[w]&&w<=p;++w);var _=w-b;if(_>=16){g=_>>4;for(var y=1;y<=g;++y)P(o);_&=15}s=32767+m[w],P(n[(_<<4)+c[s]]),P(f[s]),w++}return 63!=p&&P(a),r}function F(t){t<=0&&(t=1),t>100&&(t=100),s!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var i=a((e[r]*t+50)/100);i<1?i=1:i>255&&(i=255),o[k[r]]=i}for(var n=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var f=a((n[s]*t+50)/100);f<1?f=1:f>255&&(f=255),h[k[s]]=f}for(var c=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,m=0;m<8;m++)for(var p=0;p<8;p++)l[d]=1/(o[k[d]]*c[m]*c[p]*8),u[d]=1/(h[k[d]]*c[m]*c[p]*8),d++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),s=t)}this.encode=function(t,s){(new Date).getTime(),s&&F(s),p=new Array,g=0,w=7,T(65496),T(65504),T(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),T(1),T(1),z(0),z(0),function(t){if(t){T(65505),69===t[0]&&120===t[1]&&105===t[2]&&102===t[3]?T(t.length+2):(T(t.length+5+2),z(69),z(120),z(105),z(102),z(0));for(var e=0;e<t.length;e++)z(t[e])}}(t.exifBuffer),function(){T(65499),T(132),z(0);for(var t=0;t<64;t++)z(o[t]);z(1);for(var e=0;e<64;e++)z(h[e])}(),function(t,e){T(65472),T(17),z(8),T(e),T(t),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(t.width,t.height),function(){T(65476),T(418),z(0);for(var t=0;t<16;t++)z(M[t+1]);for(var e=0;e<=11;e++)z(A[e]);z(16);for(var r=0;r<16;r++)z(E[r+1]);for(var i=0;i<=161;i++)z(S[i]);z(1);for(var n=0;n<16;n++)z(D[n+1]);for(var s=0;s<=11;s++)z(I[s]);z(17);for(var a=0;a<16;a++)z(C[a+1]);for(var o=0;o<=161;o++)z(R[o])}(),T(65498),T(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var a=0,f=0,c=0;g=0,w=7,this.encode.displayName="_encode_";for(var d,m,v,k,B,O,L,N,Z,Y=t.data,V=t.width,j=t.height,X=4*V,G=0;G<j;){for(d=0;d<X;){for(O=B=X*G+d,L=-1,N=0,Z=0;Z<64;Z++)O=B+(N=Z>>3)*X+(L=4*(7&Z)),G+N>=j&&(O-=X*(G+1+N-j)),d+L>=X&&(O-=d+L-X+4),m=Y[O++],v=Y[O++],k=Y[O++],b[Z]=(x[m]+x[v+256>>0]+x[k+512>>0]>>16)-128,_[Z]=(x[m+768>>0]+x[v+1024>>0]+x[k+1280>>0]>>16)-128,y[Z]=(x[m+1280>>0]+x[v+1536>>0]+x[k+1792>>0]>>16)-128;a=U(b,l,a,e,i),f=U(_,u,f,r,n),c=U(y,u,c,r,n),d+=32}G+=8}if(w>=0){var q=[];q[1]=w+1,q[0]=(1<<w+1)-1,P(q)}return T(65497),Buffer.from(p)},(new Date).getTime(),t||(t=50),function(){for(var t=String.fromCharCode,e=0;e<256;e++)v[e]=t(e)}(),e=B(M,A),r=B(D,I),i=B(E,S),n=B(C,R),function(){for(var t=1,e=2,r=1;r<=15;r++){for(var i=t;i<e;i++)c[32767+i]=r,f[32767+i]=[],f[32767+i][1]=r,f[32767+i][0]=i;for(var n=-(e-1);n<=-t;n++)c[32767+n]=r,f[32767+n]=[],f[32767+n][1]=r,f[32767+n][0]=e-1+n;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)x[t]=19595*t,x[t+256>>0]=38470*t,x[t+512>>0]=7471*t+32768,x[t+768>>0]=-11059*t,x[t+1024>>0]=-21709*t,x[t+1280>>0]=32768*t+8421375,x[t+1536>>0]=-27439*t,x[t+1792>>0]=-5329*t}(),F(t),(new Date).getTime()}t.exports=function(t,r){return void 0===r&&(r=50),{data:new e(r).encode(t,r),width:t.width,height:t.height}}},5307:t=>{t.exports=function t(e,r,i){function n(a,o){if(!r[a]){if(!e[a]){if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var l=r[a]={exports:{}};e[a][0].call(l.exports,(function(t){return n(e[a][1][t]||t)}),l,l.exports,t,e,r,i)}return r[a].exports}for(var s=void 0,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,e,r){var i,n,s,a,o,h={}.hasOwnProperty;i=t("./PriorityQueue/AbstractPriorityQueue"),n=t("./PriorityQueue/ArrayStrategy"),a=t("./PriorityQueue/BinaryHeapStrategy"),s=t("./PriorityQueue/BHeapStrategy"),(o=function(t){function e(t){t||(t={}),t.strategy||(t.strategy=a),t.comparator||(t.comparator=function(t,e){return(t||0)-(e||0)}),e.__super__.constructor.call(this,t)}return function(t,e){for(var r in e)h.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e}(i)).ArrayStrategy=n,o.BinaryHeapStrategy=a,o.BHeapStrategy=s,e.exports=o},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(t,e,r){e.exports=function(){function t(t){var e;if(null==(null!=t?t.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=t?t.comparator:void 0))throw"Must pass options.comparator, a comparator";this.priv=new t.strategy(t),this.length=(null!=t&&null!=(e=t.initialValues)?e.length:void 0)||0}return t.prototype.queue=function(t){this.length++,this.priv.queue(t)},t.prototype.dequeue=function(t){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},t.prototype.peek=function(t){if(!this.length)throw"Empty queue";return this.priv.peek()},t.prototype.clear=function(){return this.length=0,this.priv.clear()},t}()},{}],3:[function(t,e,r){var i;i=function(t,e,r){var i,n,s;for(n=0,i=t.length;n<i;)r(t[s=n+i>>>1],e)>=0?n=s+1:i=s;return n},e.exports=function(){function t(t){var e;this.options=t,this.comparator=this.options.comparator,this.data=(null!=(e=this.options.initialValues)?e.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return t.prototype.queue=function(t){var e;e=i(this.data,t,this.comparator),this.data.splice(e,0,t)},t.prototype.dequeue=function(){return this.data.pop()},t.prototype.peek=function(){return this.data[this.data.length-1]},t.prototype.clear=function(){this.data.length=0},t}()},{}],4:[function(t,e,r){e.exports=function(){function t(t){var e,r,i,n,s,a,o,h;for(this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.pageSize=(null!=t?t.pageSize:void 0)||512,this.length=0,o=0;1<<o<this.pageSize;)o+=1;if(1<<o!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=o,this._emptyMemoryPageTemplate=e=[],r=0,s=this.pageSize;0<=s?r<s:r>s;0<=s?++r:--r)e.push(null);if(this._memory=[],this._mask=this.pageSize-1,t.initialValues)for(i=0,n=(a=t.initialValues).length;i<n;i++)h=a[i],this.queue(h)}return t.prototype.queue=function(t){this.length+=1,this._write(this.length,t),this._bubbleUp(this.length,t)},t.prototype.dequeue=function(){var t,e;return t=this._read(1),e=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,e),this._bubbleDown(1,e)),t},t.prototype.peek=function(){return this._read(1)},t.prototype.clear=function(){this.length=0,this._memory.length=0},t.prototype._write=function(t,e){var r;for(r=t>>this._shift;r>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[r][t&this._mask]=e},t.prototype._read=function(t){return this._memory[t>>this._shift][t&this._mask]},t.prototype._bubbleUp=function(t,e){var r,i,n,s;for(r=this.comparator;t>1&&(i=t&this._mask,t<this.pageSize||i>3?n=t&~this._mask|i>>1:i<2?(n=t-this.pageSize>>this._shift,n+=n&~(this._mask>>1),n|=this.pageSize>>1):n=t-2,!(r(s=this._read(n),e)<0));)this._write(n,e),this._write(t,s),t=n},t.prototype._bubbleDown=function(t,e){var r,i,n,s,a;for(a=this.comparator;t<this.length;)if(t>this._mask&&!(t&this._mask-1)?r=i=t+2:t&this.pageSize>>1?(r=(t&~this._mask)>>1,i=1+(r=1+(r|=t&this._mask>>1)<<this._shift)):i=(r=t+(t&this._mask))+1,r!==i&&i<=this.length)if(n=this._read(r),s=this._read(i),a(n,e)<0&&a(n,s)<=0)this._write(r,e),this._write(t,n),t=r;else{if(!(a(s,e)<0))break;this._write(i,e),this._write(t,s),t=i}else{if(!(r<=this.length))break;if(!(a(n=this._read(r),e)<0))break;this._write(r,e),this._write(t,n),t=r}},t}()},{}],5:[function(t,e,r){e.exports=function(){function t(t){var e;this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.length=0,this.data=(null!=(e=t.initialValues)?e.slice(0):void 0)||[],this._heapify()}return t.prototype._heapify=function(){var t,e,r;if(this.data.length>0)for(t=e=1,r=this.data.length;1<=r?e<r:e>r;t=1<=r?++e:--e)this._bubbleUp(t)},t.prototype.queue=function(t){this.data.push(t),this._bubbleUp(this.data.length-1)},t.prototype.dequeue=function(){var t,e;return e=this.data[0],t=this.data.pop(),this.data.length>0&&(this.data[0]=t,this._bubbleDown(0)),e},t.prototype.peek=function(){return this.data[0]},t.prototype.clear=function(){this.length=0,this.data.length=0},t.prototype._bubbleUp=function(t){for(var e,r;t>0&&(e=t-1>>>1,this.comparator(this.data[t],this.data[e])<0);)r=this.data[e],this.data[e]=this.data[t],this.data[t]=r,t=e},t.prototype._bubbleDown=function(t){var e,r,i,n,s;for(e=this.data.length-1;n=1+(r=1+(t<<1)),i=t,r<=e&&this.comparator(this.data[r],this.data[i])<0&&(i=r),n<=e&&this.comparator(this.data[n],this.data[i])<0&&(i=n),i!==t;)s=this.data[i],this.data[i]=this.data[t],this.data[t]=s,t=i},t}()},{}]},{},[1])(1)},2229:function(t){t.exports=function(){"use strict";function t(t){return"string"==typeof t||t instanceof String}var e=Number.isFinite||window.isFinite;function r(t){return e(t)}function i(t){return t}function n(t,e){if(e.length!==t.length)return!1;for(var r=0;r<t.length;r++){if(e[r].compareArray&&!e[r].compareArray(t[r]))return!1;if(e[r]!==t[r])return!1}return!0}function s(t,e){Object.keys(e).forEach((function(r){t[r]=e[r]}))}function a(){for(var t=1,e=0,r=0;r<arguments.length;r++){var i=arguments[r];e+=l(i),t*=i}return 0!==e?h(t,e):t}function o(t,e){if(0===e)throw new Error("Divide by zero");var r=Math.pow(10,l(e));return a(t,r/(r*e))}function h(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function l(t){if(!isFinite(t))return 0;for(var e=0;t%1!=0;)t*=10,e++;return e}function u(){var t;if(!this)return t=Object.create(u.prototype),u.apply(t,arguments),t;t=Error.apply(this,arguments),this.name="QtyError",this.message=t.message,this.stack=t.stack}function f(t,e){throw new u("Incompatible units: "+t+" and "+e)}u.prototype=Object.create(Error.prototype,{constructor:{value:u}});var c={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","μ","µ","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],86400,"time",["<second>"]],"<week>":[["wk","week","weeks"],604800,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","Ω","Ω"],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-9,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},d=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],m="<1>",p=[m];function g(t,e){var i=e[1],n=e[3]||[],s=e[4]||[];if(!r(i))throw new u(t+": Invalid unit definition. 'scalar' must be a number");n.forEach((function(e){if(void 0===c[e])throw new u(t+": Invalid unit definition. Unit "+e+" in 'numerator' is not recognized")})),s.forEach((function(e){if(void 0===c[e])throw new u(t+": Invalid unit definition. Unit "+e+" in 'denominator' is not recognized")}))}var w={},b={},_={},y={},v={};for(var x in c)if(c.hasOwnProperty(x)){var k=c[x];if("prefix"===k[2]){w[x]=k[1];for(var M=0;M<k[0].length;M++)b[k[0][M]]=x}else{g(x,k),_[x]={scalar:k[1],numerator:k[3],denominator:k[4]};for(var A=0;A<k[0].length;A++)y[k[0][A]]=x}v[x]=k[0][0]}var E=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function S(){if(this.signature)return this.signature;for(var t=D.call(this),e=0;e<t.length;e++)t[e]*=Math.pow(20,e);return t.reduce((function(t,e){return t+e}),0)}function D(){if(!this.isBase())return D.call(this.toBase());for(var t,e,r=new Array(E.length),i=0;i<r.length;i++)r[i]=0;for(var n=0;n<this.numerator.length;n++)(t=c[this.numerator[n]])&&(e=E.indexOf(t[2]))>=0&&(r[e]=r[e]+1);for(var s=0;s<this.denominator.length;s++)(t=c[this.denominator[s]])&&(e=E.indexOf(t[2]))>=0&&(r[e]=r[e]-1);return r}var I=new RegExp("^([+-]?\\s*(?:(?:\\d+(?:\\.\\d+)?)|(?:\\.\\d+))(?:[Ee][+-]?\\d+)?)?\\s*([^/]*)(?:/(.+))?$"),C=new RegExp("([^ \\*\\d]+?)(?:\\^|\\*{2})?(-?[01234](?![a-zA-Z]))"),R=new RegExp("([^ \\*\\d]+?)(?:\\^|\\*{2})?([01234](?![a-zA-Z]))");function B(e){t(e)||(e=e.toString()),e=e.trim();var r=I.exec(e);if(!r)throw new u(e+": Quantity not recognized");var i=r[1];i?(i=i.replace(/\s/g,""),this.scalar=parseFloat(i)):this.scalar=1;for(var n,s,a,o=r[2],h=r[3];r=C.exec(o);){if(n=parseFloat(r[2]),isNaN(n))throw new u("Unit exponent is not a number");if(0===n&&!z.test(r[1]))throw new u("Unit not recognized");s=r[1]+" ",a="";for(var l=0;l<Math.abs(n);l++)a+=s;n>=0?o=o.replace(r[0],a):(h=h?h+a:a,o=o.replace(r[0],""))}for(;r=R.exec(h);){if(n=parseFloat(r[2]),isNaN(n))throw new u("Unit exponent is not a number");if(0===n&&!z.test(r[1]))throw new u("Unit not recognized");s=r[1]+" ",a="";for(var f=0;f<n;f++)a+=s;h=h.replace(r[0],a)}o&&(this.numerator=F(o.trim())),h&&(this.denominator=F(h.trim()))}var P="("+Object.keys(b).sort((function(t,e){return e.length-t.length})).join("|")+")??("+Object.keys(y).sort((function(t,e){return e.length-t.length})).join("|")+")(?:\\b|$)",z=new RegExp("^\\s*("+P+"[\\s\\*]*)+$"),T=new RegExp(P,"g"),U={};function F(t){var e=U[t];if(e)return e;var r,i=[];if(!z.test(t))throw new u("Unit not recognized");for(;r=T.exec(t);)i.push(r.slice(1));return i=(i=(i=i.map((function(t){return b[t[0]]?[b[t[0]],y[t[1]]]:[y[t[1]]]}))).reduce((function(t,e){return t.concat(e)}),[])).filter((function(t){return t})),U[t]=i,i}function O(t){return t instanceof L}function L(t,e){if(N.apply(null,arguments),!O(this))return new L(t,e);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=p,this.denominator=p,Z(t)?(this.scalar=t.scalar,this.numerator=t.numerator&&0!==t.numerator.length?t.numerator:p,this.denominator=t.denominator&&0!==t.denominator.length?t.denominator:p):e?(B.call(this,e),this.scalar=t):B.call(this,t),this.denominator.join("*").indexOf("temp")>=0)throw new u("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new u("Cannot multiply by temperatures");if(!n(this.denominator,p))throw new u("Cannot divide with temperatures")}if(this.initValue=t,Y.call(this),this.isTemperature()&&this.baseScalar<0)throw new u("Temperatures must not be less than absolute zero")}function N(e,i){if(i){if(!r(e)||!t(i))throw new u("Only number accepted as initialization value when units are explicitly provided")}else if(!(t(e)||r(e)||O(e)||Z(e)))throw new u("Only string, number or quantity accepted as single initialization value")}function Z(t){return t&&"object"==typeof t&&t.hasOwnProperty("scalar")}function Y(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=S.call(this);else{var t=this.toBase();this.baseScalar=t.scalar,this.signature=t.signature}}L.prototype={constructor:L};var V={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency",25599999980:"information_rate",256e8:"information",511999999980:"angular_velocity",512e9:"angle"};function j(t,e){var r=e.to(X(t.units()));return L({scalar:t.scalar+r.scalar,numerator:t.numerator,denominator:t.denominator})}function X(t){if("tempK"===t)return"degK";if("tempC"===t)return"degC";if("tempF"===t)return"degF";if("tempR"===t)return"degR";throw new u("Unknown type for temp conversion from: "+t)}function G(t,e){var r,i=function(t){var e,r=t.units();if(r.match(/(deg)[CFRK]/))e=t.baseScalar;else if("tempK"===r)e=t.scalar;else if("tempC"===r)e=t.scalar;else if("tempF"===r)e=5*t.scalar/9;else{if("tempR"!==r)throw new u("Unknown type for temp conversion from: "+r);e=5*t.scalar/9}return L({scalar:e,numerator:["<kelvin>"],denominator:p})}(t),n=e.units();if("degK"===n)r=i.scalar;else if("degC"===n)r=i.scalar;else if("degF"===n)r=9*i.scalar/5;else{if("degR"!==n)throw new u("Unknown type for degree conversion to: "+n);r=9*i.scalar/5}return L({scalar:r,numerator:e.numerator,denominator:e.denominator})}L.prototype.kind=function(){return V[this.signature.toString()]},s(L.prototype,{isDegrees:function(){return(null===this.signature||400===this.signature)&&1===this.numerator.length&&n(this.denominator,p)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}}),s(L.prototype,{to:function(e){var r,i;return null==e?this:t(e)?(r=this._conversionCache[e])?r:(i=L(e)).units()===this.units()?this:(this.isCompatible(i)?i=i.isTemperature()?function(t,e){var r,i=e.units();if("tempK"===i)r=t.baseScalar;else if("tempC"===i)r=t.baseScalar-273.15;else if("tempF"===i)r=9*t.baseScalar/5-459.67;else{if("tempR"!==i)throw new u("Unknown type for temp conversion to: "+i);r=9*t.baseScalar/5}return L({scalar:r,numerator:e.numerator,denominator:e.denominator})}(this,i):i.isDegrees()?G(this,i):L({scalar:o(this.baseScalar,i.baseScalar),numerator:i.numerator,denominator:i.denominator}):this.isInverse(i)?i=this.inverse().to(e):f(this.units(),i.units()),this._conversionCache[e]=i,i):this.to(e.units())},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return function(t){var e,r=t.units();if(r.match(/(deg)[CFRK]/))e=t.baseScalar;else if("tempK"===r)e=t.scalar;else if("tempC"===r)e=t.scalar+273.15;else if("tempF"===r)e=5*(t.scalar+459.67)/9;else{if("tempR"!==r)throw new u("Unknown type for temp conversion from: "+r);e=5*t.scalar/9}return L({scalar:e,numerator:["<temp-K>"],denominator:p})}(this);var t=q[this.units()];return t||(t=function(t,e){for(var r,i=[],n=[],s=1,o=0;o<t.length;o++)r=t[o],w[r]?s=a(s,w[r]):_[r]&&(s*=_[r].scalar,_[r].numerator&&i.push(_[r].numerator),_[r].denominator&&n.push(_[r].denominator));for(var h=0;h<e.length;h++)r=e[h],w[r]?s/=w[r]:_[r]&&(s/=_[r].scalar,_[r].numerator&&n.push(_[r].numerator),_[r].denominator&&i.push(_[r].denominator));return L({scalar:s,numerator:i=i.reduce((function(t,e){return t.concat(e)}),[]),denominator:n=n.reduce((function(t,e){return t.concat(e)}),[])})}(this.numerator,this.denominator),q[this.units()]=t),t.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new u("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(e){if(t(e)&&(e=L(e)),r(e)&&(e=L(e+" "+this.units())),this.isUnitless()?e.isUnitless()||f(this.units(),e.units()):e=e.to(this.units()),0===e.scalar)throw new u("Divide by zero");return L(a(Math.round(this.scalar/e.scalar),e.scalar)+this.units())}});var q={};function H(t,e,r,i){function n(t){return t!==m}t=t.filter(n),r=r.filter(n),e=e.filter(n),i=i.filter(n);var s={};function a(t,e){for(var r,i,n,a=0;a<t.length;a++)if(w[t[a]]?(r=t[a+1],i=t[a],n=w[i],a++):(r=t[a],i=null,n=1),r&&r!==m)if(s[r]){s[r][0]+=e;var h=s[r][2]?w[s[r][2]]:1;s[r][1===e?3:4]*=o(n,h)}else s[r]=[e,r,i,1,1]}a(t,1),a(e,-1),a(r,1),a(i,-1);var h=[],l=[],u=1;for(var f in s)if(s.hasOwnProperty(f)){var c,d=s[f];if(d[0]>0)for(c=0;c<d[0];c++)h.push(null===d[2]?d[1]:[d[2],d[1]]);else if(d[0]<0)for(c=0;c<-d[0];c++)l.push(null===d[2]?d[1]:[d[2],d[1]]);u*=o(d[3],d[4])}return 0===h.length&&(h=p),0===l.length&&(l=p),[h=h.reduce((function(t,e){return t.concat(e)}),[]),l=l.reduce((function(t,e){return t.concat(e)}),[]),u]}function W(){}L.parse=function(e){if(!t(e))throw new u("Argument should be a string");try{return this(e)}catch(t){return null}},L.getUnits=function(t){var e,r=[],i=Object.keys(c);if(void 0===t)for(e=0;e<i.length;e++)-1===["","prefix"].indexOf(c[i[e]][2])&&r.push(i[e].substr(1,i[e].length-2));else{if(-1===this.getKinds().indexOf(t))throw new u("Kind not recognized");for(e=0;e<i.length;e++)c[i[e]][2]===t&&r.push(i[e].substr(1,i[e].length-2))}return r.sort((function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0}))},L.getAliases=function(t){if(!y[t])throw new u("Unit not recognized");return c[y[t]][0]},L.mulSafe=a,L.divSafe=o,L.getKinds=function(){return t=Object.keys(V).map((function(t){return V[t]})),e={},t.filter((function(t){return!e.hasOwnProperty(t)&&(e[t]=!0)}));var t,e},L.swiftConverter=function(t,e){var r,n=L(t),s=L(e);return n.eq(s)?i:(r=n.isTemperature()?function(t){return n.mul(t).to(s).scalar}:function(t){return t*n.baseScalar/s.baseScalar},function(t){var e,i,n;if(Array.isArray(t)){for(i=t.length,n=[],e=0;e<i;e++)n.push(r(t[e]));return n}return r(t)})},L.Error=u,s(L.prototype,{add:function(e){if(t(e)&&(e=L(e)),this.isCompatible(e)||f(this.units(),e.units()),this.isTemperature()&&e.isTemperature())throw new u("Cannot add two temperatures");return this.isTemperature()?j(this,e):e.isTemperature()?j(e,this):L({scalar:this.scalar+e.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(e){if(t(e)&&(e=L(e)),this.isCompatible(e)||f(this.units(),e.units()),this.isTemperature()&&e.isTemperature())return i=e,n=(r=this).units(),s=i.to(n),a=L(X(n)),L({scalar:r.scalar-s.scalar,numerator:a.numerator,denominator:a.denominator});var r,i,n,s,a,o,h;if(this.isTemperature())return o=this,h=e.to(X(o.units())),L({scalar:o.scalar-h.scalar,numerator:o.numerator,denominator:o.denominator});if(e.isTemperature())throw new u("Cannot subtract a temperature from a differential degree unit");return L({scalar:this.scalar-e.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(e){if(r(e))return L({scalar:a(this.scalar,e),numerator:this.numerator,denominator:this.denominator});if(t(e)&&(e=L(e)),(this.isTemperature()||e.isTemperature())&&!this.isUnitless()&&!e.isUnitless())throw new u("Cannot multiply by temperatures");var i=this,n=e;i.isCompatible(n)&&400!==i.signature&&(n=n.to(i));var s=H(i.numerator,i.denominator,n.numerator,n.denominator);return L({scalar:a(i.scalar,n.scalar,s[2]),numerator:s[0],denominator:s[1]})},div:function(e){if(r(e)){if(0===e)throw new u("Divide by zero");return L({scalar:this.scalar/e,numerator:this.numerator,denominator:this.denominator})}if(t(e)&&(e=L(e)),0===e.scalar)throw new u("Divide by zero");if(e.isTemperature())throw new u("Cannot divide with temperatures");if(this.isTemperature()&&!e.isUnitless())throw new u("Cannot divide with temperatures");var i=this,n=e;i.isCompatible(n)&&400!==i.signature&&(n=n.to(i));var s=H(i.numerator,i.denominator,n.denominator,n.numerator);return L({scalar:a(i.scalar,s[2])/n.scalar,numerator:s[0],denominator:s[1]})},inverse:function(){if(this.isTemperature())throw new u("Cannot divide with temperatures");if(0===this.scalar)throw new u("Divide by zero");return L({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}}),s(L.prototype,{eq:function(t){return 0===this.compareTo(t)},lt:function(t){return-1===this.compareTo(t)},lte:function(t){return this.eq(t)||this.lt(t)},gt:function(t){return 1===this.compareTo(t)},gte:function(t){return this.eq(t)||this.gt(t)},compareTo:function(e){return t(e)?this.compareTo(L(e)):(this.isCompatible(e)||f(this.units(),e.units()),this.baseScalar<e.baseScalar?-1:this.baseScalar===e.baseScalar?0:this.baseScalar>e.baseScalar?1:void 0)},same:function(t){return this.scalar===t.scalar&&this.units()===t.units()}}),s(L.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every((function(t){return n(t,p)}))},isCompatible:function(e){return t(e)?this.isCompatible(L(e)):!!O(e)&&void 0!==e.signature&&this.signature===e.signature},isInverse:function(t){return this.inverse().isCompatible(t)},isBase:function(){return void 0!==this._isBase?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach((function(t){t!==m&&-1===d.indexOf(t)&&(this._isBase=!1)}),this),!1===this._isBase||(this._isBase=!0),this._isBase)}}),W.prototype.get=function(t){return arguments.length>1&&(t=Array.apply(null,arguments)),t.reduce((function(e,r,i){if(e){var n=e[r];return i===t.length-1?n?n.data:void 0:n}}),this)},W.prototype.set=function(t,e){return arguments.length>2&&(t=Array.prototype.slice.call(arguments,0,-1),e=arguments[arguments.length-1]),t.reduce((function(r,i,n){var s=r[i];return void 0===s&&(s=r[i]={}),n===t.length-1?(s.data=e,e):s}),this)},L.formatter=function(t,e){return(t+" "+e).trim()},s(L.prototype,{units:function(){if(void 0!==this._units)return this._units;var t=n(this.numerator,p),e=n(this.denominator,p);if(t&&e)return this._units="",this._units;var r=K(this.numerator),i=K(this.denominator);return this._units=r+(e?"":"/"+i),this._units},toString:function(e,i){var n;if(r(e))n=this.units(),i=e;else if(t(e))n=e;else if(O(e))return this.toPrec(e).toString(i);var s=this.to(n);return((void 0!==i?h(s.scalar,i):s.scalar)+" "+s.units()).trim()},format:function(t,e){1===arguments.length&&"function"==typeof t&&(e=t,t=void 0),e=e||L.formatter;var r=this.to(t);return e.call(this,r.scalar,r.units())}});var $=new W;function K(t){var e=$.get(t);return e||(e=n(t,p)?"1":function(t){return t.reduce((function(t,e){var r=t[e];return r||t.push(r=t[e]=[e,0]),r[1]++,t}),[]).map((function(t){return t[0]+(t[1]>1?t[1]:"")}))}(function(t){for(var e,r,i=[],n=0;n<t.length;n++)e=t[n],r=t[n+1],w[e]?(i.push(v[e]+v[r]),n++):i.push(v[e]);return i}(t)).join("*"),$.set(t,e),e)}return L.version="1.7.6",L}()},5733:(t,e,r)=>{t.exports=function t(e,r,i){function n(a,o){if(!r[a]){if(!e[a]){if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var l=r[a]={exports:{}};e[a][0].call(l.exports,(function(t){return n(e[a][1][t]||t)}),l,l.exports,t,e,r,i)}return r[a].exports}for(var s=void 0,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,e,i){(function(r){!function(t){"object"==typeof i&&void 0!==e?e.exports=t():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=t()}((function(){return function e(r,i,n){function s(o,h){if(!i[o]){if(!r[o]){var l="function"==typeof t&&t;if(!h&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=i[o]={exports:{}};r[o][0].call(f.exports,(function(t){return s(r[o][1][t]||t)}),f,f.exports,e,r,i,n)}return i[o].exports}for(var a="function"==typeof t&&t,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){(function(r){!function(t){"object"==typeof i&&void 0!==e?e.exports=t():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=t()}((function(){return function e(r,i,n){function s(o,h){if(!i[o]){if(!r[o]){var l="function"==typeof t&&t;if(!h&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=i[o]={exports:{}};r[o][0].call(f.exports,(function(t){return s(r[o][1][t]||t)}),f,f.exports,e,r,i,n)}return i[o].exports}for(var a="function"==typeof t&&t,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){(function(r){!function(t){"object"==typeof i&&void 0!==e?e.exports=t():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=t()}((function(){return function e(r,i,n){function s(o,h){if(!i[o]){if(!r[o]){var l="function"==typeof t&&t;if(!h&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=i[o]={exports:{}};r[o][0].call(f.exports,(function(t){return s(r[o][1][t]||t)}),f,f.exports,e,r,i,n)}return i[o].exports}for(var a="function"==typeof t&&t,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){(function(r){!function(t){"object"==typeof i&&void 0!==e?e.exports=t():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=t()}((function(){return function e(r,i,n){function s(o,h){if(!i[o]){if(!r[o]){var l="function"==typeof t&&t;if(!h&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=i[o]={exports:{}};r[o][0].call(f.exports,(function(t){return s(r[o][1][t]||t)}),f,f.exports,e,r,i,n)}return i[o].exports}for(var a="function"==typeof t&&t,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){(function(r){!function(t){"object"==typeof i&&void 0!==e?e.exports=t():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).JSZip=t()}((function(){return function e(r,i,n){function s(o,h){if(!i[o]){if(!r[o]){var l="function"==typeof t&&t;if(!h&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=i[o]={exports:{}};r[o][0].call(f.exports,(function(t){return s(r[o][1][t]||t)}),f,f.exports,e,r,i,n)}return i[o].exports}for(var a="function"==typeof t&&t,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,r){"use strict";var i=t("./utils"),n=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,n,a,o,h,l,u=[],f=0,c=t.length,d=c,m="string"!==i.getTypeOf(t);f<t.length;)d=c-f,n=m?(e=t[f++],r=f<c?t[f++]:0,f<c?t[f++]:0):(e=t.charCodeAt(f++),r=f<c?t.charCodeAt(f++):0,f<c?t.charCodeAt(f++):0),a=e>>2,o=(3&e)<<4|r>>4,h=1<d?(15&r)<<2|n>>6:64,l=2<d?63&n:64,u.push(s.charAt(a)+s.charAt(o)+s.charAt(h)+s.charAt(l));return u.join("")},r.decode=function(t){var e,r,i,a,o,h,l=0,u=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var f,c=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===s.charAt(64)&&c--,t.charAt(t.length-2)===s.charAt(64)&&c--,c%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=n.uint8array?new Uint8Array(0|c):new Array(0|c);l<t.length;)e=s.indexOf(t.charAt(l++))<<2|(a=s.indexOf(t.charAt(l++)))>>4,r=(15&a)<<4|(o=s.indexOf(t.charAt(l++)))>>2,i=(3&o)<<6|(h=s.indexOf(t.charAt(l++))),f[u++]=e,64!==o&&(f[u++]=r),64!==h&&(f[u++]=i);return f}},{"./support":30,"./utils":32}],2:[function(t,e,r){"use strict";var i=t("./external"),n=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function o(t,e,r,i,n){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=i,this.compressedContent=n}o.prototype={getContentWorker:function(){var t=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(t,e,r){return t.pipe(new s).pipe(new a("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new a("compressedSize")).withStreamInfo("compression",e)},e.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){"use strict";var i=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(t){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){"use strict";var i=t("./utils"),n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,r){var i=n,s=0+r;t^=-1;for(var a=0;a<s;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}(0|e,t,t.length):function(t,e,r){var i=n,s=0+r;t^=-1;for(var a=0;a<s;a++)t=t>>>8^i[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){"use strict";var i;i="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=t("pako"),s=t("./utils"),a=t("./stream/GenericWorker"),o=i?"uint8array":"array";function h(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic="\b\0",s.inherits(h,a),h.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,t.data),!1)},h.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(t){return new h("Deflate",t)},r.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){"use strict";function i(t,e){var r,i="";for(r=0;r<e;r++)i+=String.fromCharCode(255&t),t>>>=8;return i}function n(t,e,r,n,a,u){var f,c,d=t.file,m=t.compression,p=u!==o.utf8encode,g=s.transformTo("string",u(d.name)),w=s.transformTo("string",o.utf8encode(d.name)),b=d.comment,_=s.transformTo("string",u(b)),y=s.transformTo("string",o.utf8encode(b)),v=w.length!==d.name.length,x=y.length!==b.length,k="",M="",A="",E=d.dir,S=d.date,D={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(D.crc32=t.crc32,D.compressedSize=t.compressedSize,D.uncompressedSize=t.uncompressedSize);var I=0;e&&(I|=8),p||!v&&!x||(I|=2048);var C,R=0,B=0;E&&(R|=16),"UNIX"===a?(B=798,R|=((C=d.unixPermissions)||(C=E?16893:33204),(65535&C)<<16)):(B=20,R|=63&(d.dosPermissions||0)),f=S.getUTCHours(),f<<=6,f|=S.getUTCMinutes(),f<<=5,f|=S.getUTCSeconds()/2,c=S.getUTCFullYear()-1980,c<<=4,c|=S.getUTCMonth()+1,c<<=5,c|=S.getUTCDate(),v&&(k+="up"+i((M=i(1,1)+i(h(g),4)+w).length,2)+M),x&&(k+="uc"+i((A=i(1,1)+i(h(_),4)+y).length,2)+A);var P="";return P+="\n\0",P+=i(I,2),P+=m.magic,P+=i(f,2),P+=i(c,2),P+=i(D.crc32,4),P+=i(D.compressedSize,4),P+=i(D.uncompressedSize,4),P+=i(g.length,2),P+=i(k.length,2),{fileRecord:l.LOCAL_FILE_HEADER+P+g+k,dirRecord:l.CENTRAL_FILE_HEADER+i(B,2)+P+i(_.length,2)+"\0\0\0\0"+i(R,4)+i(n,4)+g+k+_}}var s=t("../utils"),a=t("../stream/GenericWorker"),o=t("../utf8"),h=t("../crc32"),l=t("../signature");function u(t,e,r,i){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(u,a),u.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,a.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-i-1))/r:100}}))},u.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=n(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(t){this.accumulate=!1;var e,r=this.streamFiles&&!t.file.dir,s=n(t,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),r)this.push({data:(e=t,l.DATA_DESCRIPTOR+i(e.crc32,4)+i(e.compressedSize,4)+i(e.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r,n,a,o,h,u,f=this.bytesWritten-t,c=(r=this.dirRecords.length,n=f,a=t,o=this.zipComment,h=this.encodeFileName,u=s.transformTo("string",h(o)),l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(r,2)+i(r,2)+i(n,4)+i(a,4)+i(u.length,2)+u);this.push({data:c,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},u.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(t){var e=this._sources;if(!a.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},u.prototype.lock=function(){a.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){"use strict";var i=t("../compressions"),n=t("./ZipFileWorker");r.generateWorker=function(t,e,r){var s=new n(e.streamFiles,r,e.platform,e.encodeFileName),a=0;try{t.forEach((function(t,r){a++;var n=function(t,e){var r=t||e,n=i[r];if(!n)throw new Error(r+" is not a valid compression method !");return n}(r.options.compression,e.compression),o=r.options.compressionOptions||e.compressionOptions||{},h=r.dir,l=r.date;r._compressWorker(n,o).withStreamInfo("file",{name:t,dir:h,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(s)})),s.entriesCount=a}catch(t){s.error(t)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.5.0",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t("./external"),e.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){"use strict";var i=t("./utils"),n=t("./external"),s=t("./utf8"),a=t("./zipEntries"),o=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function l(t){return new n.Promise((function(e,r){var i=t.decompressed.getContentWorker().pipe(new o);i.on("error",(function(t){r(t)})).on("end",(function(){i.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var r=this;return e=i.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),h.isNode&&h.isStream(t)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var r=new a(e);return r.load(t),r})).then((function(t){var r=[n.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var s=0;s<i.length;s++)r.push(l(i[s]));return n.Promise.all(r)})).then((function(t){for(var i=t.shift(),n=i.files,s=0;s<n.length;s++){var a=n[s];r.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders})}return i.zipComment.length&&(r.comment=i.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){"use strict";var i=t("../utils"),n=t("../stream/GenericWorker");function s(t,e){n.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(s,n),s.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},s.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){"use strict";var i=t("readable-stream").Readable;function n(t,e,r){i.call(this,e),this._helper=t;var n=this;t.on("data",(function(t,e){n.push(t)||n._helper.pause(),r&&r(e)})).on("error",(function(t){n.emit("error",t)})).on("end",(function(){n.push(null)}))}t("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},e.exports=n},{"../utils":32,"readable-stream":16}],14:[function(t,e,r){"use strict";e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,r){"use strict";function i(t,e,r){var i,s=a.getTypeOf(e),h=a.extend(r||{},l);h.date=h.date||new Date,null!==h.compression&&(h.compression=h.compression.toUpperCase()),"string"==typeof h.unixPermissions&&(h.unixPermissions=parseInt(h.unixPermissions,8)),h.unixPermissions&&16384&h.unixPermissions&&(h.dir=!0),h.dosPermissions&&16&h.dosPermissions&&(h.dir=!0),h.dir&&(t=n(t)),h.createFolders&&(i=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""}(t))&&p.call(this,i,!0);var c,g="string"===s&&!1===h.binary&&!1===h.base64;r&&void 0!==r.binary||(h.binary=!g),(e instanceof u&&0===e.uncompressedSize||h.dir||!e||0===e.length)&&(h.base64=!1,h.binary=!0,e="",h.compression="STORE",s="string"),c=e instanceof u||e instanceof o?e:d.isNode&&d.isStream(e)?new m(t,e):a.prepareContent(t,e,h.binary,h.optimizedBinaryString,h.base64);var w=new f(t,c,h);this.files[t]=w}function n(t){return"/"!==t.slice(-1)&&(t+="/"),t}var s=t("./utf8"),a=t("./utils"),o=t("./stream/GenericWorker"),h=t("./stream/StreamHelper"),l=t("./defaults"),u=t("./compressedObject"),f=t("./zipObject"),c=t("./generate"),d=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),p=function(t,e){return e=void 0!==e?e:l.createFolders,t=n(t),this.files[t]||i.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function g(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,i;for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,i))},filter:function(t){var e=[];return this.forEach((function(r,i){t(r,i)&&e.push(i)})),e},file:function(t,e,r){if(1!==arguments.length)return t=this.root+t,i.call(this,t,e,r),this;if(g(t)){var n=t;return this.filter((function(t,e){return!e.dir&&n.test(t)}))}var s=this.files[this.root+t];return s&&!s.dir?s:null},folder:function(t){if(!t)return this;if(g(t))return this.filter((function(e,r){return r.dir&&t.test(e)}));var e=this.root+t,r=p.call(this,e),i=this.clone();return i.root=r.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),i=0;i<r.length;i++)delete this.files[r[i].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if((r=a.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");a.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var i=r.comment||this.comment||"";e=c.generateWorker(this,r,i)}catch(t){(e=new o("error")).error(t)}return new h(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,r){"use strict";var i=t("./DataReader");function n(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(n,i),n.prototype.byteAt=function(t){return this.data[this.zero+t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===e&&this.data[s+1]===r&&this.data[s+2]===i&&this.data[s+3]===n)return s-this.zero;return-1},n.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&r===s[1]&&i===s[2]&&n===s[3]},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){"use strict";var i=t("../utils");function n(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=n},{"../utils":32}],19:[function(t,e,r){"use strict";var i=t("./Uint8ArrayReader");function n(t){i.call(this,t)}t("../utils").inherits(n,i),n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){"use strict";var i=t("./DataReader");function n(t){i.call(this,t)}t("../utils").inherits(n,i),n.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},n.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){"use strict";var i=t("./ArrayReader");function n(t){i.call(this,t)}t("../utils").inherits(n,i),n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){"use strict";var i=t("../utils"),n=t("../support"),s=t("./ArrayReader"),a=t("./StringReader"),o=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||n.uint8array?"nodebuffer"===e?new o(t):n.uint8array?new h(i.transformTo("uint8array",t)):new s(i.transformTo("array",t)):new a(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,r){"use strict";var i=t("./GenericWorker"),n=t("../utils");function s(t){i.call(this,"ConvertWorker to "+t),this.destType=t}n.inherits(s,i),s.prototype.processChunk=function(t){this.push({data:n.transformTo(this.destType,t.data),meta:t.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){"use strict";var i=t("./GenericWorker"),n=t("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,i),s.prototype.processChunk=function(t){this.streamInfo.crc32=n(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){"use strict";var i=t("../utils"),n=t("./GenericWorker");function s(t){n.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(s,n),s.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}n.prototype.processChunk.call(this,t)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){"use strict";var i=t("../utils"),n=t("./GenericWorker");function s(t){n.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}i.inherits(s,n),s.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){"use strict";function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=i},{}],29:[function(t,e,r){"use strict";var i=t("../utils"),n=t("./ConvertWorker"),s=t("./GenericWorker"),a=t("../base64"),o=t("../support"),h=t("../external"),l=null;if(o.nodestream)try{l=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function u(t,e,r){var a=e;switch(e){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=e,this._mimeType=r,i.checkSupport(a),this._worker=t.pipe(new n(a)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}u.prototype={accumulate:function(t){return e=this,r=t,new h.Promise((function(t,n){var s=[],o=e._internalType,h=e._outputType,l=e._mimeType;e.on("data",(function(t,e){s.push(t),r&&r(e)})).on("error",(function(t){s=[],n(t)})).on("end",(function(){try{var e=function(t,e,r){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),r);case"base64":return a.encode(e);default:return i.transformTo(t,e)}}(h,function(t,e){var r,i=0,n=null,s=0;for(r=0;r<e.length;r++)s+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(n=new Uint8Array(s),r=0;r<e.length;r++)n.set(e[r],i),i+=e[r].length;return n;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(o,s),l);t(e)}catch(e){n(e)}s=[]})).resume()}));var e,r},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta)})):this._worker.on(t,(function(){i.delay(e,arguments,r)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:"application/zip"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(i),r.blob=0===n.getBlob("application/zip").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(t){r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,r){"use strict";for(var i=t("./utils"),n=t("./support"),s=t("./nodejsUtils"),a=t("./stream/GenericWorker"),o=new Array(256),h=0;h<256;h++)o[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function l(){a.call(this,"utf-8 decode"),this.leftOver=null}function u(){a.call(this,"utf-8 encode")}o[254]=o[254]=1,r.utf8encode=function(t){return n.nodebuffer?s.newBufferFrom(t,"utf-8"):function(t){var e,r,i,s,a,o=t.length,h=0;for(s=0;s<o;s++)55296==(64512&(r=t.charCodeAt(s)))&&s+1<o&&56320==(64512&(i=t.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(i-56320),s++),h+=r<128?1:r<2048?2:r<65536?3:4;for(e=n.uint8array?new Uint8Array(h):new Array(h),s=a=0;a<h;s++)55296==(64512&(r=t.charCodeAt(s)))&&s+1<o&&56320==(64512&(i=t.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(i-56320),s++),r<128?e[a++]=r:(r<2048?e[a++]=192|r>>>6:(r<65536?e[a++]=224|r>>>12:(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63),e[a++]=128|r>>>6&63),e[a++]=128|63&r);return e}(t)},r.utf8decode=function(t){return n.nodebuffer?i.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,n,s,a=t.length,h=new Array(2*a);for(e=r=0;e<a;)if((n=t[e++])<128)h[r++]=n;else if(4<(s=o[n]))h[r++]=65533,e+=s-1;else{for(n&=2===s?31:3===s?15:7;1<s&&e<a;)n=n<<6|63&t[e++],s--;1<s?h[r++]=65533:n<65536?h[r++]=n:(n-=65536,h[r++]=55296|n>>10&1023,h[r++]=56320|1023&n)}return h.length!==r&&(h.subarray?h=h.subarray(0,r):h.length=r),i.applyFromCharCode(h)}(t=i.transformTo(n.uint8array?"uint8array":"array",t))},i.inherits(l,a),l.prototype.processChunk=function(t){var e=i.transformTo(n.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var s=e;(e=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),e.set(s,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var a=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+o[t[r]]>e?r:e}(e),h=e;a!==e.length&&(n.uint8array?(h=e.subarray(0,a),this.leftOver=e.subarray(a,e.length)):(h=e.slice(0,a),this.leftOver=e.slice(a,e.length))),this.push({data:r.utf8decode(h),meta:t.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=l,i.inherits(u,a),u.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta})},r.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){"use strict";var i=t("./support"),n=t("./base64"),s=t("./nodejsUtils"),a=t("set-immediate-shim"),o=t("./external");function h(t){return t}function l(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob([t],{type:e})}catch(r){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(t,e,r){var i=[],n=0,s=t.length;if(s<=r)return String.fromCharCode.apply(null,t);for(;n<s;)"array"===e||"nodebuffer"===e?i.push(String.fromCharCode.apply(null,t.slice(n,Math.min(n+r,s)))):i.push(String.fromCharCode.apply(null,t.subarray(n,Math.min(n+r,s)))),n+=r;return i.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(t){return!1}}()}};function f(t){var e=65536,i=r.getTypeOf(t),n=!0;if("uint8array"===i?n=u.applyCanBeUsed.uint8array:"nodebuffer"===i&&(n=u.applyCanBeUsed.nodebuffer),n)for(;1<e;)try{return u.stringifyByChunk(t,i,e)}catch(t){e=Math.floor(e/2)}return u.stringifyByChar(t)}function c(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}r.applyFromCharCode=f;var d={};d.string={string:h,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return d.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,s.allocBuffer(t.length))}},d.array={string:f,array:h,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(t)}},d.arraybuffer={string:function(t){return f(new Uint8Array(t))},array:function(t){return c(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:h,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(new Uint8Array(t))}},d.uint8array={string:f,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:h,nodebuffer:function(t){return s.newBufferFrom(t)}},d.nodebuffer={string:f,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return d.nodebuffer.uint8array(t).buffer},uint8array:function(t){return c(t,new Uint8Array(t.length))},nodebuffer:h},r.transformTo=function(t,e){if(e=e||"",!t)return e;r.checkSupport(t);var i=r.getTypeOf(e);return d[i][t](e)},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":i.nodebuffer&&s.isBuffer(t)?"nodebuffer":i.uint8array&&t instanceof Uint8Array?"uint8array":i.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!i[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,i="";for(r=0;r<(t||"").length;r++)i+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return i},r.delay=function(t,e,r){a((function(){t.apply(r||null,e||[])}))},r.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},r.prepareContent=function(t,e,s,a,h){return o.Promise.resolve(e).then((function(t){return i.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new o.Promise((function(e,r){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){r(t.target.error)},i.readAsArrayBuffer(t)})):t})).then((function(e){var u,f=r.getTypeOf(e);return f?("arraybuffer"===f?e=r.transformTo("uint8array",e):"string"===f&&(h?e=n.decode(e):s&&!0!==a&&(e=l(u=e,i.uint8array?new Uint8Array(u.length):new Array(u.length)))),e):o.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,r){"use strict";var i=t("./reader/readerFor"),n=t("./utils"),s=t("./signature"),a=t("./zipEntry"),o=(t("./utf8"),t("./support"));function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(e)+", expected "+n.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=o.uint8array?"uint8array":"array",r=n.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=e-r;if(0<i)this.isSignature(e,s.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){"use strict";var i=t("./reader/readerFor"),n=t("./utils"),s=t("./compressedObject"),a=t("./crc32"),o=t("./utf8"),h=t("./compressions"),l=t("./support");function u(t,e){this.options=t,this.loadOptions=e}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,i,n=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<n;)e=t.readInt(2),r=t.readInt(2),i=t.readData(r),this.extraFields[e]={id:e,length:r,value:i};t.setIndex(n)},handleUTF8:function(){var t=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=n.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var s=n.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)||a(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)||a(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null}},e.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){"use strict";function i(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var n=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),a=t("./utf8"),o=t("./compressedObject"),h=t("./stream/GenericWorker");i.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(r=t.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var s=!this._dataBinary;s&&!i&&(e=e.pipe(new a.Utf8EncodeWorker)),!s&&i&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new h("error")).error(t)}return new n(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof o&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof h?this._data:new s(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<l.length;f++)i.prototype[l[f]]=u;e.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,i){(function(t){"use strict";var r,i,n=t.MutationObserver||t.WebKitMutationObserver;if(n){var s=0,a=new n(u),o=t.document.createTextNode("");a.observe(o,{characterData:!0}),r=function(){o.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var h=new t.MessageChannel;h.port1.onmessage=u,r=function(){h.port2.postMessage(0)}}var l=[];function u(){var t,e;i=!0;for(var r=l.length;r;){for(e=l,l=[],t=-1;++t<r;)e[t]();r=l.length}i=!1}e.exports=function(t){1!==l.push(t)||i||r()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,r){"use strict";var i=t("immediate");function n(){}var s={},a=["REJECTED"],o=["FULFILLED"],h=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,t!==n&&d(this,t)}function u(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,e,r){i((function(){var i;try{i=e(r)}catch(i){return s.reject(t,i)}i===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,i)}))}function c(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var r=!1;function i(e){r||(r=!0,s.reject(t,e))}function n(e){r||(r=!0,s.resolve(t,e))}var a=m((function(){e(n,i)}));"error"===a.status&&i(a.value)}function m(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}(e.exports=l).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){throw r}))}))},l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===o||"function"!=typeof e&&this.state===a)return this;var r=new this.constructor(n);return this.state!==h?f(r,this.state===o?t:e,this.outcome):this.queue.push(new u(r,t,e)),r},u.prototype.callFulfilled=function(t){s.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){s.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},s.resolve=function(t,e){var r=m(c,e);if("error"===r.status)return s.reject(t,r.value);var i=r.value;if(i)d(t,i);else{t.state=o,t.outcome=e;for(var n=-1,a=t.queue.length;++n<a;)t.queue[n].callFulfilled(e)}return t},s.reject=function(t,e){t.state=a,t.outcome=e;for(var r=-1,i=t.queue.length;++r<i;)t.queue[r].callRejected(e);return t},l.resolve=function(t){return t instanceof this?t:s.resolve(new this(n),t)},l.reject=function(t){var e=new this(n);return s.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,i=!1;if(!r)return this.resolve([]);for(var a=new Array(r),o=0,h=-1,l=new this(n);++h<r;)u(t[h],h);return l;function u(t,n){e.resolve(t).then((function(t){a[n]=t,++o!==r||i||(i=!0,s.resolve(l,a))}),(function(t){i||(i=!0,s.reject(l,t))}))}},l.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,r=!1;if(!e)return this.resolve([]);for(var i,a=-1,o=new this(n);++a<e;)i=t[a],this.resolve(i).then((function(t){r||(r=!0,s.resolve(o,t))}),(function(t){r||(r=!0,s.reject(o,t))}));return o}},{immediate:36}],38:[function(t,e,r){"use strict";var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){"use strict";var i=t("./zlib/deflate"),n=t("./utils/common"),s=t("./utils/strings"),a=t("./zlib/messages"),o=t("./zlib/zstream"),h=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=n.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var r=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(a[r]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var u;if(u="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=i.deflateSetDictionary(this.strm,u)))throw new Error(a[r]);this._dict_set=!0}}function u(t,e){var r=new l(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}l.prototype.push=function(t,e){var r,a,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new n.Buf8(l),o.next_out=0,o.avail_out=l),1!==(r=i.deflate(o,a))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(s.buf2binstring(n.shrinkBuf(o.output,o.next_out))):this.onData(n.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==r);return 4===a?(r=i.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==a||(this.onEnd(0),!(o.avail_out=0))},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=l,r.deflate=u,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,u(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){"use strict";var i=t("./zlib/inflate"),n=t("./utils/common"),s=t("./utils/strings"),a=t("./zlib/constants"),o=t("./zlib/messages"),h=t("./zlib/zstream"),l=t("./zlib/gzheader"),u=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var r=i.inflateInit2(this.strm,e.windowBits);if(r!==a.Z_OK)throw new Error(o[r]);this.header=new l,i.inflateGetHeader(this.strm,this.header)}function c(t,e){var r=new f(e);if(r.push(t,!0),r.err)throw r.msg||o[r.err];return r.result}f.prototype.push=function(t,e){var r,o,h,l,f,c,d=this.strm,m=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?d.input=s.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new n.Buf8(m),d.next_out=0,d.avail_out=m),(r=i.inflate(d,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&p&&(c="string"==typeof p?s.string2buf(p):"[object ArrayBuffer]"===u.call(p)?new Uint8Array(p):p,r=i.inflateSetDictionary(this.strm,c)),r===a.Z_BUF_ERROR&&!0===g&&(r=a.Z_OK,g=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&r!==a.Z_STREAM_END&&(0!==d.avail_in||o!==a.Z_FINISH&&o!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(d.output,d.next_out),l=d.next_out-h,f=s.buf2string(d.output,h),d.next_out=l,d.avail_out=m-l,l&&n.arraySet(d.output,d.output,h,l,0),this.onData(f)):this.onData(n.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((0<d.avail_in||0===d.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(o=a.Z_FINISH),o===a.Z_FINISH?(r=i.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):o!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(d.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=f,r.inflate=c,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},r.ungzip=c},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+i),n);else for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){var e,r,i,n,s,a;for(e=i=0,r=t.length;e<r;e++)i+=t[e].length;for(a=new Uint8Array(i),e=n=0,r=t.length;e<r;e++)s=t[e],a.set(s,n),n+=s.length;return a}},s={arraySet:function(t,e,r,i,n){for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(i)},{}],42:[function(t,e,r){"use strict";var i=t("./common"),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var a=new i.Buf8(256),o=0;o<256;o++)a[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function h(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",a=0;a<e;a++)r+=String.fromCharCode(t[a]);return r}a[254]=a[254]=1,r.string2buf=function(t){var e,r,n,s,a,o=t.length,h=0;for(s=0;s<o;s++)55296==(64512&(r=t.charCodeAt(s)))&&s+1<o&&56320==(64512&(n=t.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),h+=r<128?1:r<2048?2:r<65536?3:4;for(e=new i.Buf8(h),s=a=0;a<h;s++)55296==(64512&(r=t.charCodeAt(s)))&&s+1<o&&56320==(64512&(n=t.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),r<128?e[a++]=r:(r<2048?e[a++]=192|r>>>6:(r<65536?e[a++]=224|r>>>12:(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63),e[a++]=128|r>>>6&63),e[a++]=128|63&r);return e},r.buf2binstring=function(t){return h(t,t.length)},r.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,n,s,o=e||t.length,l=new Array(2*o);for(r=i=0;r<o;)if((n=t[r++])<128)l[i++]=n;else if(4<(s=a[n]))l[i++]=65533,r+=s-1;else{for(n&=2===s?31:3===s?15:7;1<s&&r<o;)n=n<<6|63&t[r++],s--;1<s?l[i++]=65533:n<65536?l[i++]=n:(n-=65536,l[i++]=55296|n>>10&1023,l[i++]=56320|1023&n)}return h(l,i)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e}},{"./common":41}],43:[function(t,e,r){"use strict";e.exports=function(t,e,r,i){for(var n=65535&t|0,s=t>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(n=n+e[i++]|0)|0,--a;);n%=65521,s%=65521}return n|s<<16|0}},{}],44:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){"use strict";var i=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,n){var s=i,a=n+r;t^=-1;for(var o=n;o<a;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}},{}],46:[function(t,e,r){"use strict";var i,n=t("../utils/common"),s=t("./trees"),a=t("./adler32"),o=t("./crc32"),h=t("./messages"),l=-2,u=258,f=262,c=113;function d(t,e){return t.msg=h[e],e}function m(t){return(t<<1)-(4<t?9:0)}function p(t){for(var e=t.length;0<=--e;)t[e]=0}function g(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(n.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function w(t,e){s._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,g(t.strm)}function b(t,e){t.pending_buf[t.pending++]=e}function _(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function y(t,e){var r,i,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-f?t.strstart-(t.w_size-f):0,l=t.window,c=t.w_mask,d=t.prev,m=t.strstart+u,p=l[s+a-1],g=l[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(l[(r=e)+a]===g&&l[r+a-1]===p&&l[r]===l[s]&&l[++r]===l[s+1]){s+=2,r++;do{}while(l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<m);if(i=u-(m-s),s=m-u,a<i){if(t.match_start=e,o<=(a=i))break;p=l[s+a-1],g=l[s+a]}}}while((e=d[e&c])>h&&0!=--n);return a<=t.lookahead?a:t.lookahead}function v(t){var e,r,i,s,h,l,u,c,d,m,p=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-f)){for(n.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=r=t.hash_size;i=t.head[--e],t.head[e]=p<=i?i-p:0,--r;);for(e=r=p;i=t.prev[--e],t.prev[e]=p<=i?i-p:0,--r;);s+=p}if(0===t.strm.avail_in)break;if(l=t.strm,u=t.window,c=t.strstart+t.lookahead,m=void 0,(d=s)<(m=l.avail_in)&&(m=d),r=0===m?0:(l.avail_in-=m,n.arraySet(u,l.input,l.next_in,m,c),1===l.state.wrap?l.adler=a(l.adler,u,m,c):2===l.state.wrap&&(l.adler=o(l.adler,u,m,c)),l.next_in+=m,l.total_in+=m,m),t.lookahead+=r,t.lookahead+t.insert>=3)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+3-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<f&&0!==t.strm.avail_in)}function x(t,e){for(var r,i;;){if(t.lookahead<f){if(v(t),t.lookahead<f&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-f&&(t.match_length=y(t,r)),t.match_length>=3)if(i=s._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(w(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(w(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(w(t,!1),0===t.strm.avail_out)?1:2}function k(t,e){for(var r,i,n;;){if(t.lookahead<f){if(v(t),t.lookahead<f&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-f&&(t.match_length=y(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-3,i=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(w(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=s._tr_tally(t,0,t.window[t.strstart-1]))&&w(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(w(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(w(t,!1),0===t.strm.avail_out)?1:2}function M(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),p(this.dyn_ltree),p(this.dyn_dtree),p(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),p(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),p(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function E(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:c,t.adler=2===e.wrap?0:1,e.last_flush=0,s._tr_init(e),0):d(t,l)}function S(t){var e,r=E(t);return 0===r&&((e=t.state).window_size=2*e.w_size,p(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function D(t,e,r,i,s,a){if(!t)return l;var o=1;if(-1===e&&(e=6),i<0?(o=0,i=-i):15<i&&(o=2,i-=16),s<1||9<s||8!==r||i<8||15<i||e<0||9<e||a<0||4<a)return d(t,l);8===i&&(i=9);var h=new A;return(t.state=h).strm=t,h.wrap=o,h.gzhead=null,h.w_bits=i,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new n.Buf8(2*h.w_size),h.head=new n.Buf16(h.hash_size),h.prev=new n.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new n.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=a,h.method=r,S(t)}i=[new M(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(v(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,w(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-f&&(w(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(w(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(w(t,!1),t.strm.avail_out),1)})),new M(4,4,8,4,x),new M(4,5,16,8,x),new M(4,6,32,32,x),new M(4,4,16,16,k),new M(8,16,32,32,k),new M(8,16,128,128,k),new M(8,32,128,256,k),new M(32,128,258,1024,k),new M(32,258,258,4096,k)],r.deflateInit=function(t,e){return D(t,e,8,15,8,0)},r.deflateInit2=D,r.deflateReset=S,r.deflateResetKeep=E,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?l:(t.state.gzhead=e,0):l},r.deflate=function(t,e){var r,n,a,h;if(!t||!t.state||5<e||e<0)return t?d(t,l):l;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||666===n.status&&4!==e)return d(t,0===t.avail_out?-5:l);if(n.strm=t,r=n.last_flush,n.last_flush=e,42===n.status)if(2===n.wrap)t.adler=0,b(n,31),b(n,139),b(n,8),n.gzhead?(b(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),b(n,255&n.gzhead.time),b(n,n.gzhead.time>>8&255),b(n,n.gzhead.time>>16&255),b(n,n.gzhead.time>>24&255),b(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),b(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(b(n,255&n.gzhead.extra.length),b(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=o(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(b(n,0),b(n,0),b(n,0),b(n,0),b(n,0),b(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),b(n,3),n.status=c);else{var f=8+(n.w_bits-8<<4)<<8;f|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(f|=32),f+=31-f%31,n.status=c,_(n,f),0!==n.strstart&&(_(n,t.adler>>>16),_(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(a=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),g(t),a=n.pending,n.pending!==n.pending_buf_size));)b(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),g(t),a=n.pending,n.pending===n.pending_buf_size)){h=1;break}h=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,b(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),0===h&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),g(t),a=n.pending,n.pending===n.pending_buf_size)){h=1;break}h=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,b(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),0===h&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&g(t),n.pending+2<=n.pending_buf_size&&(b(n,255&t.adler),b(n,t.adler>>8&255),t.adler=0,n.status=c)):n.status=c),0!==n.pending){if(g(t),0===t.avail_out)return n.last_flush=-1,0}else if(0===t.avail_in&&m(e)<=m(r)&&4!==e)return d(t,-5);if(666===n.status&&0!==t.avail_in)return d(t,-5);if(0!==t.avail_in||0!==n.lookahead||0!==e&&666!==n.status){var y=2===n.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(v(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(w(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(w(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(w(t,!1),0===t.strm.avail_out)?1:2}(n,e):3===n.strategy?function(t,e){for(var r,i,n,a,o=t.window;;){if(t.lookahead<=u){if(v(t),t.lookahead<=u&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(i=o[n=t.strstart-1])===o[++n]&&i===o[++n]&&i===o[++n]){a=t.strstart+u;do{}while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<a);t.match_length=u-(a-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=s._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(w(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(w(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(w(t,!1),0===t.strm.avail_out)?1:2}(n,e):i[n.level].func(n,e);if(3!==y&&4!==y||(n.status=666),1===y||3===y)return 0===t.avail_out&&(n.last_flush=-1),0;if(2===y&&(1===e?s._tr_align(n):5!==e&&(s._tr_stored_block(n,0,0,!1),3===e&&(p(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),g(t),0===t.avail_out))return n.last_flush=-1,0}return 4!==e?0:n.wrap<=0?1:(2===n.wrap?(b(n,255&t.adler),b(n,t.adler>>8&255),b(n,t.adler>>16&255),b(n,t.adler>>24&255),b(n,255&t.total_in),b(n,t.total_in>>8&255),b(n,t.total_in>>16&255),b(n,t.total_in>>24&255)):(_(n,t.adler>>>16),_(n,65535&t.adler)),g(t),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?0:1)},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==c&&666!==e?d(t,l):(t.state=null,e===c?d(t,-3):0):l},r.deflateSetDictionary=function(t,e){var r,i,s,o,h,u,f,c,d=e.length;if(!t||!t.state)return l;if(2===(o=(r=t.state).wrap)||1===o&&42!==r.status||r.lookahead)return l;for(1===o&&(t.adler=a(t.adler,e,d,0)),r.wrap=0,d>=r.w_size&&(0===o&&(p(r.head),r.strstart=0,r.block_start=0,r.insert=0),c=new n.Buf8(r.w_size),n.arraySet(c,e,d-r.w_size,r.w_size,0),e=c,d=r.w_size),h=t.avail_in,u=t.next_in,f=t.input,t.avail_in=d,t.next_in=0,t.input=e,v(r);r.lookahead>=3;){for(i=r.strstart,s=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,--s;);r.strstart=i,r.lookahead=2,v(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=u,t.input=f,t.avail_in=h,r.wrap=o,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){"use strict";e.exports=function(t,e){var r,i,n,s,a,o,h,l,u,f,c,d,m,p,g,w,b,_,y,v,x,k,M,A,E;r=t.state,i=t.next_in,A=t.input,n=i+(t.avail_in-5),s=t.next_out,E=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),h=r.dmax,l=r.wsize,u=r.whave,f=r.wnext,c=r.window,d=r.hold,m=r.bits,p=r.lencode,g=r.distcode,w=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{m<15&&(d+=A[i++]<<m,m+=8,d+=A[i++]<<m,m+=8),_=p[d&w];e:for(;;){if(d>>>=y=_>>>24,m-=y,0==(y=_>>>16&255))E[s++]=65535&_;else{if(!(16&y)){if(0==(64&y)){_=p[(65535&_)+(d&(1<<y)-1)];continue e}if(32&y){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}v=65535&_,(y&=15)&&(m<y&&(d+=A[i++]<<m,m+=8),v+=d&(1<<y)-1,d>>>=y,m-=y),m<15&&(d+=A[i++]<<m,m+=8,d+=A[i++]<<m,m+=8),_=g[d&b];r:for(;;){if(d>>>=y=_>>>24,m-=y,!(16&(y=_>>>16&255))){if(0==(64&y)){_=g[(65535&_)+(d&(1<<y)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(x=65535&_,m<(y&=15)&&(d+=A[i++]<<m,(m+=8)<y&&(d+=A[i++]<<m,m+=8)),h<(x+=d&(1<<y)-1)){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=y,m-=y,(y=s-a)<x){if(u<(y=x-y)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(M=c,(k=0)===f){if(k+=l-y,y<v){for(v-=y;E[s++]=c[k++],--y;);k=s-x,M=E}}else if(f<y){if(k+=l+f-y,(y-=f)<v){for(v-=y;E[s++]=c[k++],--y;);if(k=0,f<v){for(v-=y=f;E[s++]=c[k++],--y;);k=s-x,M=E}}}else if(k+=f-y,y<v){for(v-=y;E[s++]=c[k++],--y;);k=s-x,M=E}for(;2<v;)E[s++]=M[k++],E[s++]=M[k++],E[s++]=M[k++],v-=3;v&&(E[s++]=M[k++],1<v&&(E[s++]=M[k++]))}else{for(k=s-x;E[s++]=E[k++],E[s++]=E[k++],E[s++]=E[k++],2<(v-=3););v&&(E[s++]=E[k++],1<v&&(E[s++]=E[k++]))}break}}break}}while(i<n&&s<o);i-=v=m>>3,d&=(1<<(m-=v<<3))-1,t.next_in=i,t.next_out=s,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=s<o?o-s+257:257-(s-o),r.hold=d,r.bits=m}},{}],49:[function(t,e,r){"use strict";var i=t("../utils/common"),n=t("./adler32"),s=t("./crc32"),a=t("./inffast"),o=t("./inftrees"),h=-2;function l(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(852),e.distcode=e.distdyn=new i.Buf32(592),e.sane=1,e.back=-1,0):h}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,f(t)):h}function d(t,e){var r,i;return t&&t.state?(i=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?h:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,c(t))):h}function m(t,e){var r,i;return t?(i=new u,(t.state=i).window=null,0!==(r=d(t,e))&&(t.state=null),r):h}var p,g,w=!0;function b(t){if(w){var e;for(p=new i.Buf32(512),g=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(1,t.lens,0,288,p,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(2,t.lens,0,32,g,0,t.work,{bits:5}),w=!1}t.lencode=p,t.lenbits=9,t.distcode=g,t.distbits=5}function _(t,e,r,n){var s,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),n>=a.wsize?(i.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(n<(s=a.wsize-a.wnext)&&(s=n),i.arraySet(a.window,e,r-n,s,a.wnext),(n-=s)?(i.arraySet(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0}r.inflateReset=c,r.inflateReset2=d,r.inflateResetKeep=f,r.inflateInit=function(t){return m(t,15)},r.inflateInit2=m,r.inflate=function(t,e){var r,u,f,c,d,m,p,g,w,y,v,x,k,M,A,E,S,D,I,C,R,B,P,z,T=0,U=new i.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return h;12===(r=t.state).mode&&(r.mode=13),d=t.next_out,f=t.output,p=t.avail_out,c=t.next_in,u=t.input,m=t.avail_in,g=r.hold,w=r.bits,y=m,v=p,B=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;w<16;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}if(2&r.wrap&&35615===g){U[r.check=0]=255&g,U[1]=g>>>8&255,r.check=s(r.check,U,2,0),w=g=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&g)){t.msg="unknown compression method",r.mode=30;break}if(w-=4,R=8+(15&(g>>>=4)),0===r.wbits)r.wbits=R;else if(R>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<R,t.adler=r.check=1,r.mode=512&g?10:12,w=g=0;break;case 2:for(;w<16;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}if(r.flags=g,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=g>>8&1),512&r.flags&&(U[0]=255&g,U[1]=g>>>8&255,r.check=s(r.check,U,2,0)),w=g=0,r.mode=3;case 3:for(;w<32;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}r.head&&(r.head.time=g),512&r.flags&&(U[0]=255&g,U[1]=g>>>8&255,U[2]=g>>>16&255,U[3]=g>>>24&255,r.check=s(r.check,U,4,0)),w=g=0,r.mode=4;case 4:for(;w<16;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}r.head&&(r.head.xflags=255&g,r.head.os=g>>8),512&r.flags&&(U[0]=255&g,U[1]=g>>>8&255,r.check=s(r.check,U,2,0)),w=g=0,r.mode=5;case 5:if(1024&r.flags){for(;w<16;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}r.length=g,r.head&&(r.head.extra_len=g),512&r.flags&&(U[0]=255&g,U[1]=g>>>8&255,r.check=s(r.check,U,2,0)),w=g=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(m<(x=r.length)&&(x=m),x&&(r.head&&(R=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),i.arraySet(r.head.extra,u,c,x,R)),512&r.flags&&(r.check=s(r.check,u,x,c)),m-=x,c+=x,r.length-=x),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===m)break t;for(x=0;R=u[c+x++],r.head&&R&&r.length<65536&&(r.head.name+=String.fromCharCode(R)),R&&x<m;);if(512&r.flags&&(r.check=s(r.check,u,x,c)),m-=x,c+=x,R)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===m)break t;for(x=0;R=u[c+x++],r.head&&R&&r.length<65536&&(r.head.comment+=String.fromCharCode(R)),R&&x<m;);if(512&r.flags&&(r.check=s(r.check,u,x,c)),m-=x,c+=x,R)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;w<16;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}if(g!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}w=g=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;w<32;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}t.adler=r.check=l(g),w=g=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=d,t.avail_out=p,t.next_in=c,t.avail_in=m,r.hold=g,r.bits=w,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){g>>>=7&w,w-=7&w,r.mode=27;break}for(;w<3;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}switch(r.last=1&g,w-=1,3&(g>>>=1)){case 0:r.mode=14;break;case 1:if(b(r),r.mode=20,6!==e)break;g>>>=2,w-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}g>>>=2,w-=2;break;case 14:for(g>>>=7&w,w-=7&w;w<32;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&g,w=g=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(x=r.length){if(m<x&&(x=m),p<x&&(x=p),0===x)break t;i.arraySet(f,u,c,x,d),m-=x,c+=x,p-=x,d+=x,r.length-=x;break}r.mode=12;break;case 17:for(;w<14;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}if(r.nlen=257+(31&g),g>>>=5,w-=5,r.ndist=1+(31&g),g>>>=5,w-=5,r.ncode=4+(15&g),g>>>=4,w-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;w<3;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}r.lens[F[r.have++]]=7&g,g>>>=3,w-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,P={bits:r.lenbits},B=o(0,r.lens,0,19,r.lencode,0,r.work,P),r.lenbits=P.bits,B){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;E=(T=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,S=65535&T,!((A=T>>>24)<=w);){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}if(S<16)g>>>=A,w-=A,r.lens[r.have++]=S;else{if(16===S){for(z=A+2;w<z;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}if(g>>>=A,w-=A,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}R=r.lens[r.have-1],x=3+(3&g),g>>>=2,w-=2}else if(17===S){for(z=A+3;w<z;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}w-=A,R=0,x=3+(7&(g>>>=A)),g>>>=3,w-=3}else{for(z=A+7;w<z;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}w-=A,R=0,x=11+(127&(g>>>=A)),g>>>=7,w-=7}if(r.have+x>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;x--;)r.lens[r.have++]=R}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,P={bits:r.lenbits},B=o(1,r.lens,0,r.nlen,r.lencode,0,r.work,P),r.lenbits=P.bits,B){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,P={bits:r.distbits},B=o(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,P),r.distbits=P.bits,B){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=m&&258<=p){t.next_out=d,t.avail_out=p,t.next_in=c,t.avail_in=m,r.hold=g,r.bits=w,a(t,v),d=t.next_out,f=t.output,p=t.avail_out,c=t.next_in,u=t.input,m=t.avail_in,g=r.hold,w=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;E=(T=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,S=65535&T,!((A=T>>>24)<=w);){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}if(E&&0==(240&E)){for(D=A,I=E,C=S;E=(T=r.lencode[C+((g&(1<<D+I)-1)>>D)])>>>16&255,S=65535&T,!(D+(A=T>>>24)<=w);){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}g>>>=D,w-=D,r.back+=D}if(g>>>=A,w-=A,r.back+=A,r.length=S,0===E){r.mode=26;break}if(32&E){r.back=-1,r.mode=12;break}if(64&E){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&E,r.mode=22;case 22:if(r.extra){for(z=r.extra;w<z;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,w-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;E=(T=r.distcode[g&(1<<r.distbits)-1])>>>16&255,S=65535&T,!((A=T>>>24)<=w);){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}if(0==(240&E)){for(D=A,I=E,C=S;E=(T=r.distcode[C+((g&(1<<D+I)-1)>>D)])>>>16&255,S=65535&T,!(D+(A=T>>>24)<=w);){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}g>>>=D,w-=D,r.back+=D}if(g>>>=A,w-=A,r.back+=A,64&E){t.msg="invalid distance code",r.mode=30;break}r.offset=S,r.extra=15&E,r.mode=24;case 24:if(r.extra){for(z=r.extra;w<z;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,w-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===p)break t;if(x=v-p,r.offset>x){if((x=r.offset-x)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}k=x>r.wnext?(x-=r.wnext,r.wsize-x):r.wnext-x,x>r.length&&(x=r.length),M=r.window}else M=f,k=d-r.offset,x=r.length;for(p<x&&(x=p),p-=x,r.length-=x;f[d++]=M[k++],--x;);0===r.length&&(r.mode=21);break;case 26:if(0===p)break t;f[d++]=r.length,p--,r.mode=21;break;case 27:if(r.wrap){for(;w<32;){if(0===m)break t;m--,g|=u[c++]<<w,w+=8}if(v-=p,t.total_out+=v,r.total+=v,v&&(t.adler=r.check=r.flags?s(r.check,f,v,d-v):n(r.check,f,v,d-v)),v=p,(r.flags?g:l(g))!==r.check){t.msg="incorrect data check",r.mode=30;break}w=g=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;w<32;){if(0===m)break t;m--,g+=u[c++]<<w,w+=8}if(g!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}w=g=0}r.mode=29;case 29:B=1;break t;case 30:B=-3;break t;case 31:return-4;case 32:default:return h}return t.next_out=d,t.avail_out=p,t.next_in=c,t.avail_in=m,r.hold=g,r.bits=w,(r.wsize||v!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&_(t,t.output,t.next_out,v-t.avail_out)?(r.mode=31,-4):(y-=t.avail_in,v-=t.avail_out,t.total_in+=y,t.total_out+=v,r.total+=v,r.wrap&&v&&(t.adler=r.check=r.flags?s(r.check,f,v,t.next_out-v):n(r.check,f,v,t.next_out-v)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==y&&0===v||4===e)&&0===B&&(B=-5),B)},r.inflateEnd=function(t){if(!t||!t.state)return h;var e=t.state;return e.window&&(e.window=null),t.state=null,0},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?h:((r.head=e).done=!1,0):h},r.inflateSetDictionary=function(t,e){var r,i=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?h:11===r.mode&&n(1,e,i,0)!==r.check?-3:_(t,e,i,i)?(r.mode=31,-4):(r.havedict=1,0):h},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){"use strict";var i=t("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,h,l,u,f,c){var d,m,p,g,w,b,_,y,v,x=c.bits,k=0,M=0,A=0,E=0,S=0,D=0,I=0,C=0,R=0,B=0,P=null,z=0,T=new i.Buf16(16),U=new i.Buf16(16),F=null,O=0;for(k=0;k<=15;k++)T[k]=0;for(M=0;M<h;M++)T[e[r+M]]++;for(S=x,E=15;1<=E&&0===T[E];E--);if(E<S&&(S=E),0===E)return l[u++]=20971520,l[u++]=20971520,c.bits=1,0;for(A=1;A<E&&0===T[A];A++);for(S<A&&(S=A),k=C=1;k<=15;k++)if(C<<=1,(C-=T[k])<0)return-1;if(0<C&&(0===t||1!==E))return-1;for(U[1]=0,k=1;k<15;k++)U[k+1]=U[k]+T[k];for(M=0;M<h;M++)0!==e[r+M]&&(f[U[e[r+M]]++]=M);if(b=0===t?(P=F=f,19):1===t?(P=n,z-=257,F=s,O-=257,256):(P=a,F=o,-1),k=A,w=u,I=M=B=0,p=-1,g=(R=1<<(D=S))-1,1===t&&852<R||2===t&&592<R)return 1;for(;;){for(_=k-I,v=f[M]<b?(y=0,f[M]):f[M]>b?(y=F[O+f[M]],P[z+f[M]]):(y=96,0),d=1<<k-I,A=m=1<<D;l[w+(B>>I)+(m-=d)]=_<<24|y<<16|v|0,0!==m;);for(d=1<<k-1;B&d;)d>>=1;if(0!==d?(B&=d-1,B+=d):B=0,M++,0==--T[k]){if(k===E)break;k=e[r+f[M]]}if(S<k&&(B&g)!==p){for(0===I&&(I=S),w+=A,C=1<<(D=k-I);D+I<E&&!((C-=T[D+I])<=0);)D++,C<<=1;if(R+=1<<D,1===t&&852<R||2===t&&592<R)return 1;l[p=B&g]=S<<24|D<<16|w-u|0}}return 0!==B&&(l[w+B]=k-I<<24|64<<16|0),c.bits=S,0}},{"../utils/common":41}],51:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,r){"use strict";var i=t("../utils/common");function n(t){for(var e=t.length;0<=--e;)t[e]=0}var s=15,a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);n(u);var f=new Array(60);n(f);var c=new Array(512);n(c);var d=new Array(256);n(d);var m=new Array(29);n(m);var p,g,w,b=new Array(30);function _(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function y(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function v(t){return t<256?c[t]:c[256+(t>>>7)]}function x(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function k(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,x(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function M(t,e,r){k(t,r[2*e],r[2*e+1])}function A(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function E(t,e,r){var i,n,a=new Array(16),o=0;for(i=1;i<=s;i++)a[i]=o=o+r[i-1]<<1;for(n=0;n<=e;n++){var h=t[2*n+1];0!==h&&(t[2*n]=A(a[h]++,h))}}function S(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function D(t){8<t.bi_valid?x(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function I(t,e,r,i){var n=2*e,s=2*r;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]}function C(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&I(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!I(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function R(t,e,r){var i,n,s,h,l=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],n=t.pending_buf[t.l_buf+l],l++,0===i?M(t,n,e):(M(t,(s=d[n])+256+1,e),0!==(h=a[s])&&k(t,n-=m[s],h),M(t,s=v(--i),r),0!==(h=o[s])&&k(t,i-=b[s],h)),l<t.last_lit;);M(t,256,e)}function B(t,e){var r,i,n,a=e.dyn_tree,o=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<l;r++)0!==a[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)a[2*(n=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[n]=0,t.opt_len--,h&&(t.static_len-=o[2*n+1]);for(e.max_code=u,r=t.heap_len>>1;1<=r;r--)C(t,a,r);for(n=l;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,a,1),i=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=i,a[2*n]=a[2*r]+a[2*i],t.depth[n]=(t.depth[r]>=t.depth[i]?t.depth[r]:t.depth[i])+1,a[2*r+1]=a[2*i+1]=n,t.heap[1]=n++,C(t,a,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,i,n,a,o,h,l=e.dyn_tree,u=e.max_code,f=e.stat_desc.static_tree,c=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,m=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(a=0;a<=s;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)p<(a=l[2*l[2*(i=t.heap[r])+1]+1]+1)&&(a=p,g++),l[2*i+1]=a,u<i||(t.bl_count[a]++,o=0,m<=i&&(o=d[i-m]),h=l[2*i],t.opt_len+=h*(a+o),c&&(t.static_len+=h*(f[2*i+1]+o)));if(0!==g){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,g-=2}while(0<g);for(a=p;0!==a;a--)for(i=t.bl_count[a];0!==i;)u<(n=t.heap[--r])||(l[2*n+1]!==a&&(t.opt_len+=(a-l[2*n+1])*l[2*n],l[2*n+1]=a),i--)}}(t,e),E(a,u,t.bl_count)}function P(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=e[2*(i+1)+1],++o<h&&n===a||(o<l?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=n,l=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4))}function z(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),i=0;i<=r;i++)if(n=a,a=e[2*(i+1)+1],!(++o<h&&n===a)){if(o<l)for(;M(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==s&&(M(t,n,t.bl_tree),o--),M(t,16,t.bl_tree),k(t,o-3,2)):o<=10?(M(t,17,t.bl_tree),k(t,o-3,3)):(M(t,18,t.bl_tree),k(t,o-11,7));s=n,l=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4)}}n(b);var T=!1;function U(t,e,r,n){var s,a,o;k(t,0+(n?1:0),3),a=e,o=r,D(s=t),x(s,o),x(s,~o),i.arraySet(s.pending_buf,s.window,a,o,s.pending),s.pending+=o}r._tr_init=function(t){T||(function(){var t,e,r,i,n,l=new Array(16);for(i=r=0;i<28;i++)for(m[i]=r,t=0;t<1<<a[i];t++)d[r++]=i;for(d[r-1]=i,i=n=0;i<16;i++)for(b[i]=n,t=0;t<1<<o[i];t++)c[n++]=i;for(n>>=7;i<30;i++)for(b[i]=n<<7,t=0;t<1<<o[i]-7;t++)c[256+n++]=i;for(e=0;e<=s;e++)l[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,l[8]++;for(;t<=255;)u[2*t+1]=9,t++,l[9]++;for(;t<=279;)u[2*t+1]=7,t++,l[7]++;for(;t<=287;)u[2*t+1]=8,t++,l[8]++;for(E(u,287,l),t=0;t<30;t++)f[2*t+1]=5,f[2*t]=A(t,5);p=new _(u,a,257,286,s),g=new _(f,o,0,30,s),w=new _(new Array(0),h,0,19,7)}(),T=!0),t.l_desc=new y(t.dyn_ltree,p),t.d_desc=new y(t.dyn_dtree,g),t.bl_desc=new y(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,S(t)},r._tr_stored_block=U,r._tr_flush_block=function(t,e,r,i){var n,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),B(t,t.l_desc),B(t,t.d_desc),a=function(t){var e;for(P(t,t.dyn_ltree,t.l_desc.max_code),P(t,t.dyn_dtree,t.d_desc.max_code),B(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==e?U(t,e,r,i):4===t.strategy||s===n?(k(t,2+(i?1:0),3),R(t,u,f)):(k(t,4+(i?1:0),3),function(t,e,r,i){var n;for(k(t,e-257,5),k(t,r-1,5),k(t,i-4,4),n=0;n<i;n++)k(t,t.bl_tree[2*l[n]+1],3);z(t,t.dyn_ltree,e-1),z(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),R(t,t.dyn_ltree,t.dyn_dtree)),S(t),i&&D(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(d[r]+256+1)]++,t.dyn_dtree[2*v(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){var e;k(t,2,3),M(t,256,u),16===(e=t).bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":41}],53:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){"use strict";e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)}))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}))}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)},5520:t=>{!function(){function e(t){for(var e=0,n=t.length-1,s=void 0,a=void 0,o=void 0,h=i(e,n);;){if(n<=e)return t[h];if(n==e+1)return t[e]>t[n]&&r(t,e,n),t[h];for(t[s=i(e,n)]>t[n]&&r(t,s,n),t[e]>t[n]&&r(t,e,n),t[s]>t[e]&&r(t,s,e),r(t,s,e+1),a=e+1,o=n;;){do{a++}while(t[e]>t[a]);do{o--}while(t[o]>t[e]);if(o<a)break;r(t,a,o)}r(t,e,o),o<=h&&(e=a),o>=h&&(n=o-1)}}var r=function(t,e,r){var i;return i=[t[r],t[e]],t[e]=i[0],t[r]=i[1],i},i=function(t,e){return~~((t+e)/2)};t.exports?t.exports=e:window.median=e}()},530:t=>{"use strict";function e(t){this.value=t,this.parent=null,this.rank=0}t.exports=class{constructor(){this.nodes=new Map}add(t){var r=this.nodes.get(t);return r||(r=new e(t),this.nodes.set(t,r)),r}union(t,e){const r=this.find(t),i=this.find(e);r!==i&&(r.rank<i.rank?r.parent=i:r.rank>i.rank?i.parent=r:(i.parent=r,r.rank++))}find(t){for(var e=t;null!==e.parent;)e=e.parent;for(var r=t;null!==r.parent;){var i=r;r=r.parent,i.parent=e}return e}connected(t,e){return this.find(t)===this.find(e)}}},4953:(t,e,r)=>{"use strict";function i(t,e){let r=0;for(let i=0;i<t.length;i++)r+=(t[i]-e[i])*(t[i]-e[i]);return r}function n(t,e){return Math.sqrt(i(t,e))}r.r(e),r.d(e,{squaredEuclidean:()=>i,euclidean:()=>n})},7345:(t,e,r)=>{"use strict";var i=r(5571),n={DEBUG:!1,ifft2DArray:function(t,e,r){var n=new Array(e*r),s=e/2,a=2*(r-1);i.init(s);for(var o={re:new Array(s),im:new Array(s)},h=0;h<r;h++){for(var l=s-1;l>=0;l--)o.re[l]=t[2*l*r+h],o.im[l]=t[(2*l+1)*r+h];for(i.bt(o.re,o.im),l=s-1;l>=0;l--)n[2*l*r+h]=o.re[l],n[(2*l+1)*r+h]=o.im[l]}var u=new Array(s*a);i.init(a);var f={re:new Array(a),im:new Array(a)},c=a*s;for(l=0;l<e;l+=2){for(f.re[0]=n[l*r],f.im[0]=n[(l+1)*r],h=1;h<r;h++)f.re[h]=n[l*r+h],f.im[h]=n[(l+1)*r+h],f.re[a-h]=n[l*r+h],f.im[a-h]=-n[(l+1)*r+h];i.bt(f.re,f.im);var d=l/2*a;for(h=a-1;h>=0;h--)u[d+h]=f.re[h]/c}return u},fft2DArray:function(t,e,r,n){Object.assign({},{inplace:!0});var s=r/2+1,a=2*e,o=new Array(a*s);i.init(r);for(var h,l,u,f,c,d={re:new Array(r),im:new Array(r)},m={re:new Array(r),im:new Array(r)},p={re:new Array(r),im:new Array(r)},g=0;g<e/2;g++){h=2*g*r,d.re=t.slice(h,h+r),h=(2*g+1)*r,d.im=t.slice(h,h+r),i.fft1d(d.re,d.im),this.reconstructTwoRealFFT(d,m,p),l=4*g*s,u=(4*g+1)*s,f=(4*g+2)*s,c=(4*g+3)*s;for(var w=s-1;w>=0;w--)o[l+w]=m.re[w],o[u+w]=m.im[w],o[f+w]=p.re[w],o[c+w]=p.im[w]}m=null,p=null;var b=new Array(a*s);i.init(e);for(var _={re:new Array(e),im:new Array(e)},y=s-1;y>=0;y--){for(g=e-1;g>=0;g--)_.re[g]=o[2*g*s+y],_.im[g]=o[(2*g+1)*s+y],isNaN(_.re[g])&&(_.re[g]=0),isNaN(_.im[g])&&(_.im[g]=0);for(i.fft1d(_.re,_.im),g=e-1;g>=0;g--)b[2*g*s+y]=_.re[g],b[(2*g+1)*s+y]=_.im[g]}return b},reconstructTwoRealFFT:function(t,e,r){var i,n,s,a,o,h=t.re.length;e.re[0]=t.re[0],e.im[0]=0,r.re[0]=t.im[0],r.im[0]=0;for(var l=h/2;l>0;l--)o=h-l,i=.5*(t.re[l]-t.re[o]),n=.5*(t.re[l]+t.re[o]),s=.5*(t.im[l]-t.im[o]),a=.5*(t.im[l]+t.im[o]),e.re[l]=n,e.im[l]=s,e.re[o]=n,e.im[o]=-s,r.re[l]=a,r.im[l]=-i,r.re[o]=a,r.im[o]=i},convolute2DI:function(t,e,r,i){for(var n,s,a=0;a<r/2;a++)for(var o=0;o<i;o++)n=t[2*a*i+o]*e[2*a*i+o]-t[(2*a+1)*i+o]*e[(2*a+1)*i+o],s=t[2*a*i+o]*e[(2*a+1)*i+o]+t[(2*a+1)*i+o]*e[2*a*i+o],t[2*a*i+o]=n,t[(2*a+1)*i+o]=s},convolute:function(t,e,r,i,n){for(var s=new Array(i*r),a=0;a<r*i;a++)s[a]=t[a];s=this.fft2DArray(s,r,i);var o,h=e.length,l=e[0].length,u=new Array(i*r);for(a=0;a<i*r;a++)u[a]=0;for(var f=Math.floor((h-1)/2),c=Math.floor((l-1)/2),d=0;d<h;d++){o=(d-f+r)%r;for(var m=0;m<l;m++)u[o*i+(m-c+i)%i]=e[d][m]}u=this.fft2DArray(u,r,i);var p=2*r,g=i/2+1;return this.convolute2DI(s,u,p,g),this.ifft2DArray(s,p,g)},toRadix2:function(t,e,r){var i,n,s,a,o=r,h=e;if(0===r||0!=(r&r-1)){for(o=0;r>>++o!=0;);o=1<<o}if(0===e||0!=(e&e-1)){for(h=0;e>>++h!=0;);h=1<<h}if(h==e&&o==r)return{data:t,rows:e,cols:r};var l=new Array(h*o),u=Math.floor((h-e)/2)-e,f=Math.floor((o-r)/2)-r;for(i=0;i<h;i++)for(s=i*o,a=(i-u)%e*r,n=0;n<o;n++)l[s+n]=t[a+(n-f)%r];return{data:l,rows:h,cols:o}},crop:function(t,e,r,i,n,s){if(e==i&&r==n)return t;Object.assign({},s);var a,o,h,l,u=new Array(n*i),f=Math.floor((e-i)/2),c=Math.floor((r-n)/2);for(h=0;h<i;h++)for(a=h*n,o=(h+f)*r,l=0;l<n;l++)u[a+l]=t[o+(l+c)];return u}};t.exports=n},5571:function(t,e){(function(){var t;(t=e).toString=function(){return"version 0.3.0, released 2013-03"};for(var r=0,i=null,n=null,s={init:function(t){if(0===t||0!=(t&t-1))throw new Error("init: radix-2 required");r=t,s._initArray(),s._makeBitReversalTable(),s._makeCosSinTable()},fft1d:function(t,e){s.fft(t,e,1)},ifft1d:function(t,e){var i=1/r;s.fft(t,e,-1);for(var n=0;n<r;n++)t[n]*=i,e[n]*=i},bt1d:function(t,e){s.fft(t,e,-1)},fft2d:function(t,e){for(var i=[],n=[],a=0,o=0;o<r;o++){a=o*r;for(var h=0;h<r;h++)i[h]=t[h+a],n[h]=e[h+a];s.fft1d(i,n);for(var l=0;l<r;l++)t[l+a]=i[l],e[l+a]=n[l]}for(var u=0;u<r;u++){for(var f=0;f<r;f++)a=u+f*r,i[f]=t[a],n[f]=e[a];s.fft1d(i,n);for(var c=0;c<r;c++)t[a=u+c*r]=i[c],e[a]=n[c]}},ifft2d:function(t,e){for(var i=[],n=[],a=0,o=0;o<r;o++){a=o*r;for(var h=0;h<r;h++)i[h]=t[h+a],n[h]=e[h+a];s.ifft1d(i,n);for(var l=0;l<r;l++)t[l+a]=i[l],e[l+a]=n[l]}for(var u=0;u<r;u++){for(var f=0;f<r;f++)a=u+f*r,i[f]=t[a],n[f]=e[a];s.ifft1d(i,n);for(var c=0;c<r;c++)t[a=u+c*r]=i[c],e[a]=n[c]}},fft:function(t,e,s){for(var a,o,h,l,u,f,c,d,m,p=r>>2,g=0;g<r;g++)g<(l=i[g])&&(u=t[g],t[g]=t[l],t[l]=u,u=e[g],e[g]=e[l],e[l]=u);for(var w=1;w<r;w<<=1){o=0,a=r/(w<<1);for(var b=0;b<w;b++){f=n[o+p],c=s*n[o];for(var _=b;_<r;_+=w<<1)d=f*t[h=_+w]+c*e[h],m=f*e[h]-c*t[h],t[h]=t[_]-d,t[_]+=d,e[h]=e[_]-m,e[_]+=m;o+=a}}},_initArray:function(){i="undefined"!=typeof Uint32Array?new Uint32Array(r):[],n="undefined"!=typeof Float64Array?new Float64Array(1.25*r):[]},_paddingZero:function(){},_makeBitReversalTable:function(){var t=0,e=0,n=0;for(i[0]=0;++t<r;){for(n=r>>1;n<=e;)e-=n,n>>=1;e+=n,i[t]=e}},_makeCosSinTable:function(){var t=r>>1,e=r>>2,i=r>>3,s=t+e,a=Math.sin(Math.PI/r),o=2*a*a,h=Math.sqrt(o*(2-o)),l=n[e]=1,u=n[0]=0;a=2*o;for(var f=1;f<i;f++)o+=a*(l-=o),h-=a*(u+=h),n[f]=u,n[e-f]=l;0!==i&&(n[i]=Math.sqrt(.5));for(var c=0;c<e;c++)n[t-c]=n[c];for(var d=0;d<s;d++)n[d+t]=-n[d]}},a=["init","fft1d","ifft1d","fft2d","ifft2d"],o=0;o<a.length;o++)t[a[o]]=s[a[o]];return t.bt=s.bt1d,t.fft=s.fft1d,t.ifft=s.ifft1d,t}).call(this)},3910:(t,e,r)=>{"use strict";e.FFTUtils=r(7345),r(5571)},8881:(t,e,r)=>{"use strict";const{squaredEuclidean:i}=r(4953),n={sigma:1};t.exports=class{constructor(t){t=Object.assign({},n,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,e){const r=i(t,e);return Math.exp(-r/this.divisor)}}},4229:t=>{"use strict";const e={degree:1,constant:1,scale:1};t.exports=class{constructor(t){t=Object.assign({},e,t),this.degree=t.degree,this.constant=t.constant,this.scale=t.scale}compute(t,e){for(var r=0,i=0;i<t.length;i++)r+=t[i]*e[i];return Math.pow(this.scale*r+this.constant,this.degree)}}},7613:t=>{"use strict";const e={alpha:.01,constant:-Math.E};t.exports=class{constructor(t){t=Object.assign({},e,t),this.alpha=t.alpha,this.constant=t.constant}compute(t,e){for(var r=0,i=0;i<t.length;i++)r+=t[i]*e[i];return Math.tanh(this.alpha*r+this.constant)}}},6952:(t,e,r)=>{"use strict";const{Matrix:i,MatrixTransposeView:n}=r(2864),s=r(8881),a=r(4229),o=r(7613),h=r(8541),l=r(9176),u=r(3316),f=r(1960),c={gaussian:s,rbf:s,polynomial:a,poly:a,anova:h,cauchy:l,exponential:u,histogram:f,min:f,laplacian:r(8557),multiquadratic:r(8609),rational:r(3029),sigmoid:o,mlp:o};t.exports=class{constructor(t,e){if(this.kernelType=t,"linear"!==t)if("string"==typeof t){t=t.toLowerCase();var r=c[t];if(!r)throw new Error(`unsupported kernel type: ${t}`);this.kernelFunction=new r(e)}else{if("object"!=typeof t||"function"!=typeof t.compute)throw new TypeError("first argument must be a valid kernel type or instance");this.kernelFunction=t}}compute(t,e){if(t=i.checkMatrix(t),e=void 0===e?t:i.checkMatrix(e),"linear"===this.kernelType)return t.mmul(new n(e));const r=new i(t.rows,e.rows);if(t===e)for(let e=0;e<t.rows;e++)for(let i=e;i<t.rows;i++){const n=this.kernelFunction.compute(t.getRow(e),t.getRow(i));r.set(e,i,n),r.set(i,e,n)}else for(let i=0;i<t.rows;i++)for(let n=0;n<e.rows;n++)r.set(i,n,this.kernelFunction.compute(t.getRow(i),e.getRow(n)));return r}}},8541:t=>{"use strict";const e={sigma:1,degree:1};t.exports=class{constructor(t){t=Object.assign({},e,t),this.sigma=t.sigma,this.degree=t.degree}compute(t,e){for(var r=0,i=Math.min(t.length,e.length),n=1;n<=i;++n)r+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(t[n-1],n)-Math.pow(e[n-1],n),2)),this.degree);return r}}},9176:(t,e,r)=>{"use strict";const{squaredEuclidean:i}=r(4953),n={sigma:1};t.exports=class{constructor(t){t=Object.assign({},n,t),this.sigma=t.sigma}compute(t,e){return 1/(1+i(t,e)/(this.sigma*this.sigma))}}},3316:(t,e,r)=>{"use strict";const{euclidean:i}=r(4953),n={sigma:1};t.exports=class{constructor(t){t=Object.assign({},n,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,e){const r=i(t,e);return Math.exp(-r/this.divisor)}}},1960:t=>{"use strict";t.exports=class{compute(t,e){for(var r=Math.min(t.length,e.length),i=0,n=0;n<r;++n)i+=Math.min(t[n],e[n]);return i}}},8557:(t,e,r)=>{"use strict";const{euclidean:i}=r(4953),n={sigma:1};t.exports=class{constructor(t){t=Object.assign({},n,t),this.sigma=t.sigma}compute(t,e){const r=i(t,e);return Math.exp(-r/this.sigma)}}},8609:(t,e,r)=>{"use strict";const{squaredEuclidean:i}=r(4953),n={constant:1};t.exports=class{constructor(t){t=Object.assign({},n,t),this.constant=t.constant}compute(t,e){return Math.sqrt(i(t,e)+this.constant*this.constant)}}},3029:(t,e,r)=>{"use strict";const{squaredEuclidean:i}=r(4953),n={constant:1};t.exports=class{constructor(t){t=Object.assign({},n,t),this.constant=t.constant}compute(t,e){const r=i(t,e);return 1-r/(r+this.constant)}}},414:(t,e,r)=>{var i=r(3910).FFTUtils;function n(t){var e,r,i=t;if("number"!=typeof t[0]){e=t.length,r=t[0].length,i=new Array(e*r);for(var n=0;n<e;n++)for(var s=0;s<r;s++)i[n*r+s]=t[n][s]}else{var a=Math.sqrt(t.length);Number.isInteger(a)&&(e=a,r=a)}return{data:i,rows:e,cols:r}}t.exports={fft:function(t,e,r){var s,a,o=n(t),h=o.data,l=Object.assign({normalize:!1,divisor:1,rows:o.rows,cols:o.cols},r);if(!l.rows||!l.cols)throw new Error("Invalid number of rows or columns "+s+" "+a);s=l.rows,a=l.cols;var u,f,c=l.divisor,d=e.length,m=e[0].length;if(l.normalize)for(c=0,u=0;u<d;u++)for(f=0;f<m;f++)c+=e[u][f];if(0===c)throw new RangeError("convolution: The divisor is equal to zero");var p=i.toRadix2(h,s,a),g=i.convolute(p.data,e,p.rows,p.cols);if(g=i.crop(g,p.rows,p.cols,s,a),0!=c&&1!=c)for(u=0;u<g.length;u++)g[u]/=c;return g},direct:function(t,e,r){var i,s,a=n(t),o=a.data,h=Object.assign({normalize:!1,divisor:1,rows:a.rows,cols:a.cols},r);if(!h.rows||!h.cols)throw new Error("Invalid number of rows or columns "+i+" "+s);i=h.rows,s=h.cols;var l,u,f,c,d,m,p=h.divisor,g=e.length,w=e[0].length;if(h.normalize)for(p=0,l=0;l<g;l++)for(u=0;u<w;u++)p+=e[l][u];if(0===p)throw new RangeError("convolution: The divisor is equal to zero");var b=new Array(i*s),_=Math.floor(g/2),y=Math.floor(w/2);for(c=0;c<i;c++)for(f=0;f<s;f++){for(d=0,u=0;u<g;u++)for(l=0;l<w;l++)m=e[g-u-1][w-l-1],d+=o[(c+u-_+i)%i*s+(f+l-y+s)%s]*m;b[c*s+f]=d/p}return b},kernelFactory:{LoG:function(t,e,r){var i=1e3;r&&r.factor&&(i=r.factor);var n,s,a,o,h=new Array(e);i*=-1;var l=(e-1)/2,u=2*t*t;for(n=0;n<e;n++)for(h[n]=new Array(e),o=(n-l)*(n-l),s=0;s<e;s++)a=-((s-l)*(s-l)+o)/u,h[n][s]=Math.round(i*(1+a)*Math.exp(a));return h}},matrix2Array:n}},2313:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var i=r(1883),n=r(1548);class s{constructor(t){let e,r,i,s,a,o,h,l,u,f=(t=n.Z.checkMatrix(t)).clone(),c=f.rows,d=f.columns,m=new Float64Array(c),p=1;for(e=0;e<c;e++)m[e]=e;for(l=new Float64Array(c),r=0;r<d;r++){for(e=0;e<c;e++)l[e]=f.get(e,r);for(e=0;e<c;e++){for(u=Math.min(e,r),a=0,i=0;i<u;i++)a+=f.get(e,i)*l[i];l[e]-=a,f.set(e,r,l[e])}for(s=r,e=r+1;e<c;e++)Math.abs(l[e])>Math.abs(l[s])&&(s=e);if(s!==r){for(i=0;i<d;i++)o=f.get(s,i),f.set(s,i,f.get(r,i)),f.set(r,i,o);h=m[s],m[s]=m[r],m[r]=h,p=-p}if(r<c&&0!==f.get(r,r))for(e=r+1;e<c;e++)f.set(e,r,f.get(e,r)/f.get(r,r))}this.LU=f,this.pivotVector=m,this.pivotSign=p}isSingular(){let t=this.LU,e=t.columns;for(let r=0;r<e;r++)if(0===t.get(r,r))return!0;return!1}solve(t){t=i.Z.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r,n,s,a=t.columns,o=t.subMatrixRow(this.pivotVector,0,a-1),h=e.columns;for(s=0;s<h;s++)for(r=s+1;r<h;r++)for(n=0;n<a;n++)o.set(r,n,o.get(r,n)-o.get(s,n)*e.get(r,s));for(s=h-1;s>=0;s--){for(n=0;n<a;n++)o.set(s,n,o.get(s,n)/e.get(s,s));for(r=0;r<s;r++)for(n=0;n<a;n++)o.set(r,n,o.get(r,n)-o.get(s,n)*e.get(r,s))}return o}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,r=t.columns;for(let i=0;i<r;i++)e*=t.get(i,i);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,r=t.columns,n=new i.Z(e,r);for(let i=0;i<e;i++)for(let e=0;e<r;e++)i>e?n.set(i,e,t.get(i,e)):i===e?n.set(i,e,1):n.set(i,e,0);return n}get upperTriangularMatrix(){let t=this.LU,e=t.rows,r=t.columns,n=new i.Z(e,r);for(let i=0;i<e;i++)for(let e=0;e<r;e++)i<=e?n.set(i,e,t.get(i,e)):n.set(i,e,0);return n}get pivotPermutationVector(){return Array.from(this.pivotVector)}}},7072:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});var i=r(1883),n=r(1548),s=r(6310);class a{constructor(t){let e,r,i,a,o=(t=n.Z.checkMatrix(t)).clone(),h=t.rows,l=t.columns,u=new Float64Array(l);for(i=0;i<l;i++){let t=0;for(e=i;e<h;e++)t=(0,s.G)(t,o.get(e,i));if(0!==t){for(o.get(i,i)<0&&(t=-t),e=i;e<h;e++)o.set(e,i,o.get(e,i)/t);for(o.set(i,i,o.get(i,i)+1),r=i+1;r<l;r++){for(a=0,e=i;e<h;e++)a+=o.get(e,i)*o.get(e,r);for(a=-a/o.get(i,i),e=i;e<h;e++)o.set(e,r,o.get(e,r)+a*o.get(e,i))}}u[i]=-t}this.QR=o,this.Rdiag=u}solve(t){t=i.Z.checkMatrix(t);let e=this.QR,r=e.rows;if(t.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let n,s,a,o,h=t.columns,l=t.clone(),u=e.columns;for(a=0;a<u;a++)for(s=0;s<h;s++){for(o=0,n=a;n<r;n++)o+=e.get(n,a)*l.get(n,s);for(o=-o/e.get(a,a),n=a;n<r;n++)l.set(n,s,l.get(n,s)+o*e.get(n,a))}for(a=u-1;a>=0;a--){for(s=0;s<h;s++)l.set(a,s,l.get(a,s)/this.Rdiag[a]);for(n=0;n<a;n++)for(s=0;s<h;s++)l.set(n,s,l.get(n,s)-l.get(a,s)*e.get(n,a))}return l.subMatrix(0,u-1,0,h-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,r=this.QR,n=r.columns,s=new i.Z(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)t<e?s.set(t,e,r.get(t,e)):t===e?s.set(t,e,this.Rdiag[t]):s.set(t,e,0);return s}get orthogonalMatrix(){let t,e,r,n,s=this.QR,a=s.rows,o=s.columns,h=new i.Z(a,o);for(r=o-1;r>=0;r--){for(t=0;t<a;t++)h.set(t,r,0);for(h.set(r,r,1),e=r;e<o;e++)if(0!==s.get(r,r)){for(n=0,t=r;t<a;t++)n+=s.get(t,r)*h.get(t,e);for(n=-n/s.get(r,r),t=r;t<a;t++)h.set(t,e,h.get(t,e)+n*s.get(t,r))}}return h}}},6943:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});var i=r(1883),n=r(1548),s=r(6310);class a{constructor(t,e={}){if((t=n.Z.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let r=t.rows,a=t.columns;const{computeLeftSingularVectors:o=!0,computeRightSingularVectors:h=!0,autoTranspose:l=!1}=e;let u,f=Boolean(o),c=Boolean(h),d=!1;if(r<a)if(l){u=t.transpose(),r=u.rows,a=u.columns,d=!0;let e=f;f=c,c=e}else u=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else u=t.clone();let m=Math.min(r,a),p=Math.min(r+1,a),g=new Float64Array(p),w=new i.Z(r,m),b=new i.Z(a,a),_=new Float64Array(a),y=new Float64Array(r),v=new Float64Array(p);for(let t=0;t<p;t++)v[t]=t;let x=Math.min(r-1,a),k=Math.max(0,Math.min(a-2,r)),M=Math.max(x,k);for(let t=0;t<M;t++){if(t<x){g[t]=0;for(let e=t;e<r;e++)g[t]=(0,s.G)(g[t],u.get(e,t));if(0!==g[t]){u.get(t,t)<0&&(g[t]=-g[t]);for(let e=t;e<r;e++)u.set(e,t,u.get(e,t)/g[t]);u.set(t,t,u.get(t,t)+1)}g[t]=-g[t]}for(let e=t+1;e<a;e++){if(t<x&&0!==g[t]){let i=0;for(let n=t;n<r;n++)i+=u.get(n,t)*u.get(n,e);i=-i/u.get(t,t);for(let n=t;n<r;n++)u.set(n,e,u.get(n,e)+i*u.get(n,t))}_[e]=u.get(t,e)}if(f&&t<x)for(let e=t;e<r;e++)w.set(e,t,u.get(e,t));if(t<k){_[t]=0;for(let e=t+1;e<a;e++)_[t]=(0,s.G)(_[t],_[e]);if(0!==_[t]){_[t+1]<0&&(_[t]=0-_[t]);for(let e=t+1;e<a;e++)_[e]/=_[t];_[t+1]+=1}if(_[t]=-_[t],t+1<r&&0!==_[t]){for(let e=t+1;e<r;e++)y[e]=0;for(let e=t+1;e<r;e++)for(let r=t+1;r<a;r++)y[e]+=_[r]*u.get(e,r);for(let e=t+1;e<a;e++){let i=-_[e]/_[t+1];for(let n=t+1;n<r;n++)u.set(n,e,u.get(n,e)+i*y[n])}}if(c)for(let e=t+1;e<a;e++)b.set(e,t,_[e])}}let A=Math.min(a,r+1);if(x<a&&(g[x]=u.get(x,x)),r<A&&(g[A-1]=0),k+1<A&&(_[k]=u.get(k,A-1)),_[A-1]=0,f){for(let t=x;t<m;t++){for(let e=0;e<r;e++)w.set(e,t,0);w.set(t,t,1)}for(let t=x-1;t>=0;t--)if(0!==g[t]){for(let e=t+1;e<m;e++){let i=0;for(let n=t;n<r;n++)i+=w.get(n,t)*w.get(n,e);i=-i/w.get(t,t);for(let n=t;n<r;n++)w.set(n,e,w.get(n,e)+i*w.get(n,t))}for(let e=t;e<r;e++)w.set(e,t,-w.get(e,t));w.set(t,t,1+w.get(t,t));for(let e=0;e<t-1;e++)w.set(e,t,0)}else{for(let e=0;e<r;e++)w.set(e,t,0);w.set(t,t,1)}}if(c)for(let t=a-1;t>=0;t--){if(t<k&&0!==_[t])for(let e=t+1;e<a;e++){let r=0;for(let i=t+1;i<a;i++)r+=b.get(i,t)*b.get(i,e);r=-r/b.get(t+1,t);for(let i=t+1;i<a;i++)b.set(i,e,b.get(i,e)+r*b.get(i,t))}for(let e=0;e<a;e++)b.set(e,t,0);b.set(t,t,1)}let E=A-1,S=0,D=Number.EPSILON;for(;A>0;){let t,e;for(t=A-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+D*Math.abs(g[t]+Math.abs(g[t+1]));if(Math.abs(_[t])<=e||Number.isNaN(_[t])){_[t]=0;break}}if(t===A-2)e=4;else{let r;for(r=A-1;r>=t&&r!==t;r--){let e=(r!==A?Math.abs(_[r]):0)+(r!==t+1?Math.abs(_[r-1]):0);if(Math.abs(g[r])<=D*e){g[r]=0;break}}r===t?e=3:r===A-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=_[A-2];_[A-2]=0;for(let r=A-2;r>=t;r--){let i=(0,s.G)(g[r],e),n=g[r]/i,o=e/i;if(g[r]=i,r!==t&&(e=-o*_[r-1],_[r-1]=n*_[r-1]),c)for(let t=0;t<a;t++)i=n*b.get(t,r)+o*b.get(t,A-1),b.set(t,A-1,-o*b.get(t,r)+n*b.get(t,A-1)),b.set(t,r,i)}break}case 2:{let e=_[t-1];_[t-1]=0;for(let i=t;i<A;i++){let n=(0,s.G)(g[i],e),a=g[i]/n,o=e/n;if(g[i]=n,e=-o*_[i],_[i]=a*_[i],f)for(let e=0;e<r;e++)n=a*w.get(e,i)+o*w.get(e,t-1),w.set(e,t-1,-o*w.get(e,i)+a*w.get(e,t-1)),w.set(e,i,n)}break}case 3:{const e=Math.max(Math.abs(g[A-1]),Math.abs(g[A-2]),Math.abs(_[A-2]),Math.abs(g[t]),Math.abs(_[t])),i=g[A-1]/e,n=g[A-2]/e,o=_[A-2]/e,h=g[t]/e,l=_[t]/e,u=((n+i)*(n-i)+o*o)/2,d=i*o*(i*o);let m=0;0===u&&0===d||(m=u<0?0-Math.sqrt(u*u+d):Math.sqrt(u*u+d),m=d/(u+m));let p=(h+i)*(h-i)+m,y=h*l;for(let e=t;e<A-1;e++){let i=(0,s.G)(p,y);0===i&&(i=Number.MIN_VALUE);let n=p/i,o=y/i;if(e!==t&&(_[e-1]=i),p=n*g[e]+o*_[e],_[e]=n*_[e]-o*g[e],y=o*g[e+1],g[e+1]=n*g[e+1],c)for(let t=0;t<a;t++)i=n*b.get(t,e)+o*b.get(t,e+1),b.set(t,e+1,-o*b.get(t,e)+n*b.get(t,e+1)),b.set(t,e,i);if(i=(0,s.G)(p,y),0===i&&(i=Number.MIN_VALUE),n=p/i,o=y/i,g[e]=i,p=n*_[e]+o*g[e+1],g[e+1]=-o*_[e]+n*g[e+1],y=o*_[e+1],_[e+1]=n*_[e+1],f&&e<r-1)for(let t=0;t<r;t++)i=n*w.get(t,e)+o*w.get(t,e+1),w.set(t,e+1,-o*w.get(t,e)+n*w.get(t,e+1)),w.set(t,e,i)}_[A-2]=p,S+=1;break}case 4:if(g[t]<=0&&(g[t]=g[t]<0?-g[t]:0,c))for(let e=0;e<=E;e++)b.set(e,t,-b.get(e,t));for(;t<E&&!(g[t]>=g[t+1]);){let e=g[t];if(g[t]=g[t+1],g[t+1]=e,c&&t<a-1)for(let r=0;r<a;r++)e=b.get(r,t+1),b.set(r,t+1,b.get(r,t)),b.set(r,t,e);if(f&&t<r-1)for(let i=0;i<r;i++)e=w.get(i,t+1),w.set(i,t+1,w.get(i,t)),w.set(i,t,e);t++}S=0,A--}}if(d){let t=b;b=w,w=t}this.m=r,this.n=a,this.s=g,this.U=w,this.V=b}solve(t){let e=t,r=this.threshold,n=this.s.length,s=i.Z.zeros(n,n);for(let t=0;t<n;t++)Math.abs(this.s[t])<=r?s.set(t,t,0):s.set(t,t,1/this.s[t]);let a=this.U,o=this.rightSingularVectors,h=o.mmul(s),l=o.rows,u=a.rows,f=i.Z.zeros(l,u);for(let t=0;t<l;t++)for(let e=0;e<u;e++){let r=0;for(let i=0;i<n;i++)r+=h.get(t,i)*a.get(e,i);f.set(t,e,r)}return f.mmul(e)}solveForDiagonal(t){return this.solve(i.Z.diag(t))}inverse(){let t=this.V,e=this.threshold,r=t.rows,n=t.columns,s=new i.Z(r,this.s.length);for(let i=0;i<r;i++)for(let r=0;r<n;r++)Math.abs(this.s[r])>e&&s.set(i,r,t.get(i,r)/this.s[r]);let a=this.U,o=a.rows,h=a.columns,l=new i.Z(r,o);for(let t=0;t<r;t++)for(let e=0;e<o;e++){let r=0;for(let i=0;i<h;i++)r+=s.get(t,i)*a.get(e,i);l.set(t,e,r)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s;for(let i=0,n=r.length;i<n;i++)r[i]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return i.Z.diag(this.s)}}},6310:(t,e,r)=>{"use strict";function i(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}r.d(e,{G:()=>i})},8345:(t,e,r)=>{"use strict";r.d(e,{S:()=>h,F:()=>l});var i=r(2313),n=r(7072),s=r(6943),a=r(1883),o=r(1548);function h(t,e=!1){return t=o.Z.checkMatrix(t),e?new s.Z(t).inverse():l(t,a.Z.eye(t.rows))}function l(t,e,r=!1){return t=o.Z.checkMatrix(t),e=o.Z.checkMatrix(e),r?new s.Z(t).solve(e):t.isSquare()?new i.Z(t).solve(e):new n.Z(t).solve(e)}},2864:(t,e,r)=>{"use strict";r.r(e),r.d(e,{AbstractMatrix:()=>i.X,CHO:()=>R,CholeskyDecomposition:()=>R,EVD:()=>I,EigenvalueDecomposition:()=>I,LU:()=>_.Z,LuDecomposition:()=>_.Z,Matrix:()=>i.Z,MatrixColumnSelectionView:()=>o,MatrixColumnView:()=>a,MatrixFlipColumnView:()=>h,MatrixFlipRowView:()=>l,MatrixRowSelectionView:()=>f,MatrixRowView:()=>u,MatrixSelectionView:()=>c,MatrixSubView:()=>d,MatrixTransposeView:()=>m.Z,NIPALS:()=>P,Nipals:()=>P,QR:()=>B.Z,QrDecomposition:()=>B.Z,SVD:()=>v.Z,SingularValueDecomposition:()=>v.Z,WrapperMatrix1D:()=>p,WrapperMatrix2D:()=>g.Z,correlation:()=>S,covariance:()=>E,default:()=>i.Z,determinant:()=>y,inverse:()=>b.S,linearDependencies:()=>M,pseudoInverse:()=>A,solve:()=>b.F,wrap:()=>w});var i=r(1883),n=r(3018),s=r(4920);class a extends s.Z{constructor(t,e){(0,n.bp)(t,e),super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}class o extends s.Z{constructor(t,e){e=(0,n.g)(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,r){return this.matrix.set(t,this.columnIndices[e],r),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class h extends s.Z{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class l extends s.Z{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class u extends s.Z{constructor(t,e){(0,n.zb)(t,e),super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}class f extends s.Z{constructor(t,e){super(t,(e=(0,n.ZR)(t,e)).length,t.columns),this.rowIndices=e}set(t,e,r){return this.matrix.set(this.rowIndices[t],e,r),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class c extends s.Z{constructor(t,e,r){let i=(0,n.N2)(t,e,r);super(t,i.row.length,i.column.length),this.rowIndices=i.row,this.columnIndices=i.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class d extends s.Z{constructor(t,e,r,i,s){(0,n.J5)(t,e,r,i,s),super(t,r-e+1,s-i+1),this.startRow=e,this.startColumn=i}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}var m=r(5922);class p extends i.X{constructor(t,e={}){const{rows:r=1}=e;if(t.length%r!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=t.length/r,this.data=t}set(t,e,r){let i=this._calculateIndex(t,e);return this.data[i]=r,this}get(t,e){let r=this._calculateIndex(t,e);return this.data[r]}_calculateIndex(t,e){return t*this.columns+e}}var g=r(1548);function w(t,e){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new g.Z(t):new p(t,e);throw new Error("the argument is not an array")}var b=r(8345),_=r(2313);function y(t){if((t=i.Z.checkMatrix(t)).isSquare()){if(0===t.columns)return 1;let e,r,i,n;if(2===t.columns)return e=t.get(0,0),r=t.get(0,1),i=t.get(1,0),n=t.get(1,1),e*n-r*i;if(3===t.columns){let n,s,a;return n=new c(t,[1,2],[1,2]),s=new c(t,[1,2],[0,2]),a=new c(t,[1,2],[0,1]),e=t.get(0,0),r=t.get(0,1),i=t.get(0,2),e*y(n)-r*y(s)+i*y(a)}return new _.Z(t).determinant}throw Error("determinant can only be calculated for a square matrix")}var v=r(6943);function x(t,e){let r=[];for(let i=0;i<t;i++)i!==e&&r.push(i);return r}function k(t,e,r,i=1e-9,n=1e-9){if(t>n)return new Array(e.rows+1).fill(0);{let t=e.addRow(r,[0]);for(let e=0;e<t.rows;e++)Math.abs(t.get(e,0))<i&&t.set(e,0,0);return t.to1DArray()}}function M(t,e={}){const{thresholdValue:r=1e-9,thresholdError:n=1e-9}=e;let s=(t=i.Z.checkMatrix(t)).rows,a=new i.Z(s,s);for(let e=0;e<s;e++){let o=i.Z.columnVector(t.getRow(e)),h=t.subMatrixRow(x(s,e)).transpose(),l=new v.Z(h).solve(o),u=i.Z.sub(o,h.mmul(l)).abs().max();a.setRow(e,k(u,l,e,r,n))}return a}function A(t,e=Number.EPSILON){if((t=i.Z.checkMatrix(t)).isEmpty())return t.transpose();let r=new v.Z(t,{autoTranspose:!0}),n=r.leftSingularVectors,s=r.rightSingularVectors,a=r.diagonal;for(let t=0;t<a.length;t++)Math.abs(a[t])>e?a[t]=1/a[t]:a[t]=0;return s.mmul(i.Z.diag(a).mmul(n.transpose()))}function E(t,e=t,r={}){t=new i.Z(t);let n=!1;if("object"!=typeof e||i.Z.isMatrix(e)||Array.isArray(e)?e=new i.Z(e):(r=e,e=t,n=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:s=!0}=r;s&&(t=t.center("column"),n||(e=e.center("column")));const a=t.transpose().mmul(e);for(let e=0;e<a.rows;e++)for(let r=0;r<a.columns;r++)a.set(e,r,a.get(e,r)*(1/(t.rows-1)));return a}function S(t,e=t,r={}){t=new i.Z(t);let n=!1;if("object"!=typeof e||i.Z.isMatrix(e)||Array.isArray(e)?e=new i.Z(e):(r=e,e=t,n=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:s=!0,scale:a=!0}=r;s&&(t.center("column"),n||e.center("column")),a&&(t.scale("column"),n||e.scale("column"));const o=t.standardDeviation("column",{unbiased:!0}),h=n?o:e.standardDeviation("column",{unbiased:!0}),l=t.transpose().mmul(e);for(let e=0;e<l.rows;e++)for(let r=0;r<l.columns;r++)l.set(e,r,l.get(e,r)*(1/(o[e]*h[r]))*(1/(t.rows-1)));return l}var D=r(6310);class I{constructor(t,e={}){const{assumeSymmetric:r=!1}=e;if(!(t=g.Z.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let n,s,a=t.columns,o=new i.Z(a,a),h=new Float64Array(a),l=new Float64Array(a),u=t,f=!1;if(f=!!r||t.isSymmetric(),f){for(n=0;n<a;n++)for(s=0;s<a;s++)o.set(n,s,u.get(n,s));!function(t,e,r,i){let n,s,a,o,h,l,u,f;for(h=0;h<t;h++)r[h]=i.get(t-1,h);for(o=t-1;o>0;o--){for(f=0,a=0,l=0;l<o;l++)f+=Math.abs(r[l]);if(0===f)for(e[o]=r[o-1],h=0;h<o;h++)r[h]=i.get(o-1,h),i.set(o,h,0),i.set(h,o,0);else{for(l=0;l<o;l++)r[l]/=f,a+=r[l]*r[l];for(n=r[o-1],s=Math.sqrt(a),n>0&&(s=-s),e[o]=f*s,a-=n*s,r[o-1]=n-s,h=0;h<o;h++)e[h]=0;for(h=0;h<o;h++){for(n=r[h],i.set(h,o,n),s=e[h]+i.get(h,h)*n,l=h+1;l<=o-1;l++)s+=i.get(l,h)*r[l],e[l]+=i.get(l,h)*n;e[h]=s}for(n=0,h=0;h<o;h++)e[h]/=a,n+=e[h]*r[h];for(u=n/(a+a),h=0;h<o;h++)e[h]-=u*r[h];for(h=0;h<o;h++){for(n=r[h],s=e[h],l=h;l<=o-1;l++)i.set(l,h,i.get(l,h)-(n*e[l]+s*r[l]));r[h]=i.get(o-1,h),i.set(o,h,0)}}r[o]=a}for(o=0;o<t-1;o++){if(i.set(t-1,o,i.get(o,o)),i.set(o,o,1),a=r[o+1],0!==a){for(l=0;l<=o;l++)r[l]=i.get(l,o+1)/a;for(h=0;h<=o;h++){for(s=0,l=0;l<=o;l++)s+=i.get(l,o+1)*i.get(l,h);for(l=0;l<=o;l++)i.set(l,h,i.get(l,h)-s*r[l])}}for(l=0;l<=o;l++)i.set(l,o+1,0)}for(h=0;h<t;h++)r[h]=i.get(t-1,h),i.set(t-1,h,0);i.set(t-1,t-1,1),e[0]=0}(a,l,h,o),function(t,e,r,i){let n,s,a,o,h,l,u,f,c,d,m,p,g,w,b,_,y;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;let v=0,x=0,k=Number.EPSILON;for(l=0;l<t;l++){for(x=Math.max(x,Math.abs(r[l])+Math.abs(e[l])),u=l;u<t&&!(Math.abs(e[u])<=k*x);)u++;if(u>l){y=0;do{for(y+=1,n=r[l],f=(r[l+1]-n)/(2*e[l]),c=(0,D.G)(f,1),f<0&&(c=-c),r[l]=e[l]/(f+c),r[l+1]=e[l]*(f+c),d=r[l+1],s=n-r[l],a=l+2;a<t;a++)r[a]-=s;for(v+=s,f=r[u],m=1,p=m,g=m,w=e[l+1],b=0,_=0,a=u-1;a>=l;a--)for(g=p,p=m,_=b,n=m*e[a],s=m*f,c=(0,D.G)(f,e[a]),e[a+1]=b*c,b=e[a]/c,m=f/c,f=m*r[a]-b*n,r[a+1]=s+b*(m*n+b*r[a]),h=0;h<t;h++)s=i.get(h,a+1),i.set(h,a+1,b*i.get(h,a)+m*s),i.set(h,a,m*i.get(h,a)-b*s);f=-b*_*g*w*e[l]/d,e[l]=b*f,r[l]=m*f}while(Math.abs(e[l])>k*x)}r[l]=r[l]+v,e[l]=0}for(a=0;a<t-1;a++){for(h=a,f=r[a],o=a+1;o<t;o++)r[o]<f&&(h=o,f=r[o]);if(h!==a)for(r[h]=r[a],r[a]=f,o=0;o<t;o++)f=i.get(o,a),i.set(o,a,i.get(o,h)),i.set(o,h,f)}}(a,l,h,o)}else{let t=new i.Z(a,a),e=new Float64Array(a);for(s=0;s<a;s++)for(n=0;n<a;n++)t.set(n,s,u.get(n,s));!function(t,e,r,i){let n,s,a,o,h,l,u,f=t-1;for(l=1;l<=f-1;l++){for(u=0,o=l;o<=f;o++)u+=Math.abs(e.get(o,l-1));if(0!==u){for(a=0,o=f;o>=l;o--)r[o]=e.get(o,l-1)/u,a+=r[o]*r[o];for(s=Math.sqrt(a),r[l]>0&&(s=-s),a-=r[l]*s,r[l]=r[l]-s,h=l;h<t;h++){for(n=0,o=f;o>=l;o--)n+=r[o]*e.get(o,h);for(n/=a,o=l;o<=f;o++)e.set(o,h,e.get(o,h)-n*r[o])}for(o=0;o<=f;o++){for(n=0,h=f;h>=l;h--)n+=r[h]*e.get(o,h);for(n/=a,h=l;h<=f;h++)e.set(o,h,e.get(o,h)-n*r[h])}r[l]=u*r[l],e.set(l,l-1,u*s)}}for(o=0;o<t;o++)for(h=0;h<t;h++)i.set(o,h,o===h?1:0);for(l=f-1;l>=1;l--)if(0!==e.get(l,l-1)){for(o=l+1;o<=f;o++)r[o]=e.get(o,l-1);for(h=l;h<=f;h++){for(s=0,o=l;o<=f;o++)s+=r[o]*i.get(o,h);for(s=s/r[l]/e.get(l,l-1),o=l;o<=f;o++)i.set(o,h,i.get(o,h)+s*r[o])}}}(a,t,e,o),function(t,e,r,i,n){let s,a,o,h,l,u,f,c,d,m,p,g,w,b,_,y=t-1,v=t-1,x=Number.EPSILON,k=0,M=0,A=0,E=0,S=0,D=0,I=0,R=0;for(s=0;s<t;s++)for((s<0||s>v)&&(r[s]=n.get(s,s),e[s]=0),a=Math.max(s-1,0);a<t;a++)M+=Math.abs(n.get(s,a));for(;y>=0;){for(h=y;h>0&&(D=Math.abs(n.get(h-1,h-1))+Math.abs(n.get(h,h)),0===D&&(D=M),!(Math.abs(n.get(h,h-1))<x*D));)h--;if(h===y)n.set(y,y,n.get(y,y)+k),r[y]=n.get(y,y),e[y]=0,y--,R=0;else if(h===y-1){if(f=n.get(y,y-1)*n.get(y-1,y),A=(n.get(y-1,y-1)-n.get(y,y))/2,E=A*A+f,I=Math.sqrt(Math.abs(E)),n.set(y,y,n.get(y,y)+k),n.set(y-1,y-1,n.get(y-1,y-1)+k),c=n.get(y,y),E>=0){for(I=A>=0?A+I:A-I,r[y-1]=c+I,r[y]=r[y-1],0!==I&&(r[y]=c-f/I),e[y-1]=0,e[y]=0,c=n.get(y,y-1),D=Math.abs(c)+Math.abs(I),A=c/D,E=I/D,S=Math.sqrt(A*A+E*E),A/=S,E/=S,a=y-1;a<t;a++)I=n.get(y-1,a),n.set(y-1,a,E*I+A*n.get(y,a)),n.set(y,a,E*n.get(y,a)-A*I);for(s=0;s<=y;s++)I=n.get(s,y-1),n.set(s,y-1,E*I+A*n.get(s,y)),n.set(s,y,E*n.get(s,y)-A*I);for(s=0;s<=v;s++)I=i.get(s,y-1),i.set(s,y-1,E*I+A*i.get(s,y)),i.set(s,y,E*i.get(s,y)-A*I)}else r[y-1]=c+A,r[y]=c+A,e[y-1]=I,e[y]=-I;y-=2,R=0}else{if(c=n.get(y,y),d=0,f=0,h<y&&(d=n.get(y-1,y-1),f=n.get(y,y-1)*n.get(y-1,y)),10===R){for(k+=c,s=0;s<=y;s++)n.set(s,s,n.get(s,s)-c);D=Math.abs(n.get(y,y-1))+Math.abs(n.get(y-1,y-2)),c=d=.75*D,f=-.4375*D*D}if(30===R&&(D=(d-c)/2,D=D*D+f,D>0)){for(D=Math.sqrt(D),d<c&&(D=-D),D=c-f/((d-c)/2+D),s=0;s<=y;s++)n.set(s,s,n.get(s,s)-D);k+=D,c=d=f=.964}for(R+=1,l=y-2;l>=h&&(I=n.get(l,l),S=c-I,D=d-I,A=(S*D-f)/n.get(l+1,l)+n.get(l,l+1),E=n.get(l+1,l+1)-I-S-D,S=n.get(l+2,l+1),D=Math.abs(A)+Math.abs(E)+Math.abs(S),A/=D,E/=D,S/=D,l!==h)&&!(Math.abs(n.get(l,l-1))*(Math.abs(E)+Math.abs(S))<x*(Math.abs(A)*(Math.abs(n.get(l-1,l-1))+Math.abs(I)+Math.abs(n.get(l+1,l+1)))));)l--;for(s=l+2;s<=y;s++)n.set(s,s-2,0),s>l+2&&n.set(s,s-3,0);for(o=l;o<=y-1&&(b=o!==y-1,o!==l&&(A=n.get(o,o-1),E=n.get(o+1,o-1),S=b?n.get(o+2,o-1):0,c=Math.abs(A)+Math.abs(E)+Math.abs(S),0!==c&&(A/=c,E/=c,S/=c)),0!==c);o++)if(D=Math.sqrt(A*A+E*E+S*S),A<0&&(D=-D),0!==D){for(o!==l?n.set(o,o-1,-D*c):h!==l&&n.set(o,o-1,-n.get(o,o-1)),A+=D,c=A/D,d=E/D,I=S/D,E/=A,S/=A,a=o;a<t;a++)A=n.get(o,a)+E*n.get(o+1,a),b&&(A+=S*n.get(o+2,a),n.set(o+2,a,n.get(o+2,a)-A*I)),n.set(o,a,n.get(o,a)-A*c),n.set(o+1,a,n.get(o+1,a)-A*d);for(s=0;s<=Math.min(y,o+3);s++)A=c*n.get(s,o)+d*n.get(s,o+1),b&&(A+=I*n.get(s,o+2),n.set(s,o+2,n.get(s,o+2)-A*S)),n.set(s,o,n.get(s,o)-A),n.set(s,o+1,n.get(s,o+1)-A*E);for(s=0;s<=v;s++)A=c*i.get(s,o)+d*i.get(s,o+1),b&&(A+=I*i.get(s,o+2),i.set(s,o+2,i.get(s,o+2)-A*S)),i.set(s,o,i.get(s,o)-A),i.set(s,o+1,i.get(s,o+1)-A*E)}}}if(0!==M){for(y=t-1;y>=0;y--)if(A=r[y],E=e[y],0===E)for(h=y,n.set(y,y,1),s=y-1;s>=0;s--){for(f=n.get(s,s)-A,S=0,a=h;a<=y;a++)S+=n.get(s,a)*n.get(a,y);if(e[s]<0)I=f,D=S;else if(h=s,0===e[s]?n.set(s,y,0!==f?-S/f:-S/(x*M)):(c=n.get(s,s+1),d=n.get(s+1,s),E=(r[s]-A)*(r[s]-A)+e[s]*e[s],u=(c*D-I*S)/E,n.set(s,y,u),n.set(s+1,y,Math.abs(c)>Math.abs(I)?(-S-f*u)/c:(-D-d*u)/I)),u=Math.abs(n.get(s,y)),x*u*u>1)for(a=s;a<=y;a++)n.set(a,y,n.get(a,y)/u)}else if(E<0)for(h=y-1,Math.abs(n.get(y,y-1))>Math.abs(n.get(y-1,y))?(n.set(y-1,y-1,E/n.get(y,y-1)),n.set(y-1,y,-(n.get(y,y)-A)/n.get(y,y-1))):(_=C(0,-n.get(y-1,y),n.get(y-1,y-1)-A,E),n.set(y-1,y-1,_[0]),n.set(y-1,y,_[1])),n.set(y,y-1,0),n.set(y,y,1),s=y-2;s>=0;s--){for(m=0,p=0,a=h;a<=y;a++)m+=n.get(s,a)*n.get(a,y-1),p+=n.get(s,a)*n.get(a,y);if(f=n.get(s,s)-A,e[s]<0)I=f,S=m,D=p;else if(h=s,0===e[s]?(_=C(-m,-p,f,E),n.set(s,y-1,_[0]),n.set(s,y,_[1])):(c=n.get(s,s+1),d=n.get(s+1,s),g=(r[s]-A)*(r[s]-A)+e[s]*e[s]-E*E,w=2*(r[s]-A)*E,0===g&&0===w&&(g=x*M*(Math.abs(f)+Math.abs(E)+Math.abs(c)+Math.abs(d)+Math.abs(I))),_=C(c*S-I*m+E*p,c*D-I*p-E*m,g,w),n.set(s,y-1,_[0]),n.set(s,y,_[1]),Math.abs(c)>Math.abs(I)+Math.abs(E)?(n.set(s+1,y-1,(-m-f*n.get(s,y-1)+E*n.get(s,y))/c),n.set(s+1,y,(-p-f*n.get(s,y)-E*n.get(s,y-1))/c)):(_=C(-S-d*n.get(s,y-1),-D-d*n.get(s,y),I,E),n.set(s+1,y-1,_[0]),n.set(s+1,y,_[1]))),u=Math.max(Math.abs(n.get(s,y-1)),Math.abs(n.get(s,y))),x*u*u>1)for(a=s;a<=y;a++)n.set(a,y-1,n.get(a,y-1)/u),n.set(a,y,n.get(a,y)/u)}for(s=0;s<t;s++)if(s<0||s>v)for(a=s;a<t;a++)i.set(s,a,n.get(s,a));for(a=t-1;a>=0;a--)for(s=0;s<=v;s++){for(I=0,o=0;o<=Math.min(a,v);o++)I+=i.get(s,o)*n.get(o,a);i.set(s,a,I)}}}(a,l,h,o,t)}this.n=a,this.e=l,this.d=h,this.V=o}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,r=this.n,n=this.e,s=this.d,a=new i.Z(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)a.set(t,e,0);a.set(t,t,s[t]),n[t]>0?a.set(t,t+1,n[t]):n[t]<0&&a.set(t,t-1,n[t])}return a}}function C(t,e,r,i){let n,s;return Math.abs(r)>Math.abs(i)?(n=i/r,s=r+n*i,[(t+n*e)/s,(e-n*t)/s]):(n=r/i,s=i+n*r,[(n*t+e)/s,(n*e-t)/s])}class R{constructor(t){if(!(t=g.Z.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");let e,r,n,s=t,a=s.rows,o=new i.Z(a,a),h=!0;for(r=0;r<a;r++){let t=0;for(n=0;n<r;n++){let i=0;for(e=0;e<n;e++)i+=o.get(n,e)*o.get(r,e);i=(s.get(r,n)-i)/o.get(n,n),o.set(r,n,i),t+=i*i}for(t=s.get(r,r)-t,h&=t>0,o.set(r,r,Math.sqrt(Math.max(t,0))),n=r+1;n<a;n++)o.set(r,n,0)}this.L=o,this.positiveDefinite=Boolean(h)}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=g.Z.checkMatrix(t);let e=this.L,r=e.rows;if(t.rows!==r)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let i,n,s,a=t.columns,o=t.clone();for(s=0;s<r;s++)for(n=0;n<a;n++){for(i=0;i<s;i++)o.set(s,n,o.get(s,n)-o.get(i,n)*e.get(s,i));o.set(s,n,o.get(s,n)/e.get(s,s))}for(s=r-1;s>=0;s--)for(n=0;n<a;n++){for(i=s+1;i<r;i++)o.set(s,n,o.get(s,n)-o.get(i,n)*e.get(i,s));o.set(s,n,o.get(s,n)/e.get(s,s))}return o}get lowerTriangularMatrix(){return this.L}}var B=r(7072);class P{constructor(t,e={}){t=g.Z.checkMatrix(t);let{Y:r}=e;const{scaleScores:n=!1,maxIterations:s=1e3,terminationCriteria:a=1e-10}=e;let o;if(r){if(r=Array.isArray(r)&&"number"==typeof r[0]?i.Z.columnVector(r):g.Z.checkMatrix(r),r.rows!==t.rows)throw new Error("Y should have the same number of rows as X");o=r.getColumnVector(0)}else o=t.getColumnVector(0);let h,l,u,f,c=1;for(let e=0;e<s&&c>a;e++)u=t.transpose().mmul(o).div(o.transpose().mmul(o).get(0,0)),u=u.div(u.norm()),h=t.mmul(u).div(u.transpose().mmul(u).get(0,0)),e>0&&(c=h.clone().sub(f).pow(2).sum()),f=h.clone(),r?(l=r.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),l=l.div(l.norm()),o=r.mmul(l).div(l.transpose().mmul(l).get(0,0))):o=h;if(r){let e=t.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0));e=e.div(e.norm());let i=t.clone().sub(h.clone().mmul(e.transpose())),n=o.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),s=r.clone().sub(h.clone().mulS(n.get(0,0)).mmul(l.transpose()));this.t=h,this.p=e.transpose(),this.w=u.transpose(),this.q=l,this.u=o,this.s=h.transpose().mmul(h),this.xResidual=i,this.yResidual=s,this.betas=n}else this.w=u.transpose(),this.s=h.transpose().mmul(h).sqrt(),this.t=n?h.clone().div(this.s.get(0,0)):h,this.xResidual=t.sub(h.mmul(u.transpose()))}}},1883:(t,e,r)=>{"use strict";r.d(e,{X:()=>c,Z:()=>m});var i=r(7531);const n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,i.Z)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,s=e.toIndex,a=void 0===s?t.length:s;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],h=n+1;h<a;h++)t[h]>o&&(o=t[h]);return o},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,i.Z)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,s=e.toIndex,a=void 0===s?t.length:s;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],h=n+1;h<a;h++)t[h]<o&&(o=t[h]);return o},a=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,i.Z)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!(0,i.Z)(r.output))throw new TypeError("output option must be an array if specified");e=r.output}else e=new Array(t.length);var a=s(t),o=n(t);if(a===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var h=r.min,l=void 0===h?r.autoMinMax?a:0:h,u=r.max,f=void 0===u?r.autoMinMax?o:1:u;if(l>=f)throw new RangeError("min option must be smaller than max option");for(var c=(f-l)/(o-a),d=0;d<t.length;d++)e[d]=(t[d]-a)*c+l;return e},o=" ".repeat(2),h=" ".repeat(4);function l(t,e={}){const{maxRows:r=15,maxColumns:i=10,maxNumSize:n=8}=e;return`${t.constructor.name} {\n${o}[\n${h}${function(t,e,r,i){const{rows:n,columns:s}=t,a=Math.min(n,e),o=Math.min(s,r),l=[];for(let e=0;e<a;e++){let r=[];for(let n=0;n<o;n++)r.push(u(t.get(e,n),i));l.push(`${r.join(" ")}`)}return o!==s&&(l[l.length-1]+=` ... ${s-r} more columns`),a!==n&&l.push(`... ${n-e} more rows`),l.join(`\n${h}`)}(t,r,i,n)}\n${o}]\n${o}rows: ${t.rows}\n${o}columns: ${t.columns}\n}`}function u(t,e){const r=String(t);if(r.length<=e)return r.padEnd(e," ");const i=t.toPrecision(e-2);if(i.length<=e)return i;const n=t.toExponential(e-2),s=n.indexOf("e"),a=n.slice(s);return n.slice(0,e-a.length)+a}var f=r(3018);class c{static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");let i=new m(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++)i.set(n,t,r[n*e+t]);return i}static rowVector(t){let e=new m(1,t.length);for(let r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){let e=new m(t.length,1);for(let r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static zeros(t,e){return new m(t,e)}static ones(t,e){return new m(t,e).fill(1)}static rand(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{random:i=Math.random}=r;let n=new m(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)n.set(r,t,i());return n}static randInt(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{min:i=0,max:n=1e3,random:s=Math.random}=r;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(n))throw new TypeError("max must be an integer");if(i>=n)throw new RangeError("min must be smaller than max");let a=n-i,o=new m(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++){let e=i+Math.round(s()*a);o.set(r,t,e)}return o}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);let i=Math.min(t,e),n=this.zeros(t,e);for(let t=0;t<i;t++)n.set(t,t,r);return n}static diag(t,e,r){let i=t.length;void 0===e&&(e=i),void 0===r&&(r=e);let n=Math.min(i,e,r),s=this.zeros(e,r);for(let e=0;e<n;e++)s.set(e,e,t[e]);return s}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,i=t.columns,n=new m(r,i);for(let s=0;s<r;s++)for(let r=0;r<i;r++)n.set(s,r,Math.min(t.get(s,r),e.get(s,r)));return n}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,i=t.columns,n=new this(r,i);for(let s=0;s<r;s++)for(let r=0;r<i;r++)n.set(s,r,Math.max(t.get(s,r),e.get(s,r)));return n}static checkMatrix(t){return c.isMatrix(t)?t:new m(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.call(this,e,r);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.push(this.get(e,r));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,r=-1,i=!0,n=!1;for(;t<this.rows&&i;){for(e=0,n=!1;e<this.columns&&!1===n;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(n=!0,r=e):(i=!1,n=!0);t++}return i}isReducedEchelonForm(){let t=0,e=0,r=-1,i=!0,n=!1;for(;t<this.rows&&i;){for(e=0,n=!1;e<this.columns&&!1===n;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(n=!0,r=e):(i=!1,n=!0);for(let r=e+1;r<this.rows;r++)0!==this.get(t,r)&&(i=!1);t++}return i}echelonForm(){let t=this.clone(),e=0,r=0;for(;e<t.rows&&r<t.columns;){let i=e;for(let n=e;n<t.rows;n++)t.get(n,r)>t.get(i,r)&&(i=n);if(0===t.get(i,r))r++;else{t.swapRows(e,i);let n=t.get(e,r);for(let i=r;i<t.columns;i++)t.set(e,i,t.get(e,i)/n);for(let i=e+1;i<t.rows;i++){let n=t.get(i,r)/t.get(e,r);t.set(i,r,0);for(let s=r+1;s<t.columns;s++)t.set(i,s,t.get(i,s)-t.get(e,s)*n)}e++,r++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,r=t.rows,i=r-1;for(;i>=0;)if(0===t.maxRow(i))i--;else{let n=0,s=!1;for(;n<r&&!1===s;)1===t.get(i,n)?s=!0:n++;for(let r=0;r<i;r++){let s=t.get(r,n);for(let a=n;a<e;a++){let e=t.get(r,a)-s*t.get(i,a);t.set(r,a,e)}}i--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:r=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");let i=new m(this.rows*e,this.columns*r);for(let t=0;t<e;t++)for(let e=0;e<r;e++)i.setSubMatrix(this,this.rows*t,this.columns*e);return i}fill(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){(0,f.zb)(this,t);let e=[];for(let r=0;r<this.columns;r++)e.push(this.get(t,r));return e}getRowVector(t){return m.rowVector(this.getRow(t))}setRow(t,e){(0,f.zb)(this,t),e=(0,f.on)(this,e);for(let r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){(0,f.zb)(this,t),(0,f.zb)(this,e);for(let r=0;r<this.columns;r++){let i=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,i)}return this}getColumn(t){(0,f.bp)(this,t);let e=[];for(let r=0;r<this.rows;r++)e.push(this.get(r,t));return e}getColumnVector(t){return m.columnVector(this.getColumn(t))}setColumn(t,e){(0,f.bp)(this,t),e=(0,f.Um)(this,e);for(let r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){(0,f.bp)(this,t),(0,f.bp)(this,e);for(let r=0;r<this.rows;r++){let i=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,i)}return this}addRowVector(t){t=(0,f.on)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=(0,f.on)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=(0,f.on)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=(0,f.on)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=(0,f.Um)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=(0,f.Um)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=(0,f.Um)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=(0,f.Um)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){(0,f.zb)(this,t);for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){(0,f.bp)(this,t);for(let r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){(0,f.cT)(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)>t&&(t=this.get(r,i),e[0]=r,e[1]=i);return e}min(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){(0,f.cT)(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)<t&&(t=this.get(r,i),e[0]=r,e[1]=i);return e}maxRow(t){if((0,f.zb)(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){(0,f.zb)(this,t),(0,f.cT)(this);let e=this.get(t,0),r=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i),r[1]=i);return r}minRow(t){if((0,f.zb)(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){(0,f.zb)(this,t),(0,f.cT)(this);let e=this.get(t,0),r=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i),r[1]=i);return r}maxColumn(t){if((0,f.bp)(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){(0,f.bp)(this,t),(0,f.cT)(this);let e=this.get(0,t),r=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t),r[0]=i);return r}minColumn(t){if((0,f.bp)(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){(0,f.bp)(this,t),(0,f.cT)(this);let e=this.get(0,t),r=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t),r[0]=i);return r}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let r=0;r<t;r++)e.push(this.get(r,r));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)e+=this.get(t,r)*this.get(t,r);return Math.sqrt(e)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){c.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let r=0;for(let i=0;i<e.length;i++)r+=e[i]*t[i];return r}mmul(t){t=m.checkMatrix(t);let e=this.rows,r=this.columns,i=t.columns,n=new m(e,i),s=new Float64Array(r);for(let a=0;a<i;a++){for(let e=0;e<r;e++)s[e]=t.get(e,a);for(let t=0;t<e;t++){let e=0;for(let i=0;i<r;i++)e+=this.get(t,i)*s[i];n.set(t,a,e)}}return n}strassen2x2(t){t=m.checkMatrix(t);let e=new m(2,2);const r=this.get(0,0),i=t.get(0,0),n=this.get(0,1),s=t.get(0,1),a=this.get(1,0),o=t.get(1,0),h=this.get(1,1),l=t.get(1,1),u=(r+h)*(i+l),f=(a+h)*i,c=r*(s-l),d=h*(o-i),p=(r+n)*l,g=u+d-p+(n-h)*(o+l),w=c+p,b=f+d,_=u-f+c+(a-r)*(i+s);return e.set(0,0,g),e.set(0,1,w),e.set(1,0,b),e.set(1,1,_),e}strassen3x3(t){t=m.checkMatrix(t);let e=new m(3,3);const r=this.get(0,0),i=this.get(0,1),n=this.get(0,2),s=this.get(1,0),a=this.get(1,1),o=this.get(1,2),h=this.get(2,0),l=this.get(2,1),u=this.get(2,2),f=t.get(0,0),c=t.get(0,1),d=t.get(0,2),p=t.get(1,0),g=t.get(1,1),w=t.get(1,2),b=t.get(2,0),_=t.get(2,1),y=t.get(2,2),v=(r-s)*(-c+g),x=(-r+s+a)*(f-c+g),k=(s+a)*(-f+c),M=r*f,A=(-r+h+l)*(f-d+w),E=(-r+h)*(d-w),S=(h+l)*(-f+d),D=(-n+l+u)*(g+b-_),I=(n-u)*(g-_),C=n*b,R=(l+u)*(-b+_),B=(-n+a+o)*(w+b-y),P=(n-o)*(w-y),z=(a+o)*(-b+y),T=M+C+i*p,U=(r+i+n-s-a-l-u)*g+x+k+M+D+C+R,F=M+A+S+(r+i+n-a-o-h-l)*w+C+B+z,O=v+a*(-f+c+p-g-w-b+y)+x+M+C+B+P,L=v+x+k+M+o*_,N=C+B+P+z+s*d,Z=M+A+E+l*(-f+d+p-g-w-b+_)+D+I+C,Y=D+I+C+R+h*c,V=M+A+E+S+u*y;return e.set(0,0,T),e.set(0,1,U),e.set(0,2,F),e.set(1,0,O),e.set(1,1,L),e.set(1,2,N),e.set(2,0,Z),e.set(2,1,Y),e.set(2,2,V),e}mmulStrassen(t){t=m.checkMatrix(t);let e=this.clone(),r=e.rows,i=e.columns,n=t.rows,s=t.columns;function a(t,e,r){let i=t.rows,n=t.columns;if(i===e&&n===r)return t;{let i=c.zeros(e,r);return i=i.setSubMatrix(t,0,0),i}}i!==n&&console.warn(`Multiplying ${r} x ${i} and ${n} x ${s} matrix: dimensions do not match.`);let o=Math.max(r,n),h=Math.max(i,s);return e=a(e,o,h),function t(e,r,i,n){if(i<=512||n<=512)return e.mmul(r);i%2==1&&n%2==1?(e=a(e,i+1,n+1),r=a(r,i+1,n+1)):i%2==1?(e=a(e,i+1,n),r=a(r,i+1,n)):n%2==1&&(e=a(e,i,n+1),r=a(r,i,n+1));let s=parseInt(e.rows/2,10),o=parseInt(e.columns/2,10),h=e.subMatrix(0,s-1,0,o-1),l=r.subMatrix(0,s-1,0,o-1),u=e.subMatrix(0,s-1,o,e.columns-1),f=r.subMatrix(0,s-1,o,r.columns-1),d=e.subMatrix(s,e.rows-1,0,o-1),m=r.subMatrix(s,r.rows-1,0,o-1),p=e.subMatrix(s,e.rows-1,o,e.columns-1),g=r.subMatrix(s,r.rows-1,o,r.columns-1),w=t(c.add(h,p),c.add(l,g),s,o),b=t(c.add(d,p),l,s,o),_=t(h,c.sub(f,g),s,o),y=t(p,c.sub(m,l),s,o),v=t(c.add(h,u),g,s,o),x=t(c.sub(d,h),c.add(l,f),s,o),k=t(c.sub(u,p),c.add(m,g),s,o),M=c.add(w,y);M.sub(v),M.add(k);let A=c.add(_,v),E=c.add(b,y),S=c.sub(w,b);S.add(_),S.add(x);let D=c.zeros(2*M.rows,2*M.columns);return D=D.setSubMatrix(M,0,0),D=D.setSubMatrix(A,M.rows,0),D=D.setSubMatrix(E,0,M.columns),D=D.setSubMatrix(S,M.rows,M.columns),D.subMatrix(0,i-1,0,n-1)}(e,t=a(t,o,h),o,h)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let i=new m(this.rows,this.columns);for(let t=0;t<this.rows;t++){const n=this.getRow(t);n.length>0&&a(n,{min:e,max:r,output:n}),i.setRow(t,n)}return i}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let i=new m(this.rows,this.columns);for(let t=0;t<this.columns;t++){const n=this.getColumn(t);n.length&&a(n,{min:e,max:r,output:n}),i.setColumn(t,n)}return i}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let r=0;r<t;r++){let t=this.get(e,r),i=this.get(e,this.columns-1-r);this.set(e,r,i),this.set(e,this.columns-1-r,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let r=0;r<t;r++){let t=this.get(r,e),i=this.get(this.rows-1-r,e);this.set(r,e,i),this.set(this.rows-1-r,e,t)}return this}kroneckerProduct(t){t=m.checkMatrix(t);let e=this.rows,r=this.columns,i=t.rows,n=t.columns,s=new m(e*i,r*n);for(let a=0;a<e;a++)for(let e=0;e<r;e++)for(let r=0;r<i;r++)for(let o=0;o<n;o++)s.set(i*a+r,n*e+o,this.get(a,e)*t.get(r,o));return s}kroneckerSum(t){if(t=m.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,r=t.rows,i=this.kroneckerProduct(m.eye(r,r)),n=m.eye(e,e).kroneckerProduct(t);return i.add(n)}transpose(){let t=new m(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t=d){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=d){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,i){(0,f.J5)(this,t,e,r,i);let n=new m(e-t+1,i-r+1);for(let s=t;s<=e;s++)for(let e=r;e<=i;e++)n.set(s-t,e-r,this.get(s,e));return n}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");let i=new m(t.length,r-e+1);for(let n=0;n<t.length;n++)for(let s=e;s<=r;s++){if(t[n]<0||t[n]>=this.rows)throw new RangeError(`Row index out of range: ${t[n]}`);i.set(n,s-e,this.get(t[n],s))}return i}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");let i=new m(r-e+1,t.length);for(let n=0;n<t.length;n++)for(let s=e;s<=r;s++){if(t[n]<0||t[n]>=this.columns)throw new RangeError(`Column index out of range: ${t[n]}`);i.set(s-e,n,this.get(s,t[n]))}return i}setSubMatrix(t,e,r){if((t=m.checkMatrix(t)).isEmpty())return this;let i=e+t.rows-1,n=r+t.columns-1;(0,f.J5)(this,e,i,r,n);for(let i=0;i<t.rows;i++)for(let n=0;n<t.columns;n++)this.set(e+i,r+n,t.get(i,n));return this}selection(t,e){let r=(0,f.N2)(this,t,e),i=new m(t.length,e.length);for(let t=0;t<r.row.length;t++){let e=r.row[t];for(let n=0;n<r.column.length;n++){let s=r.column[n];i.set(t,n,this.get(e,s))}}return i}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let r=0;r<t;r++)e+=this.get(r,r);return e}clone(){let t=new m(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}sum(t){switch(t){case"row":return function(t){let e=(0,f.B4)(t.rows);for(let r=0;r<t.rows;++r)for(let i=0;i<t.columns;++i)e[r]+=t.get(r,i);return e}(this);case"column":return function(t){let e=(0,f.B4)(t.columns);for(let r=0;r<t.rows;++r)for(let i=0;i<t.columns;++i)e[i]+=t.get(r,i);return e}(this);case void 0:return function(t){let e=0;for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)e+=t.get(r,i);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=(0,f.B4)(t.rows,1);for(let r=0;r<t.rows;++r)for(let i=0;i<t.columns;++i)e[r]*=t.get(r,i);return e}(this);case"column":return function(t){let e=(0,f.B4)(t.columns,1);for(let r=0;r<t.rows;++r)for(let i=0;i<t.columns;++i)e[i]*=t.get(r,i);return e}(this);case void 0:return function(t){let e=1;for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)e*=t.get(r,i);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:r=!0,mean:i=this.mean(t)}=e;if("boolean"!=typeof r)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(i))throw new TypeError("mean must be an array");return function(t,e,r){const i=t.rows,n=t.columns,s=[];for(let a=0;a<i;a++){let i=0,o=0,h=0;for(let e=0;e<n;e++)h=t.get(a,e)-r[a],i+=h,o+=h*h;e?s.push((o-i*i/n)/(n-1)):s.push((o-i*i/n)/n)}return s}(this,r,i);case"column":if(!Array.isArray(i))throw new TypeError("mean must be an array");return function(t,e,r){const i=t.rows,n=t.columns,s=[];for(let a=0;a<n;a++){let n=0,o=0,h=0;for(let e=0;e<i;e++)h=t.get(e,a)-r[a],n+=h,o+=h*h;e?s.push((o-n*n/i)/(i-1)):s.push((o-n*n/i)/i)}return s}(this,r,i);case void 0:if("number"!=typeof i)throw new TypeError("mean must be a number");return function(t,e,r){const i=t.rows,n=t.columns,s=i*n;let a=0,o=0,h=0;for(let e=0;e<i;e++)for(let i=0;i<n;i++)h=t.get(e,i)-r,a+=h,o+=h*h;return e?(o-a*a/s)/(s-1):(o-a*a/s)/s}(this,r,i);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(let t=0;t<r.length;t++)r[t]=Math.sqrt(r[t]);return r}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:r=this.mean(t)}=e;switch(t){case"row":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)t.set(r,i,t.get(r,i)-e[r])}(this,r),this;case"column":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)t.set(r,i,t.get(r,i)-e[i])}(this,r),this;case void 0:if("number"!=typeof r)throw new TypeError("center must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)t.set(r,i,t.get(r,i)-e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let r=e.scale;switch(t){case"row":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.rows;r++){let i=0;for(let e=0;e<t.columns;e++)i+=Math.pow(t.get(r,e),2)/(t.columns-1);e.push(Math.sqrt(i))}return e}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)t.set(r,i,t.get(r,i)/e[r])}(this,r),this;case"column":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.columns;r++){let i=0;for(let e=0;e<t.rows;e++)i+=Math.pow(t.get(e,r),2)/(t.rows-1);e.push(Math.sqrt(i))}return e}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)t.set(r,i,t.get(r,i)/e[i])}(this,r),this;case void 0:if(void 0===r)r=function(t){const e=t.size-1;let r=0;for(let i=0;i<t.columns;i++)for(let n=0;n<t.rows;n++)r+=Math.pow(t.get(n,i),2)/e;return Math.sqrt(r)}(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)t.set(r,i,t.get(r,i)/e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return l(this,t)}}function d(t,e){return t-e}c.prototype.klass="Matrix","undefined"!=typeof Symbol&&(c.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return l(this)}),c.random=c.rand,c.randomInt=c.randInt,c.diagonal=c.diag,c.prototype.diagonal=c.prototype.diag,c.identity=c.eye,c.prototype.negate=c.prototype.neg,c.prototype.tensorProduct=c.prototype.kroneckerProduct;class m extends c{constructor(t,e){if(super(),m.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let r=0;r<t;r++)this.data.push(new Float64Array(e))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const r=t;if("number"!=typeof(e=(t=r.length)?r[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<t;i++){if(r[i].length!==e)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(r[i]))}}}this.rows=t,this.columns=e}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}removeRow(t){return(0,f.zb)(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),(0,f.zb)(this,t,!0),e=Float64Array.from((0,f.on)(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){(0,f.bp)(this,t);for(let e=0;e<this.rows;e++){const r=new Float64Array(this.columns-1);for(let i=0;i<t;i++)r[i]=this.data[e][i];for(let i=t+1;i<this.columns;i++)r[i-1]=this.data[e][i];this.data[e]=r}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),(0,f.bp)(this,t,!0),e=(0,f.Um)(this,e);for(let r=0;r<this.rows;r++){const i=new Float64Array(this.columns+1);let n=0;for(;n<t;n++)i[n]=this.data[r][n];for(i[n++]=e[r];n<this.columns+1;n++)i[n]=this.data[r][n-1];this.data[r]=i}return this.columns+=1,this}}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t.get(e,r));return this},t.add=function(t,r){return new e(t).add(r)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t.get(e,r));return this},t.sub=function(t,r){return new e(t).sub(r)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t.get(e,r));return this},t.mul=function(t,r){return new e(t).mul(r)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t.get(e,r));return this},t.div=function(t,r){return new e(t).div(r)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t.get(e,r));return this},t.mod=function(t,r){return new e(t).mod(r)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t.get(e,r));return this},t.and=function(t,r){return new e(t).and(r)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t.get(e,r));return this},t.or=function(t,r){return new e(t).or(r)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t.get(e,r));return this},t.xor=function(t,r){return new e(t).xor(r)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t.get(e,r));return this},t.leftShift=function(t,r){return new e(t).leftShift(r)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t.get(e,r));return this},t.signPropagatingRightShift=function(t,r){return new e(t).signPropagatingRightShift(r)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t.get(e,r));return this},t.rightShift=function(t,r){return new e(t).rightShift(r)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,r){return new e(t).pow(r)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t.get(e,r)));return this}}(c,m)},3018:(t,e,r)=>{"use strict";function i(t,e,r){let i=r?t.rows:t.rows-1;if(e<0||e>i)throw new RangeError("Row index out of range")}function n(t,e,r){let i=r?t.columns:t.columns-1;if(e<0||e>i)throw new RangeError("Column index out of range")}function s(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function a(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function o(t,e,r){return{row:h(t,e),column:l(t,r)}}function h(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some((e=>e<0||e>=t.rows)))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function l(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");if(e.some((e=>e<0||e>=t.columns)))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function u(t,e,r,i,n){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(c("startRow",e),c("endRow",r),c("startColumn",i),c("endColumn",n),e>r||i>n||e<0||e>=t.rows||r<0||r>=t.rows||i<0||i>=t.columns||n<0||n>=t.columns)throw new RangeError("Submatrix indices are out of range")}function f(t,e=0){let r=[];for(let i=0;i<t;i++)r.push(e);return r}function c(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function d(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}r.d(e,{zb:()=>i,bp:()=>n,on:()=>s,Um:()=>a,N2:()=>o,ZR:()=>h,g:()=>l,J5:()=>u,B4:()=>f,cT:()=>d})},4920:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});var i=r(1883);class n extends i.X{constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}}},5922:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});var i=r(4920);class n extends i.Z{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}},1548:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});var i=r(1883);class n extends i.X{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}}},2664:t=>{t.exports=function(t,e){t=t||0;for(var r=new Array(t),i=0;i<t;i++)r[i]=e;return r}},995:t=>{t.exports=function(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,1+(t|=t>>16))}},6563:(t,e)=>{"use strict";function r(t){if("number"!=typeof t)throw new TypeError("Expected a number")}e.j=(t,e)=>(r(t),r(e),Number.isNaN(t)?-1:Number.isNaN(e)?1:t-e)},7708:t=>{function e(t,e){if(!(t instanceof Blob))throw new TypeError("Must be a File or Blob");return new Promise((function(r,i){var n=new FileReader;n.onload=function(t){r(t.target.result)},n.onerror=function(e){i(new Error("Error reading"+t.name+": "+e.target.result))},n["readAs"+e](t)}))}t.exports={readAsDataURL:function(t){return e(t,"DataURL")},readAsText:function(t){return e(t,"Text")},readAsArrayBuffer:function(t){return e(t,"ArrayBuffer")}}},146:(t,e,r)=>{"use strict";var i=r(8005),n=r(6740),s=r(5442),a=r(7972);function o(t,e){for(var r=new Array(t.length-1),i=1;i<t.length;++i)for(var n=r[i-1]=new Array(t.length-1),s=0,a=0;s<t.length;++s)s!==e&&(n[a++]=t[i][s]);return r}function h(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",h(t.slice(0,e)),",",h(t.slice(e)),")"].join("")}function l(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",h(l(o(t,r))),",",(i=r,1&i?"-":""),t[0][r],")"].join(""));return e;var i}function u(t){for(var e=[],r=[],u=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var i=0;i<t;++i)e[r][i]=["m",i,"[",t-r-1,"]"].join("")}return e}(t),f=[],c=0;c<t;++c)0==(1&c)?e.push.apply(e,l(o(u,c))):r.push.apply(r,l(o(u,c))),f.push("m"+c);var d=h(e),m=h(r),p="orientation"+t+"Exact",g=["function ",p,"(",f.join(),"){var p=",d,",n=",m,",d=sub(p,n);return d[d.length-1];};return ",p].join("");return new Function("sum","prod","scale","sub",g)(n,i,s,a)}var f=u(3),c=u(4),d=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var i,n=(t[1]-r[1])*(e[0]-r[0]),s=(t[0]-r[0])*(e[1]-r[1]),a=n-s;if(n>0){if(s<=0)return a;i=n+s}else{if(!(n<0))return a;if(s>=0)return a;i=-(n+s)}var o=33306690738754716e-32*i;return a>=o||a<=-o?a:f(t,e,r)},function(t,e,r,i){var n=t[0]-i[0],s=e[0]-i[0],a=r[0]-i[0],o=t[1]-i[1],h=e[1]-i[1],l=r[1]-i[1],u=t[2]-i[2],f=e[2]-i[2],d=r[2]-i[2],m=s*l,p=a*h,g=a*o,w=n*l,b=n*h,_=s*o,y=u*(m-p)+f*(g-w)+d*(b-_),v=7771561172376103e-31*((Math.abs(m)+Math.abs(p))*Math.abs(u)+(Math.abs(g)+Math.abs(w))*Math.abs(f)+(Math.abs(b)+Math.abs(_))*Math.abs(d));return y>v||-y>v?y:c(t,e,r,i)}];function m(t){var e=d[t.length];return e||(e=d[t.length]=u(t.length)),e.apply(void 0,t)}!function(){for(;d.length<=5;)d.push(u(d.length));for(var e=[],r=["slow"],i=0;i<=5;++i)e.push("a"+i),r.push("o"+i);var n=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)n.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(n.join(""));var s=Function.apply(void 0,r);for(t.exports=s.apply(void 0,[m].concat(d)),i=0;i<=5;++i)t.exports[i]=d[i]}()},4707:(t,e,r)=>{t.exports=function(t,e){for(var r=e[0],n=e[1],s=t.length,a=1,o=s,h=0,l=s-1;h<o;l=h++){var u=t[h],f=t[l],c=u[1],d=f[1];if(d<c){if(d<n&&n<c){if(0===(g=i(u,f,e)))return 0;a^=0<g|0}else if(n===c){var m=(p=t[(h+1)%s])[1];if(c<m){if(0===(g=i(u,f,e)))return 0;a^=0<g|0}}}else if(c<d){if(c<n&&n<d){if(0===(g=i(u,f,e)))return 0;a^=g<0|0}else if(n===c){var p=t[(h+1)%s];if((m=p[1])<c){var g;if(0===(g=i(u,f,e)))return 0;a^=g<0|0}}}else if(n===c){var w=Math.min(u[0],f[0]),b=Math.max(u[0],f[0]);if(0===h){for(;l>0;){var _=(l+s-1)%s;if((x=t[_])[1]!==n)break;var y=x[0];w=Math.min(w,y),b=Math.max(b,y),l=_}if(0===l)return w<=r&&r<=b?0:1;o=l+1}for(var v=t[(l+s-1)%s][1];h+1<o;){var x;if((x=t[h+1])[1]!==n)break;y=x[0],w=Math.min(w,y),b=Math.max(b,y),h+=1}if(w<=r&&r<=b)return 0;var k=t[(h+1)%s][1];r<w&&v<n!=k<n&&(a^=1)}}return 2*a-1};var i=r(146)},5442:(t,e,r)=>{"use strict";var i=r(8005),n=r(6359);t.exports=function(t,e){var r=t.length;if(1===r){var s=i(t[0],e);return s[0]?s:[s[1]]}var a=new Array(2*r),o=[.1,.1],h=[.1,.1],l=0;i(t[0],e,o),o[0]&&(a[l++]=o[0]);for(var u=1;u<r;++u){i(t[u],e,h);var f=o[1];n(f,h[0],o),o[0]&&(a[l++]=o[0]);var c=h[1],d=o[1],m=c+d,p=d-(m-c);o[1]=m,p&&(a[l++]=p)}return o[1]&&(a[l++]=o[1]),0===l&&(a[l++]=0),a.length=l,a}},7972:t=>{"use strict";t.exports=function(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return function(t,e){var r=t+e,i=r-t,n=t-(r-i)+(e-i);return n?[n,r]:[r]}(t[0],-e[0]);var n,s,a=new Array(r+i),o=0,h=0,l=0,u=Math.abs,f=t[h],c=u(f),d=-e[l],m=u(d);c<m?(s=f,(h+=1)<r&&(c=u(f=t[h]))):(s=d,(l+=1)<i&&(m=u(d=-e[l]))),h<r&&c<m||l>=i?(n=f,(h+=1)<r&&(c=u(f=t[h]))):(n=d,(l+=1)<i&&(m=u(d=-e[l])));for(var p,g,w=n+s,b=w-n,_=s-b,y=_,v=w;h<r&&l<i;)c<m?(n=f,(h+=1)<r&&(c=u(f=t[h]))):(n=d,(l+=1)<i&&(m=u(d=-e[l]))),(_=(s=y)-(b=(w=n+s)-n))&&(a[o++]=_),y=v-((p=v+w)-(g=p-v))+(w-g),v=p;for(;h<r;)(_=(s=y)-(b=(w=(n=f)+s)-n))&&(a[o++]=_),y=v-((p=v+w)-(g=p-v))+(w-g),v=p,(h+=1)<r&&(f=t[h]);for(;l<i;)(_=(s=y)-(b=(w=(n=d)+s)-n))&&(a[o++]=_),y=v-((p=v+w)-(g=p-v))+(w-g),v=p,(l+=1)<i&&(d=-e[l]);return y&&(a[o++]=y),v&&(a[o++]=v),o||(a[o++]=0),a.length=o,a}},6740:t=>{"use strict";t.exports=function(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return function(t,e){var r=t+e,i=r-t,n=t-(r-i)+(e-i);return n?[n,r]:[r]}(t[0],e[0]);var n,s,a=new Array(r+i),o=0,h=0,l=0,u=Math.abs,f=t[h],c=u(f),d=e[l],m=u(d);c<m?(s=f,(h+=1)<r&&(c=u(f=t[h]))):(s=d,(l+=1)<i&&(m=u(d=e[l]))),h<r&&c<m||l>=i?(n=f,(h+=1)<r&&(c=u(f=t[h]))):(n=d,(l+=1)<i&&(m=u(d=e[l])));for(var p,g,w=n+s,b=w-n,_=s-b,y=_,v=w;h<r&&l<i;)c<m?(n=f,(h+=1)<r&&(c=u(f=t[h]))):(n=d,(l+=1)<i&&(m=u(d=e[l]))),(_=(s=y)-(b=(w=n+s)-n))&&(a[o++]=_),y=v-((p=v+w)-(g=p-v))+(w-g),v=p;for(;h<r;)(_=(s=y)-(b=(w=(n=f)+s)-n))&&(a[o++]=_),y=v-((p=v+w)-(g=p-v))+(w-g),v=p,(h+=1)<r&&(f=t[h]);for(;l<i;)(_=(s=y)-(b=(w=(n=d)+s)-n))&&(a[o++]=_),y=v-((p=v+w)-(g=p-v))+(w-g),v=p,(l+=1)<i&&(d=e[l]);return y&&(a[o++]=y),v&&(a[o++]=v),o||(a[o++]=0),a.length=o,a}},9798:function(){"use strict";!function(t){if(t.TextEncoder&&t.TextDecoder)return!1;function e(t="utf-8"){if("utf-8"!==t)throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${t}') is invalid.`)}function r(t="utf-8",e={fatal:!1}){if("utf-8"!==t)throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${t}') is invalid.`);if(e.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,e={stream:!1}){if(e.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let r=0;const i=t.length;let n=0,s=Math.max(32,i+(i>>1)+7),a=new Uint8Array(s>>3<<3);for(;r<i;){let e=t.charCodeAt(r++);if(e>=55296&&e<=56319){if(r<i){const i=t.charCodeAt(r);56320==(64512&i)&&(++r,e=((1023&e)<<10)+(1023&i)+65536)}if(e>=55296&&e<=56319)continue}if(n+4>a.length){s+=8,s*=1+r/t.length*2,s=s>>3<<3;const e=new Uint8Array(s);e.set(a),a=e}if(0!=(4294967168&e)){if(0==(4294965248&e))a[n++]=e>>6&31|192;else if(0==(4294901760&e))a[n++]=e>>12&15|224,a[n++]=e>>6&63|128;else{if(0!=(4292870144&e))continue;a[n++]=e>>18&7|240,a[n++]=e>>12&63|128,a[n++]=e>>6&63|128}a[n++]=63&e|128}else a[n++]=e}return a.slice(0,n)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1}),r.prototype.decode=function(t,e={stream:!1}){if(e.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const r=new Uint8Array(t);let i=0;const n=r.length,s=[];for(;i<n;){const t=r[i++];if(0===t)break;if(0==(128&t))s.push(t);else if(192==(224&t)){const e=63&r[i++];s.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&r[i++],n=63&r[i++];s.push((31&t)<<12|e<<6|n)}else if(240==(248&t)){let e=(7&t)<<18|(63&r[i++])<<12|(63&r[i++])<<6|63&r[i++];e>65535&&(e-=65536,s.push(e>>>10&1023|55296),e=56320|1023&e),s.push(e)}}return String.fromCharCode.apply(null,s)},t.TextEncoder=e,t.TextDecoder=r}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this)},8005:t=>{"use strict";t.exports=function(t,r,i){var n=t*r,s=e*t,a=s-(s-t),o=t-a,h=e*r,l=h-(h-r),u=r-l,f=o*u-(n-a*l-o*l-a*u);return i?(i[0]=f,i[1]=n,i):[f,n]};var e=+(Math.pow(2,27)+1)},6359:t=>{"use strict";t.exports=function(t,e,r){var i=t+e,n=i-t,s=e-n,a=t-(i-n);return r?(r[0]=a+s,r[1]=i,r):[a+s,i]}},7458:function(t,e,r){var i;t=r.nmd(t),function(n){var s=(t&&t.exports,"object"==typeof r.g&&r.g);s.global!==s&&s.window;var a,o,h,l=String.fromCharCode;function u(t){for(var e,r,i=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}function f(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function c(t,e){return l(t>>e&63|128)}function d(t){if(0==(4294967168&t))return l(t);var e="";return 0==(4294965248&t)?e=l(t>>6&31|192):0==(4294901760&t)?(f(t),e=l(t>>12&15|224),e+=c(t,6)):0==(4292870144&t)&&(e=l(t>>18&7|240),e+=c(t,12),e+=c(t,6)),e+l(63&t|128)}function m(){if(h>=o)throw Error("Invalid byte index");var t=255&a[h];if(h++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function p(){var t,e;if(h>o)throw Error("Invalid byte index");if(h==o)return!1;if(t=255&a[h],h++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|m())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|m()<<6|m())>=2048)return f(e),e;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|m()<<12|m()<<6|m())>=65536&&e<=1114111)return e;throw Error("Invalid UTF-8 detected")}var g={version:"2.1.2",encode:function(t){for(var e=u(t),r=e.length,i=-1,n="";++i<r;)n+=d(e[i]);return n},decode:function(t){a=u(t),o=a.length,h=0;for(var e,r=[];!1!==(e=p());)r.push(e);return function(t){for(var e,r=t.length,i=-1,n="";++i<r;)(e=t[i])>65535&&(n+=l((e-=65536)>>>10&1023|55296),e=56320|1023&e),n+=l(e);return n}(r)}};void 0===(i=function(){return g}.call(e,r,e,t))||(t.exports=i)}()},6732:(t,e,r)=>{"use strict";var i=r(7963),n=navigator.hardwareConcurrency||1;function s(t,e){if("string"!=typeof t&&"function"!=typeof t)throw new TypeError("func argument must be a function");if(void 0===e&&(e={}),"object"!=typeof e||null===e)throw new TypeError("options argument must be an object");this._workerCode=t.toString(),void 0===e.maxWorkers||"auto"===e.maxWorkers?this._numWorkers=Math.min(n-1,1):e.maxWorkers>0?this._numWorkers=Math.min(e.maxWorkers,n):this._numWorkers=n,this._workers=new Map,this._timeout=e.timeout||0,this._terminateOnError=!!e.terminateOnError;var r=e.deps;"string"==typeof r&&(r=[r]),Array.isArray(r)||(r=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(r)}Function.prototype,s.prototype._init=function(t){for(var e=i.newWorkerURL(this._workerCode,t),r=0;r<this._numWorkers;r++){var n=new Worker(e);n.onmessage=this._onmessage.bind(this,n),n.onerror=this._onerror.bind(this,n),n.running=!1,n.id=r,this._workers.set(n,null)}URL.revokeObjectURL(e)},s.prototype._onerror=function(t,e){if(!this._terminated){this._working--,t.running=!1;var r=this._workers.get(t);r&&r[1](e.message),this._workers.set(t,null),this._terminateOnError?this.terminate():this._exec()}},s.prototype._onmessage=function(t,e){if(!this._terminated){this._working--,t.running=!1;var r=this._workers.get(t);r&&r[0](e.data.data),this._workers.set(t,null),this._exec()}},s.prototype._exec=function(){for(var t of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!t.running)for(var e=0;e<this._waiting.length;e++){var r=this._waiting[e];if("number"!=typeof r[4]||r[4]===t.id){this._waiting.splice(e,1),t.postMessage({action:"exec",event:r[0],args:r[1]},r[2]),t.running=!0,t.time=Date.now(),this._workers.set(t,r[3]),this._working++;break}}}},s.prototype.terminate=function(){if(!this._terminated){for(var t of this._workers)t[0].terminate(),t[1]&&t[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},s.prototype.postAll=function(t,e){if(this._terminated)throw new Error("Cannot post (terminated)");var r=[];for(var i of this._workers.keys())r.push(this.post(t,e,[],i.id));return Promise.all(r)},s.prototype.post=function(t,e,r,i){void 0===e&&(e=[]),void 0===r&&(r=[]),Array.isArray(e)||(e=[e]),Array.isArray(r)||(r=[r]);var n=this;return new Promise((function(s,a){if(n._terminated)throw new Error("Cannot post (terminated)");n._waiting.push([t,e,r,[s,a],i]),n._exec()}))},t.exports=s},7963:(t,e)=>{"use strict";var r=function(){function t(){this._listeners={}}self.window=self,t.prototype.on=function(t,e){if(this._listeners[t])throw new RangeError("there is already a listener for "+t);if("function"!=typeof e)throw new TypeError("callback argument must be a function");this._listeners[t]=e},t.prototype._send=function(t,e,r){void 0===r?r=[]:Array.isArray(r)||(r=[r]),self.postMessage({id:t,data:e},r)},t.prototype._trigger=function(t,e){if(!this._listeners[t])throw new Error("event "+t+" is not defined");this._listeners[t].apply(null,e)};var e=new t;self.onmessage=function(t){switch(t.data.action){case"exec":t.data.args.unshift((function(r,i){e._send(t.data.id,r,i)})),e._trigger(t.data.event,t.data.args);break;case"ping":e._send(t.data.id,"pong");break;default:throw new Error("unexpected action: "+t.data.action)}}}.toString().split('"CODE";');e.newWorkerURL=function(t,e){var i=new Blob(["(",r[0],"importScripts.apply(self, "+JSON.stringify(e)+");\n","(",t,")();",r[1],")();"],{type:"application/javascript"});return URL.createObjectURL(i)}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var __webpack_exports__={};(()=>{"use strict";var t={};__webpack_require__.r(t),__webpack_require__.d(t,{CMYK:()=>fi,GREY:()=>oi,HSL:()=>li,HSV:()=>ui,RGB:()=>hi});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{tagsById:()=>xi,tagsByName:()=>ki});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{tagsById:()=>Mi,tagsByName:()=>Ai});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{tagsById:()=>Ei,tagsByName:()=>Si});var n=__webpack_require__(5733),s=__webpack_require__.n(n);const a={getBit(t){return this.data[o(t)]&1<<h(t)?1:0},setBit(t){this.data[o(t)]|=1<<h(t)},clearBit(t){this.data[o(t)]&=~(1<<h(t))},toggleBit(t){this.data[o(t)]^=1<<h(t)},getBitXY(t,e){return t>=this.width||e>=this.height?0:this.getBit(e*this.width+t)},setBitXY(t,e){this.setBit(e*this.width+t)},clearBitXY(t,e){this.clearBit(e*this.width+t)},toggleBitXY(t,e){this.toggleBit(e*this.width+t)}};function o(t){return t>>3}function h(t){return 7-(7&t)}function l(t,e,r){return"function"==typeof t.toBlob?new Promise((function(i){t.toBlob(i,e,r)})):Promise.resolve(function(t){var e=t.match(/data:([^;]+)/)[1],r=t.replace(/^[^,]+,/,"");return function(t,e){t=t||[],"string"==typeof(e=e||{})&&(e={type:e});try{return new Blob(t,e)}catch(n){if("TypeError"!==n.name)throw n;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(e.type)}}([u(atob(r))],{type:e})}(t.toDataURL(e,r)))}function u(t){for(var e=t.length,r=new ArrayBuffer(e),i=new Uint8Array(r),n=-1;++n<e;)i[n]=t.charCodeAt(n);return r}var f=__webpack_require__(4665);__webpack_require__(7638);const c=new TextDecoder("utf-8"),d=new TextEncoder;class m{constructor(t=8192,e={}){let r=!1;"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=e.offset?e.offset>>>0:0,n=t.byteLength-i;let s=i;(ArrayBuffer.isView(t)||t instanceof m)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+i),t=t.buffer),this.lastWrittenByte=r?n:0,this.buffer=t,this.length=n,this.byteLength=n,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,n),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const e=2*(this.offset+t),r=new Uint8Array(e);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){const e=new Uint8Array(t);for(let r=0;r<t;r++)e[r]=this.readByte();return e}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let r=0;r<t;r++)e+=this.readChar();return e}readUtf8(t=1){return e=this.readBytes(t),c.decode(e);var e}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(function(t){return d.encode(t)}(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function p(t){let e=t.length;for(;--e>=0;)t[e]=0}const g=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),b=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),y=new Array(576);p(y);const v=new Array(60);p(v);const x=new Array(512);p(x);const k=new Array(256);p(k);const M=new Array(29);p(M);const A=new Array(30);function E(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let S,D,I;function C(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}p(A);const R=t=>t<256?x[t]:x[256+(t>>>7)],B=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},P=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,B(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},z=(t,e,r)=>{P(t,r[2*e],r[2*e+1])},T=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},U=(t,e,r)=>{const i=new Array(16);let n,s,a=0;for(n=1;n<=15;n++)i[n]=a=a+r[n-1]<<1;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=T(i[e]++,e))}},F=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},O=t=>{t.bi_valid>8?B(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},L=(t,e,r,i)=>{const n=2*e,s=2*r;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]},N=(t,e,r)=>{const i=t.heap[r];let n=r<<1;for(;n<=t.heap_len&&(n<t.heap_len&&L(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!L(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i},Z=(t,e,r)=>{let i,n,s,a,o=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?z(t,n,e):(s=k[n],z(t,s+256+1,e),a=g[s],0!==a&&(n-=M[s],P(t,n,a)),i--,s=R(i),z(t,s,r),a=w[s],0!==a&&(i-=A[s],P(t,i,a)))}while(o<t.last_lit);z(t,256,e)},Y=(t,e)=>{const r=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,o,h,l=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<s;a++)0!==r[2*a]?(t.heap[++t.heap_len]=l=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)h=t.heap[++t.heap_len]=l<2?++l:0,r[2*h]=1,t.depth[h]=0,t.opt_len--,n&&(t.static_len-=i[2*h+1]);for(e.max_code=l,a=t.heap_len>>1;a>=1;a--)N(t,r,a);h=s;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],N(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,r[2*h]=r[2*a]+r[2*o],t.depth[h]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,r[2*a+1]=r[2*o+1]=h,t.heap[1]=h++,N(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,h=e.stat_desc.max_length;let l,u,f,c,d,m,p=0;for(c=0;c<=15;c++)t.bl_count[c]=0;for(r[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<573;l++)u=t.heap[l],c=r[2*r[2*u+1]+1]+1,c>h&&(c=h,p++),r[2*u+1]=c,u>i||(t.bl_count[c]++,d=0,u>=o&&(d=a[u-o]),m=r[2*u],t.opt_len+=m*(c+d),s&&(t.static_len+=m*(n[2*u+1]+d)));if(0!==p){do{for(c=h-1;0===t.bl_count[c];)c--;t.bl_count[c]--,t.bl_count[c+1]+=2,t.bl_count[h]--,p-=2}while(p>0);for(c=h;0!==c;c--)for(u=t.bl_count[c];0!==u;)f=t.heap[--l],f>i||(r[2*f+1]!==c&&(t.opt_len+=(c-r[2*f+1])*r[2*f],r[2*f+1]=c),u--)}})(t,e),U(r,l,t.bl_count)},V=(t,e,r)=>{let i,n,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=e[2*(i+1)+1],++o<h&&n===a||(o<l?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===a?(h=138,l=3):n===a?(h=6,l=3):(h=7,l=4))},j=(t,e,r)=>{let i,n,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),i=0;i<=r;i++)if(n=a,a=e[2*(i+1)+1],!(++o<h&&n===a)){if(o<l)do{z(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(z(t,n,t.bl_tree),o--),z(t,16,t.bl_tree),P(t,o-3,2)):o<=10?(z(t,17,t.bl_tree),P(t,o-3,3)):(z(t,18,t.bl_tree),P(t,o-11,7));o=0,s=n,0===a?(h=138,l=3):n===a?(h=6,l=3):(h=7,l=4)}};let X=!1;const G=(t,e,r,i)=>{P(t,0+(i?1:0),3),((t,e,r,i)=>{O(t),B(t,r),B(t,~r),t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r})(t,e,r)};var q={_tr_init:t=>{X||((()=>{let t,e,r,i,n;const s=new Array(16);for(r=0,i=0;i<28;i++)for(M[i]=r,t=0;t<1<<g[i];t++)k[r++]=i;for(k[r-1]=i,n=0,i=0;i<16;i++)for(A[i]=n,t=0;t<1<<w[i];t++)x[n++]=i;for(n>>=7;i<30;i++)for(A[i]=n<<7,t=0;t<1<<w[i]-7;t++)x[256+n++]=i;for(e=0;e<=15;e++)s[e]=0;for(t=0;t<=143;)y[2*t+1]=8,t++,s[8]++;for(;t<=255;)y[2*t+1]=9,t++,s[9]++;for(;t<=279;)y[2*t+1]=7,t++,s[7]++;for(;t<=287;)y[2*t+1]=8,t++,s[8]++;for(U(y,287,s),t=0;t<30;t++)v[2*t+1]=5,v[2*t]=T(t,5);S=new E(y,g,257,286,15),D=new E(v,w,0,30,15),I=new E(new Array(0),b,0,19,7)})(),X=!0),t.l_desc=new C(t.dyn_ltree,S),t.d_desc=new C(t.dyn_dtree,D),t.bl_desc=new C(t.bl_tree,I),t.bi_buf=0,t.bi_valid=0,F(t)},_tr_stored_block:G,_tr_flush_block:(t,e,r,i)=>{let n,s,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),Y(t,t.l_desc),Y(t,t.d_desc),a=(t=>{let e;for(V(t,t.dyn_ltree,t.l_desc.max_code),V(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*_[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),n=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==e?G(t,e,r,i):4===t.strategy||s===n?(P(t,2+(i?1:0),3),Z(t,y,v)):(P(t,4+(i?1:0),3),((t,e,r,i)=>{let n;for(P(t,e-257,5),P(t,r-1,5),P(t,i-4,4),n=0;n<i;n++)P(t,t.bl_tree[2*_[n]+1],3);j(t,t.dyn_ltree,e-1),j(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),Z(t,t.dyn_ltree,t.dyn_dtree)),F(t),i&&O(t)},_tr_tally:(t,e,r)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(k[r]+256+1)]++,t.dyn_dtree[2*R(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{P(t,2,3),z(t,256,y),(t=>{16===t.bi_valid?(B(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},H=(t,e,r,i)=>{let n=65535&t|0,s=t>>>16&65535|0,a=0;for(;0!==r;){a=r>2e3?2e3:r,r-=a;do{n=n+e[i++]|0,s=s+n|0}while(--a);n%=65521,s%=65521}return n|s<<16|0};const W=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var $=(t,e,r,i)=>{const n=W,s=i+r;t^=-1;for(let r=i;r<s;r++)t=t>>>8^n[255&(t^e[r])];return-1^t},K={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},J={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Q,_tr_stored_block:tt,_tr_flush_block:et,_tr_tally:rt,_tr_align:it}=q,{Z_NO_FLUSH:nt,Z_PARTIAL_FLUSH:st,Z_FULL_FLUSH:at,Z_FINISH:ot,Z_BLOCK:ht,Z_OK:lt,Z_STREAM_END:ut,Z_STREAM_ERROR:ft,Z_DATA_ERROR:ct,Z_BUF_ERROR:dt,Z_DEFAULT_COMPRESSION:mt,Z_FILTERED:pt,Z_HUFFMAN_ONLY:gt,Z_RLE:wt,Z_FIXED:bt,Z_DEFAULT_STRATEGY:_t,Z_UNKNOWN:yt,Z_DEFLATED:vt}=J,xt=258,kt=262,Mt=103,At=113,Et=666,St=(t,e)=>(t.msg=K[e],e),Dt=t=>(t<<1)-(t>4?9:0),It=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let Ct=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const Rt=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},Bt=(t,e)=>{et(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Rt(t.strm)},Pt=(t,e)=>{t.pending_buf[t.pending++]=e},zt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Tt=(t,e,r,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),r),1===t.state.wrap?t.adler=H(t.adler,e,n,r):2===t.state.wrap&&(t.adler=$(t.adler,e,n,r)),t.next_in+=n,t.total_in+=n,n)},Ut=(t,e)=>{let r,i,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match;const h=t.strstart>t.w_size-kt?t.strstart-(t.w_size-kt):0,l=t.window,u=t.w_mask,f=t.prev,c=t.strstart+xt;let d=l[s+a-1],m=l[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(r=e,l[r+a]===m&&l[r+a-1]===d&&l[r]===l[s]&&l[++r]===l[s+1]){s+=2,r++;do{}while(l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<c);if(i=xt-(c-s),s=c-xt,i>a){if(t.match_start=e,a=i,i>=o)break;d=l[s+a-1],m=l[s+a]}}}while((e=f[e&u])>h&&0!=--n);return a<=t.lookahead?a:t.lookahead},Ft=t=>{const e=t.w_size;let r,i,n,s,a;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-kt)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,i=t.hash_size,r=i;do{n=t.head[--r],t.head[r]=n>=e?n-e:0}while(--i);i=e,r=i;do{n=t.prev[--r],t.prev[r]=n>=e?n-e:0}while(--i);s+=e}if(0===t.strm.avail_in)break;if(i=Tt(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=Ct(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=Ct(t,t.ins_h,t.window[a+3-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<kt&&0!==t.strm.avail_in)},Ot=(t,e)=>{let r,i;for(;;){if(t.lookahead<kt){if(Ft(t),t.lookahead<kt&&e===nt)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=Ct(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-kt&&(t.match_length=Ut(t,r)),t.match_length>=3)if(i=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Ct(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Ct(t,t.ins_h,t.window[t.strstart+1]);else i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(Bt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===ot?(Bt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Bt(t,!1),0===t.strm.avail_out)?1:2},Lt=(t,e)=>{let r,i,n;for(;;){if(t.lookahead<kt){if(Ft(t),t.lookahead<kt&&e===nt)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=Ct(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-kt&&(t.match_length=Ut(t,r),t.match_length<=5&&(t.strategy===pt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=Ct(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(Bt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=rt(t,0,t.window[t.strstart-1]),i&&Bt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===ot?(Bt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Bt(t,!1),0===t.strm.avail_out)?1:2};function Nt(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}const Zt=[new Nt(0,0,0,0,((t,e)=>{let r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ft(t),0===t.lookahead&&e===nt)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,Bt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-kt&&(Bt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ot?(Bt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Bt(t,!1),t.strm.avail_out),1)})),new Nt(4,4,8,4,Ot),new Nt(4,5,16,8,Ot),new Nt(4,6,32,32,Ot),new Nt(4,4,16,16,Lt),new Nt(8,16,32,32,Lt),new Nt(8,16,128,128,Lt),new Nt(8,32,128,256,Lt),new Nt(32,128,258,1024,Lt),new Nt(32,258,258,4096,Lt)];function Yt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=vt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),It(this.dyn_ltree),It(this.dyn_dtree),It(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),It(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),It(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Vt=t=>{if(!t||!t.state)return St(t,ft);t.total_in=t.total_out=0,t.data_type=yt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:At,t.adler=2===e.wrap?0:1,e.last_flush=nt,Q(e),lt},jt=t=>{const e=Vt(t);var r;return e===lt&&((r=t.state).window_size=2*r.w_size,It(r.head),r.max_lazy_match=Zt[r.level].max_lazy,r.good_match=Zt[r.level].good_length,r.nice_match=Zt[r.level].nice_length,r.max_chain_length=Zt[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},Xt=(t,e,r,i,n,s)=>{if(!t)return ft;let a=1;if(e===mt&&(e=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),n<1||n>9||r!==vt||i<8||i>15||e<0||e>9||s<0||s>bt)return St(t,ft);8===i&&(i=9);const o=new Yt;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=r,jt(t)};var Gt=Xt,qt=(t,e)=>t&&t.state?2!==t.state.wrap?ft:(t.state.gzhead=e,lt):ft,Ht=(t,e)=>{let r,i;if(!t||!t.state||e>ht||e<0)return t?St(t,ft):ft;const n=t.state;if(!t.output||!t.input&&0!==t.avail_in||n.status===Et&&e!==ot)return St(t,0===t.avail_out?dt:ft);n.strm=t;const s=n.last_flush;if(n.last_flush=e,42===n.status)if(2===n.wrap)t.adler=0,Pt(n,31),Pt(n,139),Pt(n,8),n.gzhead?(Pt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Pt(n,255&n.gzhead.time),Pt(n,n.gzhead.time>>8&255),Pt(n,n.gzhead.time>>16&255),Pt(n,n.gzhead.time>>24&255),Pt(n,9===n.level?2:n.strategy>=gt||n.level<2?4:0),Pt(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Pt(n,255&n.gzhead.extra.length),Pt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=$(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(Pt(n,0),Pt(n,0),Pt(n,0),Pt(n,0),Pt(n,0),Pt(n,9===n.level?2:n.strategy>=gt||n.level<2?4:0),Pt(n,3),n.status=At);else{let e=vt+(n.w_bits-8<<4)<<8,r=-1;r=n.strategy>=gt||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=r<<6,0!==n.strstart&&(e|=32),e+=31-e%31,n.status=At,zt(n,e),0!==n.strstart&&(zt(n,t.adler>>>16),zt(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(r=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>r&&(t.adler=$(t.adler,n.pending_buf,n.pending-r,r)),Rt(t),r=n.pending,n.pending!==n.pending_buf_size));)Pt(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>r&&(t.adler=$(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=$(t.adler,n.pending_buf,n.pending-r,r)),Rt(t),r=n.pending,n.pending===n.pending_buf_size)){i=1;break}i=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Pt(n,i)}while(0!==i);n.gzhead.hcrc&&n.pending>r&&(t.adler=$(t.adler,n.pending_buf,n.pending-r,r)),0===i&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=$(t.adler,n.pending_buf,n.pending-r,r)),Rt(t),r=n.pending,n.pending===n.pending_buf_size)){i=1;break}i=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Pt(n,i)}while(0!==i);n.gzhead.hcrc&&n.pending>r&&(t.adler=$(t.adler,n.pending_buf,n.pending-r,r)),0===i&&(n.status=Mt)}else n.status=Mt;if(n.status===Mt&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Rt(t),n.pending+2<=n.pending_buf_size&&(Pt(n,255&t.adler),Pt(n,t.adler>>8&255),t.adler=0,n.status=At)):n.status=At),0!==n.pending){if(Rt(t),0===t.avail_out)return n.last_flush=-1,lt}else if(0===t.avail_in&&Dt(e)<=Dt(s)&&e!==ot)return St(t,dt);if(n.status===Et&&0!==t.avail_in)return St(t,dt);if(0!==t.avail_in||0!==n.lookahead||e!==nt&&n.status!==Et){let r=n.strategy===gt?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(Ft(t),0===t.lookahead)){if(e===nt)return 1;break}if(t.match_length=0,r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Bt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ot?(Bt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Bt(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===wt?((t,e)=>{let r,i,n,s;const a=t.window;for(;;){if(t.lookahead<=xt){if(Ft(t),t.lookahead<=xt&&e===nt)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=t.strstart-1,i=a[n],i===a[++n]&&i===a[++n]&&i===a[++n])){s=t.strstart+xt;do{}while(i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&n<s);t.match_length=xt-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Bt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ot?(Bt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Bt(t,!1),0===t.strm.avail_out)?1:2})(n,e):Zt[n.level].func(n,e);if(3!==r&&4!==r||(n.status=Et),1===r||3===r)return 0===t.avail_out&&(n.last_flush=-1),lt;if(2===r&&(e===st?it(n):e!==ht&&(tt(n,0,0,!1),e===at&&(It(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Rt(t),0===t.avail_out))return n.last_flush=-1,lt}return e!==ot?lt:n.wrap<=0?ut:(2===n.wrap?(Pt(n,255&t.adler),Pt(n,t.adler>>8&255),Pt(n,t.adler>>16&255),Pt(n,t.adler>>24&255),Pt(n,255&t.total_in),Pt(n,t.total_in>>8&255),Pt(n,t.total_in>>16&255),Pt(n,t.total_in>>24&255)):(zt(n,t.adler>>>16),zt(n,65535&t.adler)),Rt(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?lt:ut)},Wt=t=>{if(!t||!t.state)return ft;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==Mt&&e!==At&&e!==Et?St(t,ft):(t.state=null,e===At?St(t,ct):lt)},$t=(t,e)=>{let r=e.length;if(!t||!t.state)return ft;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return ft;if(1===n&&(t.adler=H(t.adler,e,r,0)),i.wrap=0,r>=i.w_size){0===n&&(It(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(r-i.w_size,r),0),e=t,r=i.w_size}const s=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Ft(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=Ct(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,Ft(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=a,t.input=o,t.avail_in=s,i.wrap=n,lt};const Kt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Jt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)Kt(r,e)&&(t[e]=r[e])}}return t},Qt=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,i=0,n=t.length;e<n;e++){let n=t[e];r.set(n,i),i+=n.length}return r};let te=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){te=!1}const ee=new Uint8Array(256);for(let t=0;t<256;t++)ee[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;ee[254]=ee[254]=1;var re=t=>{let e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)r=t.charCodeAt(n),55296==(64512&r)&&n+1<a&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),n++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)r=t.charCodeAt(n),55296==(64512&r)&&n+1<a&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|63&r):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},ie=(t,e)=>{let r,i;const n=e||t.length,s=new Array(2*n);for(i=0,r=0;r<n;){let e=t[r++];if(e<128){s[i++]=e;continue}let a=ee[e];if(a>4)s[i++]=65533,r+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&r<n;)e=e<<6|63&t[r++],a--;a>1?s[i++]=65533:e<65536?s[i++]=e:(e-=65536,s[i++]=55296|e>>10&1023,s[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&te)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r})(s,i)},ne=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+ee[t[r]]>e?r:e},se=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const ae=Object.prototype.toString,{Z_NO_FLUSH:oe,Z_SYNC_FLUSH:he,Z_FULL_FLUSH:le,Z_FINISH:ue,Z_OK:fe,Z_STREAM_END:ce,Z_DEFAULT_COMPRESSION:de,Z_DEFAULT_STRATEGY:me,Z_DEFLATED:pe}=J;function ge(t){this.options=Jt({level:de,method:pe,chunkSize:16384,windowBits:15,memLevel:8,strategy:me},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new se,this.strm.avail_out=0;let r=Gt(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==fe)throw new Error(K[r]);if(e.header&&qt(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?re(e.dictionary):"[object ArrayBuffer]"===ae.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=$t(this.strm,t),r!==fe)throw new Error(K[r]);this._dict_set=!0}}function we(t,e){const r=new ge(e);if(r.push(t,!0),r.err)throw r.msg||K[r.err];return r.result}ge.prototype.push=function(t,e){const r=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?ue:oe,"string"==typeof t?r.input=re(t):"[object ArrayBuffer]"===ae.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(s===he||s===le)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(n=Ht(r,s),n===ce)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),n=Wt(this.strm),this.onEnd(n),this.ended=!0,n===fe;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},ge.prototype.onData=function(t){this.chunks.push(t)},ge.prototype.onEnd=function(t){t===fe&&(this.result=Qt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var be={Deflate:ge,deflate:we,deflateRaw:function(t,e){return(e=e||{}).raw=!0,we(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,we(t,e)},constants:J},_e=function(t,e){let r,i,n,s,a,o,h,l,u,f,c,d,m,p,g,w,b,_,y,v,x,k,M,A;const E=t.state;r=t.next_in,M=t.input,i=r+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),a=n+(t.avail_out-257),o=E.dmax,h=E.wsize,l=E.whave,u=E.wnext,f=E.window,c=E.hold,d=E.bits,m=E.lencode,p=E.distcode,g=(1<<E.lenbits)-1,w=(1<<E.distbits)-1;t:do{d<15&&(c+=M[r++]<<d,d+=8,c+=M[r++]<<d,d+=8),b=m[c&g];e:for(;;){if(_=b>>>24,c>>>=_,d-=_,_=b>>>16&255,0===_)A[n++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=m[(65535&b)+(c&(1<<_)-1)];continue e}if(32&_){E.mode=12;break t}t.msg="invalid literal/length code",E.mode=30;break t}y=65535&b,_&=15,_&&(d<_&&(c+=M[r++]<<d,d+=8),y+=c&(1<<_)-1,c>>>=_,d-=_),d<15&&(c+=M[r++]<<d,d+=8,c+=M[r++]<<d,d+=8),b=p[c&w];r:for(;;){if(_=b>>>24,c>>>=_,d-=_,_=b>>>16&255,!(16&_)){if(0==(64&_)){b=p[(65535&b)+(c&(1<<_)-1)];continue r}t.msg="invalid distance code",E.mode=30;break t}if(v=65535&b,_&=15,d<_&&(c+=M[r++]<<d,d+=8,d<_&&(c+=M[r++]<<d,d+=8)),v+=c&(1<<_)-1,v>o){t.msg="invalid distance too far back",E.mode=30;break t}if(c>>>=_,d-=_,_=n-s,v>_){if(_=v-_,_>l&&E.sane){t.msg="invalid distance too far back",E.mode=30;break t}if(x=0,k=f,0===u){if(x+=h-_,_<y){y-=_;do{A[n++]=f[x++]}while(--_);x=n-v,k=A}}else if(u<_){if(x+=h+u-_,_-=u,_<y){y-=_;do{A[n++]=f[x++]}while(--_);if(x=0,u<y){_=u,y-=_;do{A[n++]=f[x++]}while(--_);x=n-v,k=A}}}else if(x+=u-_,_<y){y-=_;do{A[n++]=f[x++]}while(--_);x=n-v,k=A}for(;y>2;)A[n++]=k[x++],A[n++]=k[x++],A[n++]=k[x++],y-=3;y&&(A[n++]=k[x++],y>1&&(A[n++]=k[x++]))}else{x=n-v;do{A[n++]=A[x++],A[n++]=A[x++],A[n++]=A[x++],y-=3}while(y>2);y&&(A[n++]=A[x++],y>1&&(A[n++]=A[x++]))}break}}break}}while(r<i&&n<a);y=d>>3,r-=y,d-=y<<3,c&=(1<<d)-1,t.next_in=r,t.next_out=n,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=n<a?a-n+257:257-(n-a),E.hold=c,E.bits=d};const ye=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ve=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ke=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Me=(t,e,r,i,n,s,a,o)=>{const h=o.bits;let l,u,f,c,d,m,p=0,g=0,w=0,b=0,_=0,y=0,v=0,x=0,k=0,M=0,A=null,E=0;const S=new Uint16Array(16),D=new Uint16Array(16);let I,C,R,B=null,P=0;for(p=0;p<=15;p++)S[p]=0;for(g=0;g<i;g++)S[e[r+g]]++;for(_=h,b=15;b>=1&&0===S[b];b--);if(_>b&&(_=b),0===b)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(w=1;w<b&&0===S[w];w++);for(_<w&&(_=w),x=1,p=1;p<=15;p++)if(x<<=1,x-=S[p],x<0)return-1;if(x>0&&(0===t||1!==b))return-1;for(D[1]=0,p=1;p<15;p++)D[p+1]=D[p]+S[p];for(g=0;g<i;g++)0!==e[r+g]&&(a[D[e[r+g]]++]=g);if(0===t?(A=B=a,m=19):1===t?(A=ye,E-=257,B=ve,P-=257,m=256):(A=xe,B=ke,m=-1),M=0,g=0,p=w,d=s,y=_,v=0,f=-1,k=1<<_,c=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){I=p-v,a[g]<m?(C=0,R=a[g]):a[g]>m?(C=B[P+a[g]],R=A[E+a[g]]):(C=96,R=0),l=1<<p-v,u=1<<y,w=u;do{u-=l,n[d+(M>>v)+u]=I<<24|C<<16|R|0}while(0!==u);for(l=1<<p-1;M&l;)l>>=1;if(0!==l?(M&=l-1,M+=l):M=0,g++,0==--S[p]){if(p===b)break;p=e[r+a[g]]}if(p>_&&(M&c)!==f){for(0===v&&(v=_),d+=w,y=p-v,x=1<<y;y+v<b&&(x-=S[y+v],!(x<=0));)y++,x<<=1;if(k+=1<<y,1===t&&k>852||2===t&&k>592)return 1;f=M&c,n[f]=_<<24|y<<16|d-s|0}}return 0!==M&&(n[d+M]=p-v<<24|64<<16|0),o.bits=_,0};const{Z_FINISH:Ae,Z_BLOCK:Ee,Z_TREES:Se,Z_OK:De,Z_STREAM_END:Ie,Z_NEED_DICT:Ce,Z_STREAM_ERROR:Re,Z_DATA_ERROR:Be,Z_MEM_ERROR:Pe,Z_BUF_ERROR:ze,Z_DEFLATED:Te}=J,Ue=12,Fe=30,Oe=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Le(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ne=t=>{if(!t||!t.state)return Re;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,De},Ze=t=>{if(!t||!t.state)return Re;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Ne(t)},Ye=(t,e)=>{let r;if(!t||!t.state)return Re;const i=t.state;return e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Re:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,Ze(t))},Ve=(t,e)=>{if(!t)return Re;const r=new Le;t.state=r,r.window=null;const i=Ye(t,e);return i!==De&&(t.state=null),i};let je,Xe,Ge=!0;const qe=t=>{if(Ge){je=new Int32Array(512),Xe=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Me(1,t.lens,0,288,je,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Me(2,t.lens,0,32,Xe,0,t.work,{bits:5}),Ge=!1}t.lencode=je,t.lenbits=9,t.distcode=Xe,t.distbits=5},He=(t,e,r,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),s.window.set(e.subarray(r-i,r-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(r-i,r),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var We=Ze,$e=Ve,Ke=(t,e)=>{let r,i,n,s,a,o,h,l,u,f,c,d,m,p,g,w,b,_,y,v,x,k,M=0;const A=new Uint8Array(4);let E,S;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return Re;r=t.state,r.mode===Ue&&(r.mode=13),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,l=r.hold,u=r.bits,f=o,c=h,k=De;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;u<16;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(2&r.wrap&&35615===l){r.check=0,A[0]=255&l,A[1]=l>>>8&255,r.check=$(r.check,A,2,0),l=0,u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",r.mode=Fe;break}if((15&l)!==Te){t.msg="unknown compression method",r.mode=Fe;break}if(l>>>=4,u-=4,x=8+(15&l),0===r.wbits)r.wbits=x;else if(x>r.wbits){t.msg="invalid window size",r.mode=Fe;break}r.dmax=1<<r.wbits,t.adler=r.check=1,r.mode=512&l?10:Ue,l=0,u=0;break;case 2:for(;u<16;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(r.flags=l,(255&r.flags)!==Te){t.msg="unknown compression method",r.mode=Fe;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=Fe;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,r.check=$(r.check,A,2,0)),l=0,u=0,r.mode=3;case 3:for(;u<32;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.head&&(r.head.time=l),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,r.check=$(r.check,A,4,0)),l=0,u=0,r.mode=4;case 4:for(;u<16;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,r.check=$(r.check,A,2,0)),l=0,u=0,r.mode=5;case 5:if(1024&r.flags){for(;u<16;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,r.check=$(r.check,A,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(d=r.length,d>o&&(d=o),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(i.subarray(s,s+d),x)),512&r.flags&&(r.check=$(r.check,i,d,s)),o-=d,s+=d,r.length-=d),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break t;d=0;do{x=i[s+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&d<o);if(512&r.flags&&(r.check=$(r.check,i,d,s)),o-=d,s+=d,x)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break t;d=0;do{x=i[s+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&d<o);if(512&r.flags&&(r.check=$(r.check,i,d,s)),o-=d,s+=d,x)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;u<16;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(l!==(65535&r.check)){t.msg="header crc mismatch",r.mode=Fe;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Ue;break;case 10:for(;u<32;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}t.adler=r.check=Oe(l),l=0,u=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=u,Ce;t.adler=r.check=1,r.mode=Ue;case Ue:if(e===Ee||e===Se)break t;case 13:if(r.last){l>>>=7&u,u-=7&u,r.mode=27;break}for(;u<3;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}switch(r.last=1&l,l>>>=1,u-=1,3&l){case 0:r.mode=14;break;case 1:if(qe(r),r.mode=20,e===Se){l>>>=2,u-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=Fe}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Fe;break}if(r.length=65535&l,l=0,u=0,r.mode=15,e===Se)break t;case 15:r.mode=16;case 16:if(d=r.length,d){if(d>o&&(d=o),d>h&&(d=h),0===d)break t;n.set(i.subarray(s,s+d),a),o-=d,s+=d,h-=d,a+=d,r.length-=d;break}r.mode=Ue;break;case 17:for(;u<14;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Fe;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;u<3;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.lens[D[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},k=Me(0,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,k){t.msg="invalid code lengths set",r.mode=Fe;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;M=r.lencode[l&(1<<r.lenbits)-1],g=M>>>24,w=M>>>16&255,b=65535&M,!(g<=u);){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(b<16)l>>>=g,u-=g,r.lens[r.have++]=b;else{if(16===b){for(S=g+2;u<S;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(l>>>=g,u-=g,0===r.have){t.msg="invalid bit length repeat",r.mode=Fe;break}x=r.lens[r.have-1],d=3+(3&l),l>>>=2,u-=2}else if(17===b){for(S=g+3;u<S;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}l>>>=g,u-=g,x=0,d=3+(7&l),l>>>=3,u-=3}else{for(S=g+7;u<S;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}l>>>=g,u-=g,x=0,d=11+(127&l),l>>>=7,u-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Fe;break}for(;d--;)r.lens[r.have++]=x}}if(r.mode===Fe)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=Fe;break}if(r.lenbits=9,E={bits:r.lenbits},k=Me(1,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,k){t.msg="invalid literal/lengths set",r.mode=Fe;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},k=Me(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,k){t.msg="invalid distances set",r.mode=Fe;break}if(r.mode=20,e===Se)break t;case 20:r.mode=21;case 21:if(o>=6&&h>=258){t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=u,_e(t,c),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,l=r.hold,u=r.bits,r.mode===Ue&&(r.back=-1);break}for(r.back=0;M=r.lencode[l&(1<<r.lenbits)-1],g=M>>>24,w=M>>>16&255,b=65535&M,!(g<=u);){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(w&&0==(240&w)){for(_=g,y=w,v=b;M=r.lencode[v+((l&(1<<_+y)-1)>>_)],g=M>>>24,w=M>>>16&255,b=65535&M,!(_+g<=u);){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}l>>>=_,u-=_,r.back+=_}if(l>>>=g,u-=g,r.back+=g,r.length=b,0===w){r.mode=26;break}if(32&w){r.back=-1,r.mode=Ue;break}if(64&w){t.msg="invalid literal/length code",r.mode=Fe;break}r.extra=15&w,r.mode=22;case 22:if(r.extra){for(S=r.extra;u<S;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;M=r.distcode[l&(1<<r.distbits)-1],g=M>>>24,w=M>>>16&255,b=65535&M,!(g<=u);){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(0==(240&w)){for(_=g,y=w,v=b;M=r.distcode[v+((l&(1<<_+y)-1)>>_)],g=M>>>24,w=M>>>16&255,b=65535&M,!(_+g<=u);){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}l>>>=_,u-=_,r.back+=_}if(l>>>=g,u-=g,r.back+=g,64&w){t.msg="invalid distance code",r.mode=Fe;break}r.offset=b,r.extra=15&w,r.mode=24;case 24:if(r.extra){for(S=r.extra;u<S;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Fe;break}r.mode=25;case 25:if(0===h)break t;if(d=c-h,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Fe;break}d>r.wnext?(d-=r.wnext,m=r.wsize-d):m=r.wnext-d,d>r.length&&(d=r.length),p=r.window}else p=n,m=a-r.offset,d=r.length;d>h&&(d=h),h-=d,r.length-=d;do{n[a++]=p[m++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===h)break t;n[a++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;u<32;){if(0===o)break t;o--,l|=i[s++]<<u,u+=8}if(c-=h,t.total_out+=c,r.total+=c,c&&(t.adler=r.check=r.flags?$(r.check,n,c,a-c):H(r.check,n,c,a-c)),c=h,(r.flags?l:Oe(l))!==r.check){t.msg="incorrect data check",r.mode=Fe;break}l=0,u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;u<32;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(l!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=Fe;break}l=0,u=0}r.mode=29;case 29:k=Ie;break t;case Fe:k=Be;break t;case 31:return Pe;case 32:default:return Re}return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=u,(r.wsize||c!==t.avail_out&&r.mode<Fe&&(r.mode<27||e!==Ae))&&He(t,t.output,t.next_out,c-t.avail_out),f-=t.avail_in,c-=t.avail_out,t.total_in+=f,t.total_out+=c,r.total+=c,r.wrap&&c&&(t.adler=r.check=r.flags?$(r.check,n,c,t.next_out-c):H(r.check,n,c,t.next_out-c)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Ue?128:0)+(20===r.mode||15===r.mode?256:0),(0===f&&0===c||e===Ae)&&k===De&&(k=ze),k},Je=t=>{if(!t||!t.state)return Re;let e=t.state;return e.window&&(e.window=null),t.state=null,De},Qe=(t,e)=>{if(!t||!t.state)return Re;const r=t.state;return 0==(2&r.wrap)?Re:(r.head=e,e.done=!1,De)},tr=(t,e)=>{const r=e.length;let i,n,s;return t&&t.state?(i=t.state,0!==i.wrap&&11!==i.mode?Re:11===i.mode&&(n=1,n=H(n,e,r,0),n!==i.check)?Be:(s=He(t,e,r,r),s?(i.mode=31,Pe):(i.havedict=1,De))):Re},er=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const rr=Object.prototype.toString,{Z_NO_FLUSH:ir,Z_FINISH:nr,Z_OK:sr,Z_STREAM_END:ar,Z_NEED_DICT:or,Z_STREAM_ERROR:hr,Z_DATA_ERROR:lr,Z_MEM_ERROR:ur}=J;function fr(t){this.options=Jt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new se,this.strm.avail_out=0;let r=$e(this.strm,e.windowBits);if(r!==sr)throw new Error(K[r]);if(this.header=new er,Qe(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=re(e.dictionary):"[object ArrayBuffer]"===rr.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=tr(this.strm,e.dictionary),r!==sr)))throw new Error(K[r])}function cr(t,e){const r=new fr(e);if(r.push(t),r.err)throw r.msg||K[r.err];return r.result}fr.prototype.push=function(t,e){const r=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(a=e===~~e?e:!0===e?nr:ir,"[object ArrayBuffer]"===rr.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),s=Ke(r,a),s===or&&n&&(s=tr(r,n),s===sr?s=Ke(r,a):s===lr&&(s=or));r.avail_in>0&&s===ar&&r.state.wrap>0&&0!==t[r.next_in];)We(r),s=Ke(r,a);switch(s){case hr:case lr:case or:case ur:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(0===r.avail_out||s===ar))if("string"===this.options.to){let t=ne(r.output,r.next_out),e=r.next_out-t,n=ie(r.output,t);r.next_out=e,r.avail_out=i-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(n)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==sr||0!==o){if(s===ar)return s=Je(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},fr.prototype.onData=function(t){this.chunks.push(t)},fr.prototype.onEnd=function(t){t===sr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Qt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var dr={Inflate:fr,inflate:cr,inflateRaw:function(t,e){return(e=e||{}).raw=!0,cr(t,e)},ungzip:cr,constants:J};const{Deflate:mr,deflate:pr,deflateRaw:gr,gzip:wr}=be,{Inflate:br,inflate:_r,inflateRaw:yr,ungzip:vr}=dr;var xr=pr,kr=br;const Mr=[137,80,78,71,13,10,26,10],Ar=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;Ar[t]=e}const Er=4294967295;function Sr(t,e){return(function(t,e,r){let i=4294967295;for(let t=0;t<r;t++)i=Ar[255&(i^e[t])]^i>>>8;return i}(0,t,e)^Er)>>>0}var Dr,Ir,Cr,Rr;!function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.GREYSCALE=0]="GREYSCALE",t[t.TRUECOLOUR=2]="TRUECOLOUR",t[t.INDEXED_COLOUR=3]="INDEXED_COLOUR",t[t.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",t[t.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"}(Dr||(Dr={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.DEFLATE=0]="DEFLATE"}(Ir||(Ir={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.ADAPTIVE=0]="ADAPTIVE"}(Cr||(Cr={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.NO_INTERLACE=0]="NO_INTERLACE",t[t.ADAM7=1]="ADAM7"}(Rr||(Rr={}));const Br=new Uint8Array(0),Pr=new Uint16Array([255]),zr=255===new Uint8Array(Pr.buffer)[0];class Tr extends m{constructor(t,e={}){super(t);const{checkCrc:r=!1}=e;this._checkCrc=r,this._inflator=new kr,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._compressionMethod=Ir.UNKNOWN,this._filterMethod=Cr.UNKNOWN,this._interlaceMethod=Rr.UNKNOWN,this._colorType=-1,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let t=0;t<Mr.length;t++)if(this.readUint8()!==Mr[t])throw new Error(`wrong PNG signature. Byte at ${t} should be ${Mr[t]}.`)}decodeChunk(){const t=this.readUint32(),e=this.readChars(4),r=this.offset;switch(e){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"tEXt":this.decodetEXt(t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t)}if(this.offset-r!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);if(this._checkCrc){const r=this.readUint32(),i=t+4,n=Sr(new Uint8Array(this.buffer,this.byteOffset+this.offset-i-4,i),i);if(n!==r)throw new Error(`CRC mismatch for chunk ${e}. Expected ${r}, found ${n}`)}else this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=function(t){if(1!==t&&2!==t&&4!==t&&8!==t&&16!==t)throw new Error(`invalid bit depth: ${t}`);return t}(this.readUint8());const e=this.readUint8();let r;switch(this._colorType=e,e){case Dr.GREYSCALE:r=1;break;case Dr.TRUECOLOUR:r=3;break;case Dr.INDEXED_COLOUR:r=1;break;case Dr.GREYSCALE_ALPHA:r=2;break;case Dr.TRUECOLOUR_ALPHA:r=4;break;default:throw new Error(`Unknown color type: ${e}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Ir.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(t){if(t%3!=0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const e=t/3;this._hasPalette=!0;const r=[];this._palette=r;for(let t=0;t<e;t++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,t)),this.skip(t)}decodetRNS(t){if(3===this._colorType){if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let e=0;for(;e<t;e++){const t=this.readByte();this._palette[e].push(t)}for(;e<this._palette.length;e++)this._palette[e].push(255)}}decodetEXt(t){let e,r="";for(;"\0"!==(e=this.readChar());)r+=e;this._png.text[r]=this.readChars(t-r.length-1)}decodepHYs(){const t=this.readUint32(),e=this.readUint32(),r=this.readByte();this._png.resolution={x:t,y:e,unit:r}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._inflator.result;if(this._filterMethod!==Cr.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod!==Rr.NO_INTERLACE)throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this.decodeInterlaceNull(t)}decodeInterlaceNull(t){const e=this._png.height,r=this._png.channels*this._png.depth/8,i=this._png.width*r,n=new Uint8Array(this._png.height*i);let s,a,o=Br,h=0;for(let l=0;l<e;l++){switch(s=t.subarray(h+1,h+1+i),a=n.subarray(l*i,(l+1)*i),t[h]){case 0:Ur(s,a,i);break;case 1:Fr(s,a,i,r);break;case 2:Or(s,a,o,i);break;case 3:Lr(s,a,o,i,r);break;case 4:Nr(s,a,o,i,r);break;default:throw new Error(`Unsupported filter: ${t[h]}`)}o=a,h+=i+1}if(this._hasPalette&&(this._png.palette=this._palette),16===this._png.depth){const t=new Uint16Array(n.buffer);if(zr)for(let e=0;e<t.length;e++)t[e]=(255&(l=t[e]))<<8|l>>8&255;this._png.data=t}else this._png.data=n;var l}}function Ur(t,e,r){for(let i=0;i<r;i++)e[i]=t[i]}function Fr(t,e,r,i){let n=0;for(;n<i;n++)e[n]=t[n];for(;n<r;n++)e[n]=t[n]+e[n-i]&255}function Or(t,e,r,i){let n=0;if(0===r.length)for(;n<i;n++)e[n]=t[n];else for(;n<i;n++)e[n]=t[n]+r[n]&255}function Lr(t,e,r,i,n){let s=0;if(0===r.length){for(;s<n;s++)e[s]=t[s];for(;s<i;s++)e[s]=t[s]+(e[s-n]>>1)&255}else{for(;s<n;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<i;s++)e[s]=t[s]+(e[s-n]+r[s]>>1)&255}}function Nr(t,e,r,i,n){let s=0;if(0===r.length){for(;s<n;s++)e[s]=t[s];for(;s<i;s++)e[s]=t[s]+e[s-n]&255}else{for(;s<n;s++)e[s]=t[s]+r[s]&255;for(;s<i;s++)e[s]=t[s]+Zr(e[s-n],r[s],r[s-n])&255}}function Zr(t,e,r){const i=t+e-r,n=Math.abs(i-t),s=Math.abs(i-e),a=Math.abs(i-r);return n<=s&&n<=a?t:s<=a?e:r}const Yr={level:3};class Vr extends m{constructor(t,e={}){super(),this._colorType=Dr.UNKNOWN,this._zlibOptions=Object.assign({},Yr,e.zlib),this._png=this._checkData(t),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(Mr)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(Ir.DEFLATE),this.writeByte(Cr.ADAPTIVE),this.writeByte(Rr.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(t){this.writeUint32(t.length),this.writeChars("IDAT"),this.writeBytes(t),this.writeCrc(t.length+4)}encodeData(){const{width:t,height:e,channels:r,depth:i,data:n}=this._png,s=r*t,a=(new m).setBigEndian();let o=0;for(let t=0;t<e;t++)if(a.writeByte(0),8===i)o=Xr(n,a,s,o);else{if(16!==i)throw new Error("unreachable");o=Gr(n,a,s,o)}const h=a.toArray(),l=xr(h,this._zlibOptions);this.encodeIDAT(l)}_checkData(t){const{colorType:e,channels:r,depth:i}=function(t){const{channels:e=4,depth:r=8}=t;if(4!==e&&3!==e&&2!==e&&1!==e)throw new RangeError(`unsupported number of channels: ${e}`);if(8!==r&&16!==r)throw new RangeError(`unsupported bit depth: ${r}`);const i={channels:e,depth:r,colorType:Dr.UNKNOWN};switch(e){case 4:i.colorType=Dr.TRUECOLOUR_ALPHA;break;case 3:i.colorType=Dr.TRUECOLOUR;break;case 1:i.colorType=Dr.GREYSCALE;break;case 2:i.colorType=Dr.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return i}(t),n={width:jr(t.width,"width"),height:jr(t.height,"height"),channels:r,data:t.data,depth:i,text:{}};this._colorType=e;const s=n.width*n.height*r;if(n.data.length!==s)throw new RangeError(`wrong data size. Found ${n.data.length}, expected ${s}`);return n}writeCrc(t){this.writeUint32(Sr(new Uint8Array(this.buffer,this.byteOffset+this.offset-t,t),t))}}function jr(t,e){if(Number.isInteger(t)&&t>0)return t;throw new TypeError(`${e} must be a positive integer`)}function Xr(t,e,r,i){for(let n=0;n<r;n++)e.writeByte(t[i++]);return i}function Gr(t,e,r,i){for(let n=0;n<r;n++)e.writeUint16(t[i++]);return i}var qr;!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"}(qr||(qr={}));var Hr=__webpack_require__(7870);let Wr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$r=new Uint8Array(256);for(let t=0;t<Wr.length;t++)$r[Wr.charCodeAt(t)]=t;function Kr(t,e){return`data:${e};base64,${function(t){let e,r=t.length,i="";for(e=0;e<r;e+=3)i+=Wr[t[e]>>2],i+=Wr[(3&t[e])<<4|t[e+1]>>4],i+=Wr[(15&t[e+1])<<2|t[e+2]>>6],i+=Wr[63&t[e+2]];return r%3==2?i=`${i.substring(0,i.length-1)}=`:r%3==1&&(i=`${i.substring(0,i.length-2)}==`),i}(t)}`}const Jr=self.ImageData,Qr=self.Image;function ti(t,e){let r=self.document.createElement("canvas");return r.width=t,r.height=e,r}function ei(t,e={}){const r={width:t.width,height:t.height,data:t.getRGBAData()};return(0,Hr.encode)(r,e.quality).data}function ri(t,e){const r={width:t.width,height:t.height,channels:t.channels,depth:t.bitDepth,data:t.data};return 1!==r.depth&&32!==r.depth||(r.depth=8,r.channels=4,r.data=t.getRGBAData()),function(t,e){return new Vr(t,e).encode()}(r,e)}const ii={save(t,e={}){const{useCanvas:r=!1,encoder:i}=e;let{format:n}=e;if(!n){const e=/\.(?<format>[a-zA-Z]+)$/.exec(t);e&&(n=e.groups.format.toLowerCase())}if(!n)throw new Error("file format not provided");return new Promise(((t,e)=>{let s,a;switch(n.toLowerCase()){case"png":r?s=this.getCanvas().pngStream():a=ri(this,i);break;case"jpg":case"jpeg":r?s=this.getCanvas().jpegStream():a=ei(this,i);break;case"bmp":a=(0,f.encode)(this,i);break;default:throw new RangeError(`invalid output format: ${n}`)}if(s){let r=function(){throw new Error("createWriteStream does not exist in the browser")}();r.on("finish",t),r.on("error",e),s.pipe(r)}else a&&function(){throw new Error("writeFile does not exist in the browser")}()}))},toDataURL(t="image/png",e={}){"object"==typeof t&&(e=t,t="image/png");const{useCanvas:r=!1,encoder:i}=e;function n(e,r){return Kr(e(r,i),t)}return"image/bmp"===(t=function(t){return t.includes("/")||(t=`image/${t}`),t}(t))?n(f.encode,this):"image/png"!==t||r?"image/jpeg"!==t||r?this.getCanvas().toDataURL(t):n(ei,this):n(ri,this)},toBuffer(t={}){const{format:e="png",encoder:r}=t;switch(e.toLowerCase()){case"png":return ri(this,r);case"jpeg":case"jpg":return ei(this,r);case"bmp":return(0,f.encode)(this,r);default:throw new RangeError(`invalid output format: ${e}`)}},toBase64(t="image/png",e={}){if(e.async)return this.toDataURL(t,e).then((function(t){return t.substring(t.indexOf(",")+1)}));{const r=this.toDataURL(t,e);return r.substring(r.indexOf(",")+1)}},toBlob(t="image/png",e=.8){return l(this.getCanvas(),t,e)},getCanvas(){const t=new Jr(this.getRGBAData({clamped:!0}),this.width,this.height);let e=ti(this.width,this.height);return e.getContext("2d").putImageData(t,0,0),e}};var ni=__webpack_require__(2251),si=__webpack_require__.n(ni);let ai={configurable:!0,enumerable:!1,get:void 0};const oi="GREY",hi="RGB",li="HSL",ui="HSV",fi="CMYK",ci="BINARY",di="RGBA",mi={};mi.BINARY={components:1,alpha:0,bitDepth:1,colorModel:oi},mi.GREYA={components:1,alpha:1,bitDepth:8,colorModel:oi},mi.GREY={components:1,alpha:0,bitDepth:8,colorModel:oi},mi[di]={components:3,alpha:1,bitDepth:8,colorModel:hi},mi.RGB={components:3,alpha:0,bitDepth:8,colorModel:hi},mi.CMYK={components:4,alpha:0,bitDepth:8,colorModel:fi},mi.CMYKA={components:4,alpha:1,bitDepth:8,colorModel:fi};const pi=[1,8,16,32];var gi=__webpack_require__(9464),wi=__webpack_require__(9184),bi=__webpack_require__.n(wi);__webpack_require__(9798);const _i=new TextDecoder("utf-8"),yi=new TextEncoder;class vi{constructor(t=8192,e={}){let r=!1;"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=e.offset?e.offset>>>0:0,n=t.byteLength-i;let s=i;(ArrayBuffer.isView(t)||t instanceof vi)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+i),t=t.buffer),this.lastWrittenByte=r?n:0,this.buffer=t,this.length=n,this.byteLength=n,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,n),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const e=2*(this.offset+t),r=new Uint8Array(e);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){const e=new Uint8Array(t);for(let r=0;r<t;r++)e[r]=this.readByte();return e}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let r=0;r<t;r++)e+=this.readChar();return e}readUtf8(t=1){return e=this.readBytes(t),_i.decode(e);var e}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(function(t){return yi.encode(t)}(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const xi={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},ki={};for(let t in xi)ki[xi[t]]=Number(t);const Mi={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},Ai={};for(let t in Mi)Ai[Mi[t]]=Number(t);const Ei={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},Si={};for(let t in Ei)Si[Ei[t]]=Number(t);const Di={standard:i,exif:e,gps:r};class Ii{constructor(t){if(!t)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=t,this._hasMap=!1,this._map={}}get(t){if("number"==typeof t)return this.fields.get(t);if("string"==typeof t)return this.fields.get(Di[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const t=Di[this.kind].tagsById;for(let e of this.fields.keys())t[e]&&(this._map[t[e]]=this.fields.get(e));this._hasMap=!0}return this._map}}let Ci=new Map([[1,[1,Ri]],[2,[1,function(t,e){let r=[],i="";for(let n=0;n<e;n++){let e=String.fromCharCode(t.readUint8());"\0"===e?(r.push(i),i=""):i+=e}return 1===r.length?r[0]:r}]],[3,[2,function(t,e){if(1===e)return t.readUint16();let r=new Uint16Array(e);for(let i=0;i<e;i++)r[i]=t.readUint16();return r}]],[4,[4,function(t,e){if(1===e)return t.readUint32();let r=new Uint32Array(e);for(let i=0;i<e;i++)r[i]=t.readUint32();return r}]],[5,[8,function(t,e){if(1===e)return t.readUint32()/t.readUint32();let r=new Array(e);for(let i=0;i<e;i++)r[i]=t.readUint32()/t.readUint32();return r}]],[6,[1,function(t,e){if(1===e)return t.readInt8();let r=new Int8Array(e);for(let i=0;i<e;i++)r[i]=t.readInt8();return r}]],[7,[1,Ri]],[8,[2,function(t,e){if(1===e)return t.readInt16();let r=new Int16Array(e);for(let i=0;i<e;i++)r[i]=t.readInt16();return r}]],[9,[4,function(t,e){if(1===e)return t.readInt32();let r=new Int32Array(e);for(let i=0;i<e;i++)r[i]=t.readInt32();return r}]],[10,[8,function(t,e){if(1===e)return t.readInt32()/t.readInt32();let r=new Array(e);for(let i=0;i<e;i++)r[i]=t.readInt32()/t.readInt32();return r}]],[11,[4,function(t,e){if(1===e)return t.readFloat32();let r=new Float32Array(e);for(let i=0;i<e;i++)r[i]=t.readFloat32();return r}]],[12,[8,function(t,e){if(1===e)return t.readFloat64();let r=new Float64Array(e);for(let i=0;i<e;i++)r[i]=t.readFloat64();return r}]]]);function Ri(t,e){if(1===e)return t.readUint8();let r=new Uint8Array(e);for(let i=0;i<e;i++)r[i]=t.readUint8();return r}const Bi=[];for(let t=0;t<256;t++)Bi.push([t]);const Pi=[0];for(let t=256;t<4096;t++)Bi.push(Pi);class zi{constructor(t){this.stripArray=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);const e=new Map;for(let t=0;t<256;t++)e.set(t,[t]);this.currentBit=0,this.tableLength=258,this.currentBitLength=9,this.outData=new vi(t.byteLength)}decode(){let t=0,e=0;for(;257!==(t=this.getNextCode());)if(256===t){if(this.initializeTable(),t=this.getNextCode(),257===t)break;this.writeString(this.stringFromCode(t)),e=t}else if(this.isInTable(t))this.writeString(this.stringFromCode(t)),this.addStringToTable(this.stringFromCode(e).concat(this.stringFromCode(t)[0])),e=t;else{const r=this.stringFromCode(e).concat(this.stringFromCode(e)[0]);this.writeString(r),this.addStringToTable(r),e=t}const r=this.outData.toArray();return new DataView(r.buffer,r.byteOffset,r.byteLength)}initializeTable(){this.tableLength=258,this.currentBitLength=9}writeString(t){this.outData.writeBytes(t)}stringFromCode(t){return Bi[t]}isInTable(t){return t<this.tableLength}addStringToTable(t){Bi[this.tableLength++]=t,this.tableLength+1===2**this.currentBitLength&&this.currentBitLength++}getNextCode(){const t=this.currentBit%8,e=this.currentBit>>>3,r=8-t,i=this.currentBit+this.currentBitLength-8*(e+1);let n=8*(e+2)-(this.currentBit+this.currentBitLength);const s=8*(e+2)-this.currentBit;n=Math.max(0,n);let a=this.stripArray[e]&2**(8-t)-1;a<<=this.currentBitLength-r;let o=a;if(e+1<this.stripArray.length){let t=this.stripArray[e+1]>>>n;t<<=Math.max(0,this.currentBitLength-s),o+=t}if(i>8&&e+2<this.stripArray.length){const t=8*(e+3)-(this.currentBit+this.currentBitLength);o+=this.stripArray[e+2]>>>t}return this.currentBit+=this.currentBitLength,o}}function Ti(t){return new zi(t).decode()}const Ui=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class Fi extends Ii{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let t=new Date,e=Ui.exec(this.dateTime);if(null===e)throw new Error(`invalid dateTime: ${this.dateTime}`);return t.setFullYear(Number(e[1]),Number(e[2])-1,Number(e[3])),t.setHours(Number(e[4]),Number(e[5]),Number(e[6])),t}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const t=this.get("BitsPerSample");return t&&"number"!=typeof t?t[0]:t}get alpha(){const t=this.extraSamples;return!!t&&0!==t[0]}get associatedAlpha(){const t=this.extraSamples;return!!t&&1===t[0]}get extraSamples(){return Oi(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return Oi(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return Oi(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const t=2**this.bitsPerSample,e=this.get("ColorMap");if(!e)return;if(e.length!==3*t)throw new Error(`ColorMap size must be ${t}`);const r=[];for(let i=0;i<t;i++)r.push([e[i],e[i+t],e[i+2*t]]);return r}}function Oi(t){return"number"==typeof t?[t]:t}function Li(t){let e=t.length;for(;--e>=0;)t[e]=0}const Ni=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Zi=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Yi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Vi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ji=new Array(576);Li(ji);const Xi=new Array(60);Li(Xi);const Gi=new Array(512);Li(Gi);const qi=new Array(256);Li(qi);const Hi=new Array(29);Li(Hi);const Wi=new Array(30);function $i(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let Ki,Ji,Qi;function tn(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}Li(Wi);const en=t=>t<256?Gi[t]:Gi[256+(t>>>7)],rn=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},nn=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,rn(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},sn=(t,e,r)=>{nn(t,r[2*e],r[2*e+1])},an=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},on=(t,e,r)=>{const i=new Array(16);let n,s,a=0;for(n=1;n<=15;n++)i[n]=a=a+r[n-1]<<1;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=an(i[e]++,e))}},hn=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},ln=t=>{t.bi_valid>8?rn(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},un=(t,e,r,i)=>{const n=2*e,s=2*r;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]},fn=(t,e,r)=>{const i=t.heap[r];let n=r<<1;for(;n<=t.heap_len&&(n<t.heap_len&&un(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!un(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i},cn=(t,e,r)=>{let i,n,s,a,o=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?sn(t,n,e):(s=qi[n],sn(t,s+256+1,e),a=Ni[s],0!==a&&(n-=Hi[s],nn(t,n,a)),i--,s=en(i),sn(t,s,r),a=Zi[s],0!==a&&(i-=Wi[s],nn(t,i,a)))}while(o<t.last_lit);sn(t,256,e)},dn=(t,e)=>{const r=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,o,h,l=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<s;a++)0!==r[2*a]?(t.heap[++t.heap_len]=l=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)h=t.heap[++t.heap_len]=l<2?++l:0,r[2*h]=1,t.depth[h]=0,t.opt_len--,n&&(t.static_len-=i[2*h+1]);for(e.max_code=l,a=t.heap_len>>1;a>=1;a--)fn(t,r,a);h=s;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],fn(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,r[2*h]=r[2*a]+r[2*o],t.depth[h]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,r[2*a+1]=r[2*o+1]=h,t.heap[1]=h++,fn(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,h=e.stat_desc.max_length;let l,u,f,c,d,m,p=0;for(c=0;c<=15;c++)t.bl_count[c]=0;for(r[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<573;l++)u=t.heap[l],c=r[2*r[2*u+1]+1]+1,c>h&&(c=h,p++),r[2*u+1]=c,u>i||(t.bl_count[c]++,d=0,u>=o&&(d=a[u-o]),m=r[2*u],t.opt_len+=m*(c+d),s&&(t.static_len+=m*(n[2*u+1]+d)));if(0!==p){do{for(c=h-1;0===t.bl_count[c];)c--;t.bl_count[c]--,t.bl_count[c+1]+=2,t.bl_count[h]--,p-=2}while(p>0);for(c=h;0!==c;c--)for(u=t.bl_count[c];0!==u;)f=t.heap[--l],f>i||(r[2*f+1]!==c&&(t.opt_len+=(c-r[2*f+1])*r[2*f],r[2*f+1]=c),u--)}})(t,e),on(r,l,t.bl_count)},mn=(t,e,r)=>{let i,n,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=e[2*(i+1)+1],++o<h&&n===a||(o<l?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===a?(h=138,l=3):n===a?(h=6,l=3):(h=7,l=4))},pn=(t,e,r)=>{let i,n,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),i=0;i<=r;i++)if(n=a,a=e[2*(i+1)+1],!(++o<h&&n===a)){if(o<l)do{sn(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(sn(t,n,t.bl_tree),o--),sn(t,16,t.bl_tree),nn(t,o-3,2)):o<=10?(sn(t,17,t.bl_tree),nn(t,o-3,3)):(sn(t,18,t.bl_tree),nn(t,o-11,7));o=0,s=n,0===a?(h=138,l=3):n===a?(h=6,l=3):(h=7,l=4)}};let gn=!1;const wn=(t,e,r,i)=>{nn(t,0+(i?1:0),3),((t,e,r,i)=>{ln(t),rn(t,r),rn(t,~r),t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r})(t,e,r)};var bn={_tr_init:t=>{gn||((()=>{let t,e,r,i,n;const s=new Array(16);for(r=0,i=0;i<28;i++)for(Hi[i]=r,t=0;t<1<<Ni[i];t++)qi[r++]=i;for(qi[r-1]=i,n=0,i=0;i<16;i++)for(Wi[i]=n,t=0;t<1<<Zi[i];t++)Gi[n++]=i;for(n>>=7;i<30;i++)for(Wi[i]=n<<7,t=0;t<1<<Zi[i]-7;t++)Gi[256+n++]=i;for(e=0;e<=15;e++)s[e]=0;for(t=0;t<=143;)ji[2*t+1]=8,t++,s[8]++;for(;t<=255;)ji[2*t+1]=9,t++,s[9]++;for(;t<=279;)ji[2*t+1]=7,t++,s[7]++;for(;t<=287;)ji[2*t+1]=8,t++,s[8]++;for(on(ji,287,s),t=0;t<30;t++)Xi[2*t+1]=5,Xi[2*t]=an(t,5);Ki=new $i(ji,Ni,257,286,15),Ji=new $i(Xi,Zi,0,30,15),Qi=new $i(new Array(0),Yi,0,19,7)})(),gn=!0),t.l_desc=new tn(t.dyn_ltree,Ki),t.d_desc=new tn(t.dyn_dtree,Ji),t.bl_desc=new tn(t.bl_tree,Qi),t.bi_buf=0,t.bi_valid=0,hn(t)},_tr_stored_block:wn,_tr_flush_block:(t,e,r,i)=>{let n,s,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),dn(t,t.l_desc),dn(t,t.d_desc),a=(t=>{let e;for(mn(t,t.dyn_ltree,t.l_desc.max_code),mn(t,t.dyn_dtree,t.d_desc.max_code),dn(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Vi[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),n=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==e?wn(t,e,r,i):4===t.strategy||s===n?(nn(t,2+(i?1:0),3),cn(t,ji,Xi)):(nn(t,4+(i?1:0),3),((t,e,r,i)=>{let n;for(nn(t,e-257,5),nn(t,r-1,5),nn(t,i-4,4),n=0;n<i;n++)nn(t,t.bl_tree[2*Vi[n]+1],3);pn(t,t.dyn_ltree,e-1),pn(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),cn(t,t.dyn_ltree,t.dyn_dtree)),hn(t),i&&ln(t)},_tr_tally:(t,e,r)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(qi[r]+256+1)]++,t.dyn_dtree[2*en(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{nn(t,2,3),sn(t,256,ji),(t=>{16===t.bi_valid?(rn(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},_n=(t,e,r,i)=>{let n=65535&t|0,s=t>>>16&65535|0,a=0;for(;0!==r;){a=r>2e3?2e3:r,r-=a;do{n=n+e[i++]|0,s=s+n|0}while(--a);n%=65521,s%=65521}return n|s<<16|0};const yn=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var vn=(t,e,r,i)=>{const n=yn,s=i+r;t^=-1;for(let r=i;r<s;r++)t=t>>>8^n[255&(t^e[r])];return-1^t},xn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},kn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Mn,_tr_stored_block:An,_tr_flush_block:En,_tr_tally:Sn,_tr_align:Dn}=bn,{Z_NO_FLUSH:In,Z_PARTIAL_FLUSH:Cn,Z_FULL_FLUSH:Rn,Z_FINISH:Bn,Z_BLOCK:Pn,Z_OK:zn,Z_STREAM_END:Tn,Z_STREAM_ERROR:Un,Z_DATA_ERROR:Fn,Z_BUF_ERROR:On,Z_DEFAULT_COMPRESSION:Ln,Z_FILTERED:Nn,Z_HUFFMAN_ONLY:Zn,Z_RLE:Yn,Z_FIXED:Vn,Z_DEFAULT_STRATEGY:jn,Z_UNKNOWN:Xn,Z_DEFLATED:Gn}=kn,qn=258,Hn=262,Wn=103,$n=113,Kn=666,Jn=(t,e)=>(t.msg=xn[e],e),Qn=t=>(t<<1)-(t>4?9:0),ts=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let es=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const rs=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},is=(t,e)=>{En(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,rs(t.strm)},ns=(t,e)=>{t.pending_buf[t.pending++]=e},ss=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},as=(t,e,r,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),r),1===t.state.wrap?t.adler=_n(t.adler,e,n,r):2===t.state.wrap&&(t.adler=vn(t.adler,e,n,r)),t.next_in+=n,t.total_in+=n,n)},os=(t,e)=>{let r,i,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match;const h=t.strstart>t.w_size-Hn?t.strstart-(t.w_size-Hn):0,l=t.window,u=t.w_mask,f=t.prev,c=t.strstart+qn;let d=l[s+a-1],m=l[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(r=e,l[r+a]===m&&l[r+a-1]===d&&l[r]===l[s]&&l[++r]===l[s+1]){s+=2,r++;do{}while(l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<c);if(i=qn-(c-s),s=c-qn,i>a){if(t.match_start=e,a=i,i>=o)break;d=l[s+a-1],m=l[s+a]}}}while((e=f[e&u])>h&&0!=--n);return a<=t.lookahead?a:t.lookahead},hs=t=>{const e=t.w_size;let r,i,n,s,a;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Hn)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,i=t.hash_size,r=i;do{n=t.head[--r],t.head[r]=n>=e?n-e:0}while(--i);i=e,r=i;do{n=t.prev[--r],t.prev[r]=n>=e?n-e:0}while(--i);s+=e}if(0===t.strm.avail_in)break;if(i=as(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=es(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=es(t,t.ins_h,t.window[a+3-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Hn&&0!==t.strm.avail_in)},ls=(t,e)=>{let r,i;for(;;){if(t.lookahead<Hn){if(hs(t),t.lookahead<Hn&&e===In)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=es(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-Hn&&(t.match_length=os(t,r)),t.match_length>=3)if(i=Sn(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=es(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=es(t,t.ins_h,t.window[t.strstart+1]);else i=Sn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(is(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Bn?(is(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(is(t,!1),0===t.strm.avail_out)?1:2},us=(t,e)=>{let r,i,n;for(;;){if(t.lookahead<Hn){if(hs(t),t.lookahead<Hn&&e===In)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=es(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Hn&&(t.match_length=os(t,r),t.match_length<=5&&(t.strategy===Nn||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=Sn(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=es(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(is(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=Sn(t,0,t.window[t.strstart-1]),i&&is(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=Sn(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Bn?(is(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(is(t,!1),0===t.strm.avail_out)?1:2};function fs(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}const cs=[new fs(0,0,0,0,((t,e)=>{let r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(hs(t),0===t.lookahead&&e===In)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,is(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Hn&&(is(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Bn?(is(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(is(t,!1),t.strm.avail_out),1)})),new fs(4,4,8,4,ls),new fs(4,5,16,8,ls),new fs(4,6,32,32,ls),new fs(4,4,16,16,us),new fs(8,16,32,32,us),new fs(8,16,128,128,us),new fs(8,32,128,256,us),new fs(32,128,258,1024,us),new fs(32,258,258,4096,us)];function ds(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Gn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ts(this.dyn_ltree),ts(this.dyn_dtree),ts(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ts(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ts(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ms=t=>{if(!t||!t.state)return Jn(t,Un);t.total_in=t.total_out=0,t.data_type=Xn;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:$n,t.adler=2===e.wrap?0:1,e.last_flush=In,Mn(e),zn},ps=t=>{const e=ms(t);var r;return e===zn&&((r=t.state).window_size=2*r.w_size,ts(r.head),r.max_lazy_match=cs[r.level].max_lazy,r.good_match=cs[r.level].good_length,r.nice_match=cs[r.level].nice_length,r.max_chain_length=cs[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},gs=(t,e,r,i,n,s)=>{if(!t)return Un;let a=1;if(e===Ln&&(e=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),n<1||n>9||r!==Gn||i<8||i>15||e<0||e>9||s<0||s>Vn)return Jn(t,Un);8===i&&(i=9);const o=new ds;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=r,ps(t)};var ws=gs,bs=(t,e)=>t&&t.state?2!==t.state.wrap?Un:(t.state.gzhead=e,zn):Un,_s=(t,e)=>{let r,i;if(!t||!t.state||e>Pn||e<0)return t?Jn(t,Un):Un;const n=t.state;if(!t.output||!t.input&&0!==t.avail_in||n.status===Kn&&e!==Bn)return Jn(t,0===t.avail_out?On:Un);n.strm=t;const s=n.last_flush;if(n.last_flush=e,42===n.status)if(2===n.wrap)t.adler=0,ns(n,31),ns(n,139),ns(n,8),n.gzhead?(ns(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ns(n,255&n.gzhead.time),ns(n,n.gzhead.time>>8&255),ns(n,n.gzhead.time>>16&255),ns(n,n.gzhead.time>>24&255),ns(n,9===n.level?2:n.strategy>=Zn||n.level<2?4:0),ns(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(ns(n,255&n.gzhead.extra.length),ns(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=vn(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(ns(n,0),ns(n,0),ns(n,0),ns(n,0),ns(n,0),ns(n,9===n.level?2:n.strategy>=Zn||n.level<2?4:0),ns(n,3),n.status=$n);else{let e=Gn+(n.w_bits-8<<4)<<8,r=-1;r=n.strategy>=Zn||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=r<<6,0!==n.strstart&&(e|=32),e+=31-e%31,n.status=$n,ss(n,e),0!==n.strstart&&(ss(n,t.adler>>>16),ss(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(r=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>r&&(t.adler=vn(t.adler,n.pending_buf,n.pending-r,r)),rs(t),r=n.pending,n.pending!==n.pending_buf_size));)ns(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>r&&(t.adler=vn(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=vn(t.adler,n.pending_buf,n.pending-r,r)),rs(t),r=n.pending,n.pending===n.pending_buf_size)){i=1;break}i=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,ns(n,i)}while(0!==i);n.gzhead.hcrc&&n.pending>r&&(t.adler=vn(t.adler,n.pending_buf,n.pending-r,r)),0===i&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=vn(t.adler,n.pending_buf,n.pending-r,r)),rs(t),r=n.pending,n.pending===n.pending_buf_size)){i=1;break}i=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,ns(n,i)}while(0!==i);n.gzhead.hcrc&&n.pending>r&&(t.adler=vn(t.adler,n.pending_buf,n.pending-r,r)),0===i&&(n.status=Wn)}else n.status=Wn;if(n.status===Wn&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&rs(t),n.pending+2<=n.pending_buf_size&&(ns(n,255&t.adler),ns(n,t.adler>>8&255),t.adler=0,n.status=$n)):n.status=$n),0!==n.pending){if(rs(t),0===t.avail_out)return n.last_flush=-1,zn}else if(0===t.avail_in&&Qn(e)<=Qn(s)&&e!==Bn)return Jn(t,On);if(n.status===Kn&&0!==t.avail_in)return Jn(t,On);if(0!==t.avail_in||0!==n.lookahead||e!==In&&n.status!==Kn){let r=n.strategy===Zn?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(hs(t),0===t.lookahead)){if(e===In)return 1;break}if(t.match_length=0,r=Sn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(is(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Bn?(is(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(is(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===Yn?((t,e)=>{let r,i,n,s;const a=t.window;for(;;){if(t.lookahead<=qn){if(hs(t),t.lookahead<=qn&&e===In)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=t.strstart-1,i=a[n],i===a[++n]&&i===a[++n]&&i===a[++n])){s=t.strstart+qn;do{}while(i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&n<s);t.match_length=qn-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=Sn(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Sn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(is(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Bn?(is(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(is(t,!1),0===t.strm.avail_out)?1:2})(n,e):cs[n.level].func(n,e);if(3!==r&&4!==r||(n.status=Kn),1===r||3===r)return 0===t.avail_out&&(n.last_flush=-1),zn;if(2===r&&(e===Cn?Dn(n):e!==Pn&&(An(n,0,0,!1),e===Rn&&(ts(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),rs(t),0===t.avail_out))return n.last_flush=-1,zn}return e!==Bn?zn:n.wrap<=0?Tn:(2===n.wrap?(ns(n,255&t.adler),ns(n,t.adler>>8&255),ns(n,t.adler>>16&255),ns(n,t.adler>>24&255),ns(n,255&t.total_in),ns(n,t.total_in>>8&255),ns(n,t.total_in>>16&255),ns(n,t.total_in>>24&255)):(ss(n,t.adler>>>16),ss(n,65535&t.adler)),rs(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?zn:Tn)},ys=t=>{if(!t||!t.state)return Un;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==Wn&&e!==$n&&e!==Kn?Jn(t,Un):(t.state=null,e===$n?Jn(t,Fn):zn)},vs=(t,e)=>{let r=e.length;if(!t||!t.state)return Un;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return Un;if(1===n&&(t.adler=_n(t.adler,e,r,0)),i.wrap=0,r>=i.w_size){0===n&&(ts(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(r-i.w_size,r),0),e=t,r=i.w_size}const s=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,hs(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=es(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,hs(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=a,t.input=o,t.avail_in=s,i.wrap=n,zn};const xs=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var ks=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)xs(r,e)&&(t[e]=r[e])}}return t},Ms=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,i=0,n=t.length;e<n;e++){let n=t[e];r.set(n,i),i+=n.length}return r};let As=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){As=!1}const Es=new Uint8Array(256);for(let t=0;t<256;t++)Es[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Es[254]=Es[254]=1;var Ss=t=>{let e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)r=t.charCodeAt(n),55296==(64512&r)&&n+1<a&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),n++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)r=t.charCodeAt(n),55296==(64512&r)&&n+1<a&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|63&r):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},Ds=(t,e)=>{let r,i;const n=e||t.length,s=new Array(2*n);for(i=0,r=0;r<n;){let e=t[r++];if(e<128){s[i++]=e;continue}let a=Es[e];if(a>4)s[i++]=65533,r+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&r<n;)e=e<<6|63&t[r++],a--;a>1?s[i++]=65533:e<65536?s[i++]=e:(e-=65536,s[i++]=55296|e>>10&1023,s[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&As)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r})(s,i)},Is=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+Es[t[r]]>e?r:e},Cs=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Rs=Object.prototype.toString,{Z_NO_FLUSH:Bs,Z_SYNC_FLUSH:Ps,Z_FULL_FLUSH:zs,Z_FINISH:Ts,Z_OK:Us,Z_STREAM_END:Fs,Z_DEFAULT_COMPRESSION:Os,Z_DEFAULT_STRATEGY:Ls,Z_DEFLATED:Ns}=kn;function Zs(t){this.options=ks({level:Os,method:Ns,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ls},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Cs,this.strm.avail_out=0;let r=ws(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==Us)throw new Error(xn[r]);if(e.header&&bs(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Ss(e.dictionary):"[object ArrayBuffer]"===Rs.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=vs(this.strm,t),r!==Us)throw new Error(xn[r]);this._dict_set=!0}}function Ys(t,e){const r=new Zs(e);if(r.push(t,!0),r.err)throw r.msg||xn[r.err];return r.result}Zs.prototype.push=function(t,e){const r=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Ts:Bs,"string"==typeof t?r.input=Ss(t):"[object ArrayBuffer]"===Rs.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(s===Ps||s===zs)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(n=_s(r,s),n===Fs)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),n=ys(this.strm),this.onEnd(n),this.ended=!0,n===Us;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Zs.prototype.onData=function(t){this.chunks.push(t)},Zs.prototype.onEnd=function(t){t===Us&&(this.result=Ms(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Vs={Deflate:Zs,deflate:Ys,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Ys(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Ys(t,e)},constants:kn},js=function(t,e){let r,i,n,s,a,o,h,l,u,f,c,d,m,p,g,w,b,_,y,v,x,k,M,A;const E=t.state;r=t.next_in,M=t.input,i=r+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),a=n+(t.avail_out-257),o=E.dmax,h=E.wsize,l=E.whave,u=E.wnext,f=E.window,c=E.hold,d=E.bits,m=E.lencode,p=E.distcode,g=(1<<E.lenbits)-1,w=(1<<E.distbits)-1;t:do{d<15&&(c+=M[r++]<<d,d+=8,c+=M[r++]<<d,d+=8),b=m[c&g];e:for(;;){if(_=b>>>24,c>>>=_,d-=_,_=b>>>16&255,0===_)A[n++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=m[(65535&b)+(c&(1<<_)-1)];continue e}if(32&_){E.mode=12;break t}t.msg="invalid literal/length code",E.mode=30;break t}y=65535&b,_&=15,_&&(d<_&&(c+=M[r++]<<d,d+=8),y+=c&(1<<_)-1,c>>>=_,d-=_),d<15&&(c+=M[r++]<<d,d+=8,c+=M[r++]<<d,d+=8),b=p[c&w];r:for(;;){if(_=b>>>24,c>>>=_,d-=_,_=b>>>16&255,!(16&_)){if(0==(64&_)){b=p[(65535&b)+(c&(1<<_)-1)];continue r}t.msg="invalid distance code",E.mode=30;break t}if(v=65535&b,_&=15,d<_&&(c+=M[r++]<<d,d+=8,d<_&&(c+=M[r++]<<d,d+=8)),v+=c&(1<<_)-1,v>o){t.msg="invalid distance too far back",E.mode=30;break t}if(c>>>=_,d-=_,_=n-s,v>_){if(_=v-_,_>l&&E.sane){t.msg="invalid distance too far back",E.mode=30;break t}if(x=0,k=f,0===u){if(x+=h-_,_<y){y-=_;do{A[n++]=f[x++]}while(--_);x=n-v,k=A}}else if(u<_){if(x+=h+u-_,_-=u,_<y){y-=_;do{A[n++]=f[x++]}while(--_);if(x=0,u<y){_=u,y-=_;do{A[n++]=f[x++]}while(--_);x=n-v,k=A}}}else if(x+=u-_,_<y){y-=_;do{A[n++]=f[x++]}while(--_);x=n-v,k=A}for(;y>2;)A[n++]=k[x++],A[n++]=k[x++],A[n++]=k[x++],y-=3;y&&(A[n++]=k[x++],y>1&&(A[n++]=k[x++]))}else{x=n-v;do{A[n++]=A[x++],A[n++]=A[x++],A[n++]=A[x++],y-=3}while(y>2);y&&(A[n++]=A[x++],y>1&&(A[n++]=A[x++]))}break}}break}}while(r<i&&n<a);y=d>>3,r-=y,d-=y<<3,c&=(1<<d)-1,t.next_in=r,t.next_out=n,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=n<a?a-n+257:257-(n-a),E.hold=c,E.bits=d};const Xs=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Gs=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),qs=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Hs=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ws=(t,e,r,i,n,s,a,o)=>{const h=o.bits;let l,u,f,c,d,m,p=0,g=0,w=0,b=0,_=0,y=0,v=0,x=0,k=0,M=0,A=null,E=0;const S=new Uint16Array(16),D=new Uint16Array(16);let I,C,R,B=null,P=0;for(p=0;p<=15;p++)S[p]=0;for(g=0;g<i;g++)S[e[r+g]]++;for(_=h,b=15;b>=1&&0===S[b];b--);if(_>b&&(_=b),0===b)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(w=1;w<b&&0===S[w];w++);for(_<w&&(_=w),x=1,p=1;p<=15;p++)if(x<<=1,x-=S[p],x<0)return-1;if(x>0&&(0===t||1!==b))return-1;for(D[1]=0,p=1;p<15;p++)D[p+1]=D[p]+S[p];for(g=0;g<i;g++)0!==e[r+g]&&(a[D[e[r+g]]++]=g);if(0===t?(A=B=a,m=19):1===t?(A=Xs,E-=257,B=Gs,P-=257,m=256):(A=qs,B=Hs,m=-1),M=0,g=0,p=w,d=s,y=_,v=0,f=-1,k=1<<_,c=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){I=p-v,a[g]<m?(C=0,R=a[g]):a[g]>m?(C=B[P+a[g]],R=A[E+a[g]]):(C=96,R=0),l=1<<p-v,u=1<<y,w=u;do{u-=l,n[d+(M>>v)+u]=I<<24|C<<16|R|0}while(0!==u);for(l=1<<p-1;M&l;)l>>=1;if(0!==l?(M&=l-1,M+=l):M=0,g++,0==--S[p]){if(p===b)break;p=e[r+a[g]]}if(p>_&&(M&c)!==f){for(0===v&&(v=_),d+=w,y=p-v,x=1<<y;y+v<b&&(x-=S[y+v],!(x<=0));)y++,x<<=1;if(k+=1<<y,1===t&&k>852||2===t&&k>592)return 1;f=M&c,n[f]=_<<24|y<<16|d-s|0}}return 0!==M&&(n[d+M]=p-v<<24|64<<16|0),o.bits=_,0};const{Z_FINISH:$s,Z_BLOCK:Ks,Z_TREES:Js,Z_OK:Qs,Z_STREAM_END:ta,Z_NEED_DICT:ea,Z_STREAM_ERROR:ra,Z_DATA_ERROR:ia,Z_MEM_ERROR:na,Z_BUF_ERROR:sa,Z_DEFLATED:aa}=kn,oa=12,ha=30,la=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ua(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const fa=t=>{if(!t||!t.state)return ra;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Qs},ca=t=>{if(!t||!t.state)return ra;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,fa(t)},da=(t,e)=>{let r;if(!t||!t.state)return ra;const i=t.state;return e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?ra:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,ca(t))},ma=(t,e)=>{if(!t)return ra;const r=new ua;t.state=r,r.window=null;const i=da(t,e);return i!==Qs&&(t.state=null),i};let pa,ga,wa=!0;const ba=t=>{if(wa){pa=new Int32Array(512),ga=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ws(1,t.lens,0,288,pa,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ws(2,t.lens,0,32,ga,0,t.work,{bits:5}),wa=!1}t.lencode=pa,t.lenbits=9,t.distcode=ga,t.distbits=5},_a=(t,e,r,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),s.window.set(e.subarray(r-i,r-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(r-i,r),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var ya=ca,va=ma,xa=(t,e)=>{let r,i,n,s,a,o,h,l,u,f,c,d,m,p,g,w,b,_,y,v,x,k,M=0;const A=new Uint8Array(4);let E,S;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return ra;r=t.state,r.mode===oa&&(r.mode=13),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,l=r.hold,u=r.bits,f=o,c=h,k=Qs;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;u<16;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(2&r.wrap&&35615===l){r.check=0,A[0]=255&l,A[1]=l>>>8&255,r.check=vn(r.check,A,2,0),l=0,u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",r.mode=ha;break}if((15&l)!==aa){t.msg="unknown compression method",r.mode=ha;break}if(l>>>=4,u-=4,x=8+(15&l),0===r.wbits)r.wbits=x;else if(x>r.wbits){t.msg="invalid window size",r.mode=ha;break}r.dmax=1<<r.wbits,t.adler=r.check=1,r.mode=512&l?10:oa,l=0,u=0;break;case 2:for(;u<16;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(r.flags=l,(255&r.flags)!==aa){t.msg="unknown compression method",r.mode=ha;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=ha;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,r.check=vn(r.check,A,2,0)),l=0,u=0,r.mode=3;case 3:for(;u<32;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.head&&(r.head.time=l),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,r.check=vn(r.check,A,4,0)),l=0,u=0,r.mode=4;case 4:for(;u<16;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,r.check=vn(r.check,A,2,0)),l=0,u=0,r.mode=5;case 5:if(1024&r.flags){for(;u<16;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,r.check=vn(r.check,A,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(d=r.length,d>o&&(d=o),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(i.subarray(s,s+d),x)),512&r.flags&&(r.check=vn(r.check,i,d,s)),o-=d,s+=d,r.length-=d),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break t;d=0;do{x=i[s+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&d<o);if(512&r.flags&&(r.check=vn(r.check,i,d,s)),o-=d,s+=d,x)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break t;d=0;do{x=i[s+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&d<o);if(512&r.flags&&(r.check=vn(r.check,i,d,s)),o-=d,s+=d,x)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;u<16;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(l!==(65535&r.check)){t.msg="header crc mismatch",r.mode=ha;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=oa;break;case 10:for(;u<32;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}t.adler=r.check=la(l),l=0,u=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=u,ea;t.adler=r.check=1,r.mode=oa;case oa:if(e===Ks||e===Js)break t;case 13:if(r.last){l>>>=7&u,u-=7&u,r.mode=27;break}for(;u<3;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}switch(r.last=1&l,l>>>=1,u-=1,3&l){case 0:r.mode=14;break;case 1:if(ba(r),r.mode=20,e===Js){l>>>=2,u-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=ha}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ha;break}if(r.length=65535&l,l=0,u=0,r.mode=15,e===Js)break t;case 15:r.mode=16;case 16:if(d=r.length,d){if(d>o&&(d=o),d>h&&(d=h),0===d)break t;n.set(i.subarray(s,s+d),a),o-=d,s+=d,h-=d,a+=d,r.length-=d;break}r.mode=oa;break;case 17:for(;u<14;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ha;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;u<3;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.lens[D[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},k=Ws(0,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,k){t.msg="invalid code lengths set",r.mode=ha;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;M=r.lencode[l&(1<<r.lenbits)-1],g=M>>>24,w=M>>>16&255,b=65535&M,!(g<=u);){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(b<16)l>>>=g,u-=g,r.lens[r.have++]=b;else{if(16===b){for(S=g+2;u<S;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(l>>>=g,u-=g,0===r.have){t.msg="invalid bit length repeat",r.mode=ha;break}x=r.lens[r.have-1],d=3+(3&l),l>>>=2,u-=2}else if(17===b){for(S=g+3;u<S;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}l>>>=g,u-=g,x=0,d=3+(7&l),l>>>=3,u-=3}else{for(S=g+7;u<S;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}l>>>=g,u-=g,x=0,d=11+(127&l),l>>>=7,u-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ha;break}for(;d--;)r.lens[r.have++]=x}}if(r.mode===ha)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=ha;break}if(r.lenbits=9,E={bits:r.lenbits},k=Ws(1,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,k){t.msg="invalid literal/lengths set",r.mode=ha;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},k=Ws(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,k){t.msg="invalid distances set",r.mode=ha;break}if(r.mode=20,e===Js)break t;case 20:r.mode=21;case 21:if(o>=6&&h>=258){t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=u,js(t,c),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,l=r.hold,u=r.bits,r.mode===oa&&(r.back=-1);break}for(r.back=0;M=r.lencode[l&(1<<r.lenbits)-1],g=M>>>24,w=M>>>16&255,b=65535&M,!(g<=u);){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(w&&0==(240&w)){for(_=g,y=w,v=b;M=r.lencode[v+((l&(1<<_+y)-1)>>_)],g=M>>>24,w=M>>>16&255,b=65535&M,!(_+g<=u);){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}l>>>=_,u-=_,r.back+=_}if(l>>>=g,u-=g,r.back+=g,r.length=b,0===w){r.mode=26;break}if(32&w){r.back=-1,r.mode=oa;break}if(64&w){t.msg="invalid literal/length code",r.mode=ha;break}r.extra=15&w,r.mode=22;case 22:if(r.extra){for(S=r.extra;u<S;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;M=r.distcode[l&(1<<r.distbits)-1],g=M>>>24,w=M>>>16&255,b=65535&M,!(g<=u);){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(0==(240&w)){for(_=g,y=w,v=b;M=r.distcode[v+((l&(1<<_+y)-1)>>_)],g=M>>>24,w=M>>>16&255,b=65535&M,!(_+g<=u);){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}l>>>=_,u-=_,r.back+=_}if(l>>>=g,u-=g,r.back+=g,64&w){t.msg="invalid distance code",r.mode=ha;break}r.offset=b,r.extra=15&w,r.mode=24;case 24:if(r.extra){for(S=r.extra;u<S;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ha;break}r.mode=25;case 25:if(0===h)break t;if(d=c-h,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ha;break}d>r.wnext?(d-=r.wnext,m=r.wsize-d):m=r.wnext-d,d>r.length&&(d=r.length),p=r.window}else p=n,m=a-r.offset,d=r.length;d>h&&(d=h),h-=d,r.length-=d;do{n[a++]=p[m++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===h)break t;n[a++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;u<32;){if(0===o)break t;o--,l|=i[s++]<<u,u+=8}if(c-=h,t.total_out+=c,r.total+=c,c&&(t.adler=r.check=r.flags?vn(r.check,n,c,a-c):_n(r.check,n,c,a-c)),c=h,(r.flags?l:la(l))!==r.check){t.msg="incorrect data check",r.mode=ha;break}l=0,u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;u<32;){if(0===o)break t;o--,l+=i[s++]<<u,u+=8}if(l!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=ha;break}l=0,u=0}r.mode=29;case 29:k=ta;break t;case ha:k=ia;break t;case 31:return na;case 32:default:return ra}return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=u,(r.wsize||c!==t.avail_out&&r.mode<ha&&(r.mode<27||e!==$s))&&_a(t,t.output,t.next_out,c-t.avail_out),f-=t.avail_in,c-=t.avail_out,t.total_in+=f,t.total_out+=c,r.total+=c,r.wrap&&c&&(t.adler=r.check=r.flags?vn(r.check,n,c,t.next_out-c):_n(r.check,n,c,t.next_out-c)),t.data_type=r.bits+(r.last?64:0)+(r.mode===oa?128:0)+(20===r.mode||15===r.mode?256:0),(0===f&&0===c||e===$s)&&k===Qs&&(k=sa),k},ka=t=>{if(!t||!t.state)return ra;let e=t.state;return e.window&&(e.window=null),t.state=null,Qs},Ma=(t,e)=>{if(!t||!t.state)return ra;const r=t.state;return 0==(2&r.wrap)?ra:(r.head=e,e.done=!1,Qs)},Aa=(t,e)=>{const r=e.length;let i,n,s;return t&&t.state?(i=t.state,0!==i.wrap&&11!==i.mode?ra:11===i.mode&&(n=1,n=_n(n,e,r,0),n!==i.check)?ia:(s=_a(t,e,r,r),s?(i.mode=31,na):(i.havedict=1,Qs))):ra},Ea=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Sa=Object.prototype.toString,{Z_NO_FLUSH:Da,Z_FINISH:Ia,Z_OK:Ca,Z_STREAM_END:Ra,Z_NEED_DICT:Ba,Z_STREAM_ERROR:Pa,Z_DATA_ERROR:za,Z_MEM_ERROR:Ta}=kn;function Ua(t){this.options=ks({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Cs,this.strm.avail_out=0;let r=va(this.strm,e.windowBits);if(r!==Ca)throw new Error(xn[r]);if(this.header=new Ea,Ma(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Ss(e.dictionary):"[object ArrayBuffer]"===Sa.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Aa(this.strm,e.dictionary),r!==Ca)))throw new Error(xn[r])}function Fa(t,e){const r=new Ua(e);if(r.push(t),r.err)throw r.msg||xn[r.err];return r.result}Ua.prototype.push=function(t,e){const r=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(a=e===~~e?e:!0===e?Ia:Da,"[object ArrayBuffer]"===Sa.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),s=xa(r,a),s===Ba&&n&&(s=Aa(r,n),s===Ca?s=xa(r,a):s===za&&(s=Ba));r.avail_in>0&&s===Ra&&r.state.wrap>0&&0!==t[r.next_in];)ya(r),s=xa(r,a);switch(s){case Pa:case za:case Ba:case Ta:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(0===r.avail_out||s===Ra))if("string"===this.options.to){let t=Is(r.output,r.next_out),e=r.next_out-t,n=Ds(r.output,t);r.next_out=e,r.avail_out=i-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(n)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==Ca||0!==o){if(s===Ra)return s=ka(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},Ua.prototype.onData=function(t){this.chunks.push(t)},Ua.prototype.onEnd=function(t){t===Ca&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ms(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Oa={Inflate:Ua,inflate:Fa,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Fa(t,e)},ungzip:Fa,constants:kn};const{Deflate:La,deflate:Na,deflateRaw:Za,gzip:Ya}=Vs,{Inflate:Va,inflate:ja,inflateRaw:Xa,ungzip:Ga}=Oa;var qa=ja;function Ha(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=qa(e);return new DataView(r.buffer,r.byteOffset,r.byteLength)}const Wa={ignoreImageData:!1,onlyFirst:!1};class $a extends vi{constructor(t){super(t),this._nextIFD=0}get isMultiPage(){let t=0;for(this.decodeHeader();this._nextIFD;)if(t++,this.decodeIFD({ignoreImageData:!0},!0),2===t)return!0;if(1===t)return!1;throw Ka("ifdCount",t)}get pageCount(){let t=0;for(this.decodeHeader();this._nextIFD;)t++,this.decodeIFD({ignoreImageData:!0},!0);if(t>0)return t;throw Ka("ifdCount",t)}decode(t={}){t=Object.assign({},Wa,t);const e=[];for(this.decodeHeader();this._nextIFD;)if(e.push(this.decodeIFD(t,!0)),t.onlyFirst)return[e[0]];return e}decodeHeader(){const t=this.readUint16();if(18761===t)this.setLittleEndian();else{if(19789!==t)throw new Error(`invalid byte order: 0x${t.toString(16)}`);this.setBigEndian()}if(42!==this.readUint16())throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t,e){let r;if(this.seek(this._nextIFD),e)r=new Fi;else{if(!t.kind)throw new Error("kind is missing");r=new Ii(t.kind)}const i=this.readUint16();for(let t=0;t<i;t++)this.decodeIFDEntry(r);if(!t.ignoreImageData){if(!(r instanceof Fi))throw new Error("must be a tiff ifd");this.decodeImageData(r)}return this._nextIFD=this.readUint32(),r}decodeIFDEntry(t){const e=this.offset,r=this.readUint16(),i=this.readUint16(),n=this.readUint32();if(i<1||i>12)return void this.skip(4);(function(t,e){const r=Ci.get(t);if(!r)throw new Error(`type not found: ${t}`);return r[0]*e})(i,n)>4&&this.seek(this.readUint32());const s=function(t,e,r){const i=Ci.get(e);if(!i)throw new Error(`type not found: ${e}`);return i[1](t,r)}(this,i,n);if(t.fields.set(r,s),34665===r||34853===r){let e=this.offset,i="exif";34665===r?i="exif":34853===r&&(i="gps"),this._nextIFD=s,t[i]=this.decodeIFD({kind:i,ignoreImageData:!0},!1),this.offset=e}this.seek(e),this.skip(12)}decodeImageData(t){const e=t.orientation;if(e&&1!==e)throw Ka("orientation",e);switch(t.type){case 0:case 1:case 2:case 3:this.readStripData(t);break;default:throw Ka("image type",t.type)}if(this.applyPredictor(t),this.convertAlpha(t),0===t.type){const e=t.bitsPerSample,r=Math.pow(2,e)-1;for(let e=0;e<t.data.length;e++)t.data[e]=r-t.data[e]}}readStripData(t){const e=t.width,r=t.height,i=t.bitsPerSample,n=t.sampleFormat,s=e*r*t.samplesPerPixel,a=function(t,e,r){if(8===e)return new Uint8Array(t);if(16===e)return new Uint16Array(t);if(32===e&&3===r)return new Float32Array(t);throw Ka("bit depth / sample format",`${e} / ${r}`)}(s,i,n),o=t.rowsPerStrip*e*t.samplesPerPixel,h=t.stripOffsets,l=t.stripByteCounts;let u=s,f=0;for(let e=0;e<h.length;e++){let r=new DataView(this.buffer,h[e],l[e]),s=u>o?o:u;u-=s;let c=r;switch(t.compression){case 1:break;case 5:c=Ti(r);break;case 8:c=Ha(r);break;case 2:throw Ka("Compression","CCITT Group 3");case 32773:throw Ka("Compression","PackBits");default:throw Ka("Compression",t.compression)}f=this.fillUncompressed(i,n,a,c,f,s)}t.data=a}fillUncompressed(t,e,r,i,n,s){if(8===t)return function(t,e,r,i){for(let n=0;n<i;n++)t[r++]=e.getUint8(n);return r}(r,i,n,s);if(16===t)return function(t,e,r,i,n){for(let s=0;s<2*i;s+=2)t[r++]=e.getUint16(s,n);return r}(r,i,n,s,this.isLittleEndian());if(32===t&&3===e)return function(t,e,r,i,n){for(let s=0;s<4*i;s+=4)t[r++]=e.getFloat32(s,n);return r}(r,i,n,s,this.isLittleEndian());throw Ka("bitDepth",t)}applyPredictor(t){const e=t.bitsPerSample;switch(t.predictor){case 1:break;case 2:if(8===e)!function(t,e,r){let i=0;for(;i<t.length;){for(let n=r;n<e*r;n+=r)for(let e=0;e<r;e++)t[i+n+e]=t[i+n+e]+t[i+n-(r-e)]&255;i+=e*r}}(t.data,t.width,t.components);else{if(16!==e)throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${e}`);!function(t,e,r){let i=0;for(;i<t.length;){for(let n=r;n<e*r;n+=r)for(let e=0;e<r;e++)t[i+n+e]=t[i+n+e]+t[i+n-(r-e)]&65535;i+=e*r}}(t.data,t.width,t.components)}break;default:throw new Error(`invalid predictor: ${t.predictor}`)}}convertAlpha(t){if(t.alpha&&t.associatedAlpha){const{data:e,components:r,maxSampleValue:i}=t;for(let t=0;t<e.length;t+=r){const n=e[t+r-1];for(let s=0;s<r-1;s++)e[t+s]=Math.round(e[t+s]*i/n)}}}}function Ka(t,e){return new Error(`Unsupported ${t}: ${e}`)}function Ja(t={}){let{algorithm:e="matchToPrevious",ignoreBorder:r=[0,0]}=t;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let i="matchToPrevious"===e,n=this[0],s=[];s[0]={position:[0,0],image:this[0]};let a=[0,0];for(let t=1;t<this.length;t++){let e=n.getBestMatch(this[t],{border:r});s[t]={position:[e[0]+a[0],e[1]+a[1]],image:this[t]},i&&(a[0]+=e[0],a[1]+=e[1],n=this[t])}let o=0,h=0,l=0,u=0;for(let t=0;t<s.length;t++){let e=s[t];e.position[0]>o&&(o=e.position[0]),e.position[0]<h&&(h=e.position[0]),e.position[1]>l&&(l=e.position[1]),e.position[1]<u&&(u=e.position[1])}h=0-h,u=0-u;for(let t=0;t<s.length;t++){let e=s[t];e.crop=e.image.crop({x:o-e.position[0],y:l-e.position[1],width:n.width-h-o,height:n.height-u-l})}let f=[];for(let t=0;t<s.length;t++)f[t]=s[t].crop;return new uo(f)}function Qa(){this.checkProcessable("min",{bitDepth:[8,16]});let t=this[0].min;for(let e=1;e<this.length;e++)for(let r=0;r<t.length;r++)t[r]=Math.min(t[r],this[e].min[r]);return t}function to(){this.checkProcessable("min",{bitDepth:[8,16]});let t=this[0].max;for(let e=1;e<this.length;e++)for(let r=0;r<t.length;r++)t[r]=Math.max(t[r],this[e].max[r]);return t}function eo(t){let e=t.reduce(((t,e)=>t+e));if(0===e)throw new Error("unreachable");let r,i=0,n=0,s=e/2;for(;;){if(t[i]>0){if(void 0!==r)return(r+i)/2;if(n+=t[i],n>s)return i;n===s&&(r=i)}i++}}function ro(t){let e=0,r=0;for(let i=0;i<t.length;i++)e+=t[i],r+=t[i]*i;return 0===e?0:r/e}function io(){this.checkProcessable("median",{bitDepth:[8,16]});let t=this.getHistograms({maxSlots:this[0].maxValue+1}),e=new Array(t.length);for(let r=0;r<t.length;r++){let i=t[r];e[r]=eo(i)}return e}function no(t){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].getHistogram(t);for(let r=1;r<this.length;r++){let i=this[r].getHistogram(t);for(let t=0;t<e.length;t++)e[t]+=i[t]}return e}function so(t){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].getHistograms(t),r=e[0].length;for(let i=1;i<this.length;i++){let n=this[i].getHistograms(t);for(let t=0;t<e.length;t++)for(let i=0;i<r;i++)e[t][i]+=n[t][i]}return e}function ao(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let t=new Uint32Array(this[0].data.length);for(let e=0;e<this.length;e++){let r=this[e];for(let e=0;e<this[0].data.length;e++)t[e]+=r.data[e]}let e=mf.createFrom(this[0]),r=e.data;for(let e=0;e<this[0].data.length;e++)r[e]=t[e]/this.length;return e}function oo(){this.checkProcessable("max",{bitDepth:[8,16]});let t=mf.createFrom(this[0]);t.data.fill(0);for(const e of this)for(let r=0;r<t.data.length;r++)t.data[r]=Math.max(e.data[r],t.data[r]);return t}function ho(){this.checkProcessable("max",{bitDepth:[8,16]});let t=mf.createFrom(this[0]);t.data.fill(t.maxValue);for(const e of this)for(let r=0;r<t.data.length;r++)t.data[r]=Math.min(e.data[r],t.data[r]);return t}let lo={configurable:!0,enumerable:!1,get:void 0};class uo extends Array{constructor(t){if(Array.isArray(t)){super(t.length);for(let e=0;e<t.length;e++)this[e]=t[e]}else"number"==typeof t?super(t):super();this.computed=null}static load(t){return Promise.all(t.map(mf.load)).then((t=>new uo(t)))}static extendMethod(t,e,r={}){let{inPlace:i=!1,returnThis:n=!0,partialArgs:s=[]}=r;return uo.prototype[t]=i?function(...t){this.computed=null;let r=e.apply(this,[...s,...t]);return n?this:r}:function(...t){return e.apply(this,[...s,...t])},uo}static extendProperty(t,e,r={}){let{partialArgs:i=[]}=r;return lo.get=function(){if(null===this.computed)this.computed={};else if(si()(t,this.computed))return this.computed[t];let r=e.apply(this,i);return this.computed[t]=r,r},Object.defineProperty(uo.prototype,t,lo),uo}checkProcessable(t,e={}){if("string"!=typeof t)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError(`The process: ${t} can not be applied on an empty stack`);this[0].checkProcessable(t,e);for(let r=1;r<this.length;r++){if((void 0===e.sameSize||e.sameSize)&&this[0].width!==this[r].width)throw new TypeError(`The process: ${t} can not be applied if width is not identical in all images`);if((void 0===e.sameSize||e.sameSize)&&this[0].height!==this[r].height)throw new TypeError(`The process: ${t} can not be applied if height is not identical in all images`);if((void 0===e.sameAlpha||e.sameAlpha)&&this[0].alpha!==this[r].alpha)throw new TypeError(`The process: ${t} can not be applied if alpha is not identical in all images`);if((void 0===e.sameBitDepth||e.sameBitDepth)&&this[0].bitDepth!==this[r].bitDepth)throw new TypeError(`The process: ${t} can not be applied if bitDepth is not identical in all images`);if((void 0===e.sameColorModel||e.sameColorModel)&&this[0].colorModel!==this[r].colorModel)throw new TypeError(`The process: ${t} can not be applied if colorModel is not identical in all images`);if((void 0===e.sameNumberChannels||e.sameNumberChannels)&&this[0].channels!==this[r].channels)throw new TypeError(`The process: ${t} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(uo.prototype.map=function(t,e){if("function"!=typeof t)throw new TypeError(`${t} is not a function`);let r=new uo(this.length);for(let i=0;i<this.length;i++)r[i]=t.call(e,this[i],i,this);return r}),function(t){t.extendMethod("matchAndCrop",Ja),t.extendMethod("getMin",Qa),t.extendMethod("getMax",to),t.extendMethod("getMedian",io),t.extendMethod("getHistogram",no),t.extendMethod("getHistograms",so),t.extendMethod("getAverage",ao),t.extendMethod("getAverageImage",ao),t.extendMethod("getMaxImage",oo),t.extendMethod("getMinImage",ho)}(uo);const fo=/^data:[a-z]+\/(?:[a-z]+);base64,/;function co(t,e){const r=bi()(t);if(r)switch(r.mime){case"image/png":return function(t){const e=function(t,e){return new Tr(t,void 0).decode()}(t);let r,i=e.channels,n=0;return 2===i||4===i?(r=i-1,n=1):r=i,e.palette?function(t){const e=t.width*t.height,r=t.palette[0].length,i=new Uint8Array(e*r),n=8/t.depth,s=t.depth<8?n:1,a=parseInt("1".repeat(t.depth),2),o=4===r;let h=0;for(let r=0;r<e;r++){const e=Math.floor(r/s);let l=t.data[e];t.depth<8&&(l=l>>>t.depth*(n-1-r%n)&a);const u=t.palette[l];i[h++]=u[0],i[h++]=u[1],i[h++]=u[2],o&&(i[h++]=u[3])}return new mf(t.width,t.height,i,{components:3,alpha:o,bitDepth:8})}(e):new mf(e.width,e.height,e.data,{components:r,alpha:n,bitDepth:e.depth})}(t);case"image/jpeg":return function(t){const e=(0,gi.decode)(t);let r;e.exif&&(r=mo(e.exif));const i=(0,Hr.decode)(t,{useTArray:!0,maxMemoryUsageInMB:1024});return new mf(i.width,i.height,i.data,{meta:r})}(t);case"image/tiff":return function(t){let e=function(t,e){return new $a(t).decode(void 0)}(t);return 1===e.length?po(e[0]):new uo(e.map(po))}(t);default:return go(i(r.mime))}return go(i("application/octet-stream"));function i(r){return e||Kr(t,r)}}function mo(t){const e={tiff:{fields:t.fields,tags:t.map}};return t.exif&&(e.exif=t.exif),t.gps&&(e.gps=t.gps),e}function po(t){if(3===t.type){const e=new Uint16Array(3*t.width*t.height),r=t.palette;let i=0;for(let n=0;n<t.data.length;n++){const s=r[t.data[n]];e[i++]=s[0],e[i++]=s[1],e[i++]=s[2]}return new mf(t.width,t.height,e,{components:3,alpha:t.alpha,colorModel:hi,bitDepth:16,meta:mo(t)})}return new mf(t.width,t.height,t.data,{components:2===t.type?3:1,alpha:t.alpha,colorModel:2===t.type?hi:oi,bitDepth:t.bitsPerSample.length?t.bitsPerSample[0]:t.bitsPerSample,meta:mo(t)})}function go(t,e){return e=e||{},new Promise((function(r,i){let n=new Qr;n.onload=function(){let t=n.width,i=n.height,s=ti(t,i).getContext("2d");s.drawImage(n,0,0,t,i);let a=s.getImageData(0,0,t,i).data;r(new mf(t,i,a,e))},n.onerror=function(){i(new Error(`Could not load ${t}`))},n.src=t}))}const wo={getValueXY(t,e,r){return this.data[(e*this.width+t)*this.channels+r]},setValueXY(t,e,r,i){return this.data[(e*this.width+t)*this.channels+r]=i,this.computed=null,this},getValue(t,e){return this.data[t*this.channels+e]},setValue(t,e,r){return this.data[t*this.channels+e]=r,this.computed=null,this},getPixelXY(t,e){return this.getPixel(e*this.width+t)},setPixelXY(t,e,r){return this.setPixel(e*this.width+t,r)},getPixel(t){const e=new Array(this.channels),r=t*this.channels;for(let t=0;t<this.channels;t++)e[t]=this.data[r+t];return e},setPixel(t,e){const r=t*this.channels;for(let t=0;t<e.length;t++)this.data[r+t]=e[t];return this.computed=null,this}};function bo(t){return{width:t.width,height:t.height,components:t.components,alpha:t.alpha,colorModel:t.colorModel,bitDepth:t.bitDepth}}function _o(t,e,r,i={}){const{out:n}=e;if(void 0===n)return i.copy?t.clone():mf.createFrom(t,r);{if(!mf.isImage(n))throw new TypeError("out must be an Image object");const e=Object.assign(bo(t),r);for(const t in e)if(n[t]!==e[t])throw new RangeError(`cannot use out. Its ${t} must be "${e[t]}" (found "${n[t]}")`);return n}}function yo(t,e,r){if(void 0!==e.inPlace&&"boolean"!=typeof e.inPlace)throw new TypeError("inPlace option must be a boolean");if(e.inPlace){if(void 0!==e.out)throw new TypeError("out option must not be set if inPlace option is true");return t}return _o(t,e,null,r)}function vo(t={}){this.checkProcessable("abs",{bitDepth:[32]});const e=yo(this,t);return function(t,e){for(let r=0;r<t.data.length;r++)e.data[r]=Math.abs(t.data[r])}(this,e),e}function xo(t={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const e=yo(this,t);return 1===this.bitDepth?function(t,e){for(let r=0;r<t.data.length;r++)e.data[r]=~t.data[r]}(this,e):(function(t,e){for(let r=0;r<t.data.length;r+=t.channels)for(let i=0;i<t.components;i++)e.data[r+i]=t.maxValue-t.data[r+i]}(this,e),this!==e&&function(t,e){if(1===t.alpha&&1===e.alpha)for(let r=0;r<t.size;r++)e.data[r*e.channels+e.components]=t.data[r*t.channels+t.components]}(this,e)),e}function ko(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let t=0;t<this.height;t++){let e=t*this.width*this.channels;for(let t=0;t<Math.floor(this.width/2);t++){let r=t*this.channels+e,i=(this.width-t-1)*this.channels+e;for(let t=0;t<this.channels;t++){let e=this.data[r+t];this.data[r+t]=this.data[i+t],this.data[i+t]=e}}}return this}function Mo(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let t=0;t<Math.floor(this.height/2);t++)for(let e=0;e<this.width;e++){let r=e*this.channels+t*this.width*this.channels,i=e*this.channels+(this.height-1-t)*this.channels*this.width;for(let t=0;t<this.channels;t++){let e=this.data[r+t];this.data[r+t]=this.data[i+t],this.data[i+t]=e}}return this}function Ao(t={}){const{radius:e=1}=t;if(e<1)throw new Error("radius must be greater than 1");const r=2*e+1,i=new Array(r);for(let t=0;t<r;t++){i[t]=new Array(r);for(let e=0;e<r;e++)i[t][e]=1/(r*r)}return this.convolution(i)}var Eo=__webpack_require__(5520),So=__webpack_require__.n(Eo);function Do(t,e={}){let{channels:r,allowAlpha:i,defaultAlpha:n}=e;return"boolean"!=typeof i&&(i=!0),void 0===r?function(t,e){let r=e?t.channels:t.components,i=new Array(r);for(let t=0;t<r;t++)i[t]=t;return i}(t,n):function(t,e,r){Array.isArray(e)||(e=[e]);for(let i=0;i<e.length;i++)e[i]=Io(t,e[i],r);return e}(t,r,i)}function Io(t,e,r=!0){if(void 0===e)throw new RangeError(`validateChannel : the channel has to be >=0 and <${t.channels}`);if("string"==typeof e){switch(t.colorModel){case oi:break;case hi:if("rgb".includes(e))switch(e){case"r":e=0;break;case"g":e=1;break;case"b":e=2}break;case li:if("hsl".includes(e))switch(e){case"h":e=0;break;case"s":e=1;break;case"l":e=2}break;case ui:if("hsv".includes(e))switch(e){case"h":e=0;break;case"s":e=1;break;case"v":e=2}break;case fi:if("cmyk".includes(e))switch(e){case"c":e=0;break;case"m":e=1;break;case"y":e=2;break;case"k":e=3}break;default:throw new Error(`Unexpected color model: ${t.colorModel}`)}if("a"===e){if(!t.alpha)throw new Error("validateChannel : the image does not contain alpha channel");e=t.components}if("string"==typeof e)throw new Error(`validateChannel : undefined channel: ${e}`)}if(e>=t.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${t.channels}`);if(!r&&e>=t.components)throw new RangeError("validateChannel : alpha channel may not be selected");return e}function Co(t={}){let{radius:e=1,border:r="copy",channels:i}=t;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),e<1)throw new Error("radius must be greater than 0");i=Do(this,i);let n=e,s=e,a=mf.createFrom(this),o=new Array((2*n+1)*(2*s+1));for(let t=0;t<i.length;t++){let e=i[t];for(let t=s;t<this.height-s;t++)for(let r=n;r<this.width-n;r++){let i=0;for(let a=-s;a<=s;a++)for(let s=-n;s<=n;s++){let n=((t+a)*this.width+r+s)*this.channels+e;o[i++]=this.data[n]}let h=(t*this.width+r)*this.channels+e;a.data[h]=So()(o)}}if(this.alpha&&!i.includes(this.channels))for(let t=this.components;t<this.data.length;t+=this.channels)a.data[t]=this.data[t];return a.setBorder({size:[n,s],algorithm:r}),a}function Ro(t={}){let{radius:e=1,sigma:r,channels:i,border:n="copy"}=t;this.checkProcessable("gaussian",{bitDepth:[8,16]});const s=function(t,e){const r=2*t+1,i=new Array(r),n=e||.3*(.5*(r-1)-1)+.8,s=-.5/(n*n);let a=0;for(let e=0;e<r;e++){const r=e-t,n=Math.exp(s*r*r);i[e]=n,a+=n}for(let t=0;t<r;t++)i[t]/=a;return i}(e,r);return this.convolution([s,s],{border:n,channels:i,algorithm:"separable"})}const Bo=[[-1,0,1],[-2,0,2],[-1,0,1]],Po=[[-1,-2,-1],[0,0,0],[1,2,1]],zo=[[3,0,-3],[10,0,-10],[3,0,-3]],To=[[3,10,3],[0,0,0],[-3,-10,-3]];var Uo=__webpack_require__(414),Fo=__webpack_require__(8336),Oo=__webpack_require__.n(Fo);function Lo(t,e){return Math.round(Math.min(Math.max(t,0),e.maxValue))}function No(t,e,r){if(void 0===r){const i=t.length+e.length-1;r=new Array(i)}!function(t){for(var e=0;e<t.length;e++)t[e]=0}(r);for(var i=0;i<t.length;i++)for(var n=0;n<e.length;n++)r[i+n]+=t[i]*e[n];return r}function Zo(t,e,r,i){const n=new Array(t.length);let s,a,o,h;h=e[1],o=(h.length-1)/2,a=new Array(r+h.length-1),s=new Array(r);for(let e=0;e<i;e++){for(let i=0;i<r;i++)s[i]=t[e*r+i];No(s,h,a);for(let t=0;t<r;t++)n[e*r+t]=a[o+t]}h=e[0],o=(h.length-1)/2,a=new Array(i+h.length-1),s=new Array(i);for(let t=0;t<r;t++){for(let e=0;e<i;e++)s[e]=n[e*r+t];No(s,h,a);for(let e=0;e<i;e++)n[e*r+t]=a[o+e]}return n}__webpack_require__(9645),__webpack_require__(995);var Yo=__webpack_require__(6943);function Vo(t,e={}){let{channels:r,bitDepth:i,normalize:n=!1,divisor:s=1,border:a="copy",algorithm:o="auto"}=e,h={};i&&(h.bitDepth=i);let l,u,f=mf.createFrom(this,h);if(r=Do(this,r),"separable"!==o)({kernel:t}=function(t){let e,r;if(!Array.isArray(t))throw new Error(`validateKernel: Invalid Kernel: ${t}`);if(Array.isArray(t[0])){if(0==(1&t.length)||0==(1&t[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");e=Math.floor(t.length/2),r=Math.floor(t[0].length/2)}else{let i=Math.sqrt(t.length);if(!Oo()(i))throw new RangeError("validateKernel: Kernel array should be a square");r=e=Math.floor(Math.sqrt(t.length)/2);let n=new Array(i);for(let e=0;e<i;e++){n[e]=new Array(i);for(let r=0;r<i;r++)n[e][r]=t[e*i+r]}t=n}return{kernel:t,kWidth:r,kHeight:e}}(t));else if(!Array.isArray(t)||2!==t.length)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if("auto"===o){let e=function(t){const e=new Yo.Z(t,{autoTranspose:!0});if(1!==e.rank)return null;const r=Math.sqrt(e.s[0]);return[e.U.to2DArray().map((t=>t[0]*r)),e.V.to2DArray().map((t=>t[0]*r))]}(t);null!==e?(o="separable",t=e):o=(t.length>9||t[0].length>9)&&this.width<=4096&&this.height<=4096?"fft":"direct"}"separable"===o?(l=Math.floor(t[0].length/2),u=Math.floor(t[1].length/2)):(l=Math.floor(t.length/2),u=Math.floor(t[0].length/2));let c,d,m,p,g,w,b=f.isClamped,_=new Array(this.height*this.width);for(p=0;p<r.length;p++){for(g=r[p],m=0;m<this.height;m++)for(d=0;d<this.width;d++)c=m*this.width+d,_[c]=this.data[c*this.channels+g];if("direct"===o)w=(0,Uo.direct)(_,t,{rows:this.height,cols:this.width,normalize:n,divisor:s});else if("separable"===o){if(w=Zo(_,t,this.width,this.height),n){s=0;for(let e=0;e<t[0].length;e++)for(let r=0;r<t[1].length;r++)s+=t[0][e]*t[1][r]}if(1!==s)for(let t=0;t<w.length;t++)w[t]/=s}else w=(0,Uo.fft)(_,t,{rows:this.height,cols:this.width,normalize:n,divisor:s});for(m=0;m<this.height;m++)for(d=0;d<this.width;d++)c=m*this.width+d,f.data[c*this.channels+g]=b?Lo(w[c],f):w[c]}if(this.alpha&&!r.includes(this.channels))for(d=this.components;d<this.data.length;d+=this.channels)f.data[d]=this.data[d];return"periodic"!==a&&f.setBorder({size:[u,l],algorithm:a}),f}function jo(t={}){let{direction:e="xy",border:r="copy",kernelX:i,kernelY:n,channels:s,bitDepth:a=this.bitDepth}=t;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),e){case"x":if(!i)throw new Error("kernelX option is missing");return Vo.call(this,i,{channels:s,border:r,bitDepth:a});case"y":if(!n)throw new Error("kernelY option is missing");return Vo.call(this,n,{channels:s,border:r,bitDepth:a});case"xy":{if(!i)throw new Error("kernelX option is missing");if(!n)throw new Error("kernelY option is missing");const t=Vo.call(this,i,{channels:s,border:r,bitDepth:32}),e=Vo.call(this,n,{channels:s,border:r,bitDepth:32});return t.hypotenuse(e,{bitDepth:a,channels:s})}default:throw new Error(`Unknown parameter direction: ${e}`)}}function Xo(t){return jo.call(this,Object.assign({},t,{kernelX:Bo,kernelY:Po}))}function Go(t){return jo.call(this,Object.assign({},t,{kernelX:zo,kernelY:To}))}var qo=__webpack_require__(2664),Ho=__webpack_require__.n(qo);function Wo(t={}){let{algorithm:e="range",channels:r,min:i=this.min,max:n=this.max}=t;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),r=Do(this,{channels:r}),r.length!==this.channel&&(Array.isArray(i)&&i.length===this.channels&&(i=i.filter(((t,e)=>r.includes(e)))),Array.isArray(n)&&n.length===this.channels&&(n=n.filter(((t,e)=>r.includes(e))))),e){case"range":i<0&&(i=0),n>this.maxValue&&(n=this.maxValue),Array.isArray(i)||(i=Ho()(r.length,i)),Array.isArray(n)||(n=Ho()(r.length,n)),function(t,e,r,i){let n=1e-5,s=new Array(i.length);for(let a=0;a<i.length;a++)0===e[a]&&r[a]===t.maxValue||r[a]===e[a]?s[a]=0:s[a]=(t.maxValue+1-n)/(r[a]-e[a]),e[a]+=.499995/s[a];for(let r=0;r<i.length;r++){let n=i[r];if(0!==s[r])for(let i=0;i<t.data.length;i+=t.channels)t.data[i+n]=Math.min(Math.max(0,(t.data[i+n]-e[r])*s[r]+.5|0),t.maxValue)}}(this,i,n,r);break;default:throw new Error(`level: algorithm not implement: ${e}`)}return this}var $o=__webpack_require__(7811),Ko=__webpack_require__.n($o);function Jo(t){if(isNaN(t)){if(t instanceof mf)return t.data;if(!Ko()(t))throw new Error("checkNumberArray: the value should be either a number, array or Image");return t}if(t<=0)throw new Error("checkNumberArray: the value must be greater than 0");return t}function Qo(t,e={}){let{channels:r}=e;if(this.checkProcessable("add",{bitDepth:[8,16]}),r=Do(this,{channels:r}),t=Jo(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("add: the data size is different");for(let e=0;e<r.length;e++){let i=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+i]=Math.max(0,Math.min(this.maxValue,this.data[e+i]+t[e+i]>>0))}}else for(let e=0;e<r.length;e++){let i=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+i]=Math.min(this.maxValue,this.data[e+i]+t>>0)}return this}function th(t,e={}){let{channels:r}=e;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),r=Do(this,{channels:r}),t=Jo(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("subtract: the data size is different");for(let e=0;e<r.length;e++){let i=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+i]=Math.max(0,Math.min(this.maxValue,this.data[e+i]-t[e+i]>>0))}}else for(let e=0;e<r.length;e++){let i=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+i]=Math.max(0,this.data[e+i]-t>>0)}return this}function eh(t,e={}){let{channels:r,absolute:i=!1}=e;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==t.width||this.height!==t.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==t.alpha||this.bitDepth!==t.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==t.channels)throw new Error("subtractImage: both images must have the same number of channels");let n=this.clone();r=Do(this,{channels:r});for(let e=0;e<r.length;e++)for(let s=r[e];s<this.data.length;s+=this.channels){let e=this.data[s]-t.data[s];n.data[s]=i?Math.abs(e):Math.max(e,0)}return n}function rh(t,e={}){let{bitDepth:r=this.bitDepth,channels:i}=e;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==t.width||this.height!==t.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==t.alpha||this.bitDepth!==t.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==t.channels)throw new Error("hypotenuse: both images must have the same number of channels");let n=mf.createFrom(this,{bitDepth:r});i=Do(this,{channels:i});let s=n.isClamped;for(let e=0;e<i.length;e++)for(let r=i[e];r<this.data.length;r+=this.channels){let e=Math.hypot(this.data[r],t.data[r]);n.data[r]=s?Math.min(Math.max(Math.round(e),0),n.maxValue):e}return n}function ih(t,e={}){let{channels:r}=e;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),t<=0)throw new Error("multiply: the value must be greater than 0");if(r=Do(this,{channels:r}),t=Jo(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("multiply: the data size is different");for(let e=0;e<r.length;e++){let i=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+i]=Math.max(0,Math.min(this.maxValue,this.data[e+i]*t[e+i]>>0))}}else for(let e=0;e<r.length;e++){let i=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+i]=Math.min(this.maxValue,this.data[e+i]*t>>0)}return this}function nh(t,e={}){let{channels:r}=e;if(this.checkProcessable("divide",{bitDepth:[8,16]}),r=Do(this,{channels:r}),t=Jo(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("divide: the: the data size is different");for(let e=0;e<r.length;e++){let i=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+i]=Math.max(0,Math.min(this.maxValue,this.data[e+i]/t[e+i]>>0))}}else for(let e=0;e<r.length;e++){let i=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+i]=Math.min(this.maxValue,this.data[e+i]/t>>0)}return this}var sh=__webpack_require__(7531);class ah{constructor(){if(new.target===ah)throw new Error("BaseRegression must be subclassed")}predict(t){if("number"==typeof t)return this._predict(t);if((0,sh.Z)(t)){const e=[];for(let r=0;r<t.length;r++)e.push(this._predict(t[r]));return e}throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(t,e){if(!(0,sh.Z)(t)||!(0,sh.Z)(e)||t.length!==e.length)throw new Error("x and y must be arrays of the same length");const r=t.length,i=new Array(r);for(let e=0;e<r;e++)i[e]=this._predict(t[e]);let n=0,s=0,a=0,o=0,h=0,l=0,u=0;for(let t=0;t<r;t++)n+=i[t],s+=e[t],h+=i[t]*i[t],l+=e[t]*e[t],u+=i[t]*e[t],0!==e[t]&&(a+=(e[t]-i[t])*(e[t]-i[t])/e[t]),o+=(e[t]-i[t])*(e[t]-i[t]);const f=(r*u-n*s)/Math.sqrt((r*h-n*n)*(r*l-s*s));return{r:f,r2:f*f,chi2:a,rmsd:Math.sqrt(o/r)}}}var oh=__webpack_require__(1883),hh=(__webpack_require__(5922),__webpack_require__(8345)),lh=__webpack_require__(6952),uh=__webpack_require__.n(lh);const fh={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class ch extends ah{constructor(t,e,r){if(super(),!0===t)this.alpha=e.alpha,this.inputs=e.inputs,this.kernelType=e.kernelType,this.kernelOptions=e.kernelOptions,this.kernel=new(uh())(e.kernelType,e.kernelOptions);else{t=oh.Z.checkMatrix(t),r=Object.assign({},fh,r);const i=new(uh())(r.kernelType,r.kernelOptions),n=i.compute(t),s=t.rows;n.add(oh.Z.eye(s,s).mul(r.lambda)),this.alpha=(0,hh.F)(n,e),this.inputs=t,this.kernelType=r.kernelType,this.kernelOptions=r.kernelOptions,this.kernel=i}}_predict(t){return this.kernel.compute([t],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(t){if("kernelRidgeRegression"!==t.name)throw new TypeError("not a KRR model");return new ch(!0,t)}}function dh(t,e,r){const i=new ch(t,e,r),n=new Array(this.size);for(let t=0;t<this.width;t++)for(let e=0;e<this.height;e++)n[e*this.width+t]=[t,e];const s=i.predict(n),a=mf.createFrom(this);for(let t=0;t<this.size;t++)a.data[t]=Math.min(this.maxValue,Math.max(0,s[t][0]));return a}function mh(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let i=!0;t:for(const t of e)for(const e of t)if(1!==e){i=!1;break t}let n=this;for(let t=0;t<r;t++)if(1===this.bitDepth)if(i){const t=n.clone();n=bh(n,t,e.length,e[0].length)}else n=wh(n,mf.createFrom(n),e);else n=i?gh(n,mf.createFrom(n),e.length,e[0].length):ph(n,mf.createFrom(n),e);return n}function ph(t,e,r){const i=r.length,n=r[0].length;let s=(i-1)/2,a=(n-1)/2;for(let o=0;o<t.height;o++)for(let h=0;h<t.width;h++){let l=0;for(let e=0;e<n;e++)for(let n=0;n<i;n++){if(1!==r[n][e])continue;let i=n-s+h,u=e-a+o;if(i<0||u<0||i>=t.width||u>=t.height)continue;const f=t.getValueXY(i,u,0);f>l&&(l=f)}e.setValueXY(h,o,0,l)}return e}function gh(t,e,r,i){const n=(r-1)/2,s=(i-1)/2,a=[];for(let e=0;e<t.width;e++)a.push(0);for(let r=0;r<t.height;r++){for(let e=0;e<t.width;e++){let i=0;for(let n=Math.max(0,r-s);n<Math.min(t.height,r+s+1);n++){const r=t.getValueXY(e,n,0);r>i&&(i=r)}a[e]=i}for(let i=0;i<t.width;i++){let s=0;for(let e=Math.max(0,i-n);e<Math.min(t.width,i+n+1);e++)a[e]>s&&(s=a[e]);e.setValueXY(i,r,0,s)}}return e}function wh(t,e,r){const i=r.length,n=r[0].length;let s=(i-1)/2,a=(n-1)/2;for(let o=0;o<t.height;o++)for(let h=0;h<t.width;h++){let l=0;t:for(let e=0;e<n;e++)for(let n=0;n<i;n++){if(1!==r[n][e])continue;let i=n-s+h,u=e-a+o;if(!(u<0||i<0||i>=t.width||u>=t.height)&&1===t.getBitXY(i,u)){l=1;break t}}1===l&&e.setBitXY(h,o)}return e}function bh(t,e,r,i){const n=(r-1)/2,s=(i-1)/2,a=[];for(let e=0;e<t.width;e++)a.push(1);for(let r=0;r<t.height;r++){for(let e=0;e<t.width;e++){a[e]=0;for(let i=Math.max(0,r-s);i<Math.min(t.height,r+s+1);i++)if(1===t.getBitXY(e,i)){a[e]=1;break}}for(let i=0;i<t.width;i++)if(1!==e.getBitXY(i,r))for(let s=Math.max(0,i-n);s<Math.min(t.width,i+n+1);s++)if(1===a[s]){e.setBitXY(i,r);break}}return e}function _h(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let i=!0;t:for(const t of e)for(const e of t)if(1!==e){i=!1;break t}let n=this;for(let t=0;t<r;t++)if(1===this.bitDepth)if(i){const t=n.clone();n=kh(n,t,e.length,e[0].length)}else n=xh(n,mf.createFrom(n),e);else n=i?vh(n,mf.createFrom(n),e.length,e[0].length):yh(n,mf.createFrom(n),e);return n}function yh(t,e,r){const i=r.length,n=r[0].length;let s=(i-1)/2,a=(n-1)/2;for(let o=0;o<t.height;o++)for(let h=0;h<t.width;h++){let l=t.maxValue;for(let e=0;e<n;e++)for(let n=0;n<i;n++){if(1!==r[n][e])continue;let i=n-s+h,u=e-a+o;if(i<0||u<0||i>=t.width||u>=t.height)continue;const f=t.getValueXY(i,u,0);f<l&&(l=f)}e.setValueXY(h,o,0,l)}return e}function vh(t,e,r,i){const n=(r-1)/2,s=(i-1)/2,a=[];for(let e=0;e<t.width;e++)a.push(0);for(let r=0;r<t.height;r++){for(let e=0;e<t.width;e++){let i=t.maxValue;for(let n=Math.max(0,r-s);n<Math.min(t.height,r+s+1);n++){const r=t.getValueXY(e,n,0);r<i&&(i=r)}a[e]=i}for(let i=0;i<t.width;i++){let s=t.maxValue;for(let e=Math.max(0,i-n);e<Math.min(t.width,i+n+1);e++)a[e]<s&&(s=a[e]);e.setValueXY(i,r,0,s)}}return e}function xh(t,e,r){const i=r.length,n=r[0].length;let s=(i-1)/2,a=(n-1)/2;for(let o=0;o<t.height;o++)for(let h=0;h<t.width;h++){let l=1;t:for(let e=0;e<n;e++)for(let n=0;n<i;n++){if(1!==r[n][e])continue;let i=n-s+h,u=e-a+o;if(!(u<0||i<0||i>=t.width||u>=t.height)&&0===t.getBitXY(i,u)){l=0;break t}}1===l&&e.setBitXY(h,o)}return e}function kh(t,e,r,i){const n=(r-1)/2,s=(i-1)/2,a=[];for(let e=0;e<t.width;e++)a.push(0);for(let r=0;r<t.height;r++){for(let e=0;e<t.width;e++){a[e]=1;for(let i=Math.max(0,r-s);i<Math.min(t.height,r+s+1);i++)if(0===t.getBitXY(e,i)){a[e]=0;break}}for(let i=0;i<t.width;i++)if(0!==e.getBitXY(i,r))for(let s=Math.max(0,i-n);s<Math.min(t.width,i+n+1);s++)if(0===a[s]){e.clearBitXY(i,r);break}}return e}function Mh(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let i=this;for(let t=0;t<r;t++)i=i.erode({kernel:e}),i=i.dilate({kernel:e});return i}function Ah(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let i=this;for(let t=0;t<r;t++)i=i.dilate({kernel:e}).erode({kernel:e});return i}function Eh(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),e.length%2==0||e[0].length%2==0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let i=this;for(let t=0;t<r;t++){let t=i.open({kernel:e});i=t.subtractImage(i,{absolute:!0})}return i}function Sh(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let i=this;for(let t=0;t<r;t++){const t=i.close({kernel:e});i=t.subtractImage(i,{absolute:!0})}return i}function Dh(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let i=this;for(let t=0;t<r;t++){let t=i.dilate({kernel:e}),r=i.erode({kernel:e});i=t.subtractImage(r,{absolute:!0})}return i}function Ih(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function Ch(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Rh(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Bh(t,e,r,i,n,s,a,o,h,l,u,f){let[c,d]=[(r*t+i*e+n)/(h*t+l*e+1),(s*t+a*e+o)/(h*t+l*e+1)];return u.getValueXY(Math.floor(c),Math.floor(d),f)}function Ph(t,e={}){let{calculateRatio:r=!0}=e;if(4!==t.length)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${t.length} elements`);let i,n,[s,a,o,h]=t,l=[s,a,o,h],[u,f,c,d]=function(t){let e=0,r=0,i=0,n=0,s=t[0][0],a=0;for(let e=1;e<t.length;e++)t[e][0]<s&&(s=t[e][0],a=e);let o=t[(a+1)%t.length][0],h=(a+1)%t.length;for(let e=1;e<t.length;e++)t[e][0]<o&&e!==a&&(o=t[e][0],h=e);return t[h][1]<t[a][1]?(e=t[h],n=t[a],a!==(h+1)%4?(r=t[(h+1)%4],i=t[(h+2)%4]):(r=t[(h+2)%4],i=t[(h+3)%4])):(n=t[h],e=t[a],h!==(a+1)%4?(r=t[(a+1)%4],i=t[(a+2)%4]):(r=t[(a+2)%4],i=t[(a+3)%4])),[e,r,i,n]}(l);r?[i,n]=function(t,e,r,i,n,s){let a=Math.max(Ih(t,e),Ih(i,r)),o=Math.max(Ih(t,i),Ih(e,r)),h=0,l=0,u=Math.ceil(n/2),f=Math.ceil(s/2),c=a/o,d=[t[0],t[1],1],m=[e[0],e[1],1],p=[i[0],i[1],1],g=[r[0],r[1],1],w=Rh(Ch(d,g),p)/Rh(Ch(m,g),p),b=Rh(Ch(d,g),m)/Rh(Ch(p,g),m),_=[w*m[0]-d[0],w*m[1]-d[1],w*m[2]-d[2]],y=[b*p[0]-d[0],b*p[1]-d[1],b*p[2]-d[2]],v=_[0],x=_[1],k=_[2],M=y[0],A=y[1],E=y[2],S=1/(k*E)*(v*M-(v*E+k*M)*u+k*E*u*u+(x*A-(x*E+k*A)*f+k*E*f*f));S=S>=0?Math.sqrt(S):Math.sqrt(-S);let D=new oh.Z([[S,0,u],[0,S,f],[0,0,1]]),I=D.transpose(),C=(0,hh.S)(I),R=(0,hh.S)(D),B=oh.Z.rowVector(_),P=oh.Z.rowVector(y),z=Math.sqrt(Rh(B.mmul(C).mmul(R).to1DArray(),_)/Rh(P.mmul(C).mmul(R).to1DArray(),y));return 0===z||0===c?(h=Math.ceil(a),l=Math.ceil(o)):z<c?(h=Math.ceil(a),l=Math.ceil(h/z)):(l=Math.ceil(o),h=Math.ceil(z*l)),[h,l]}(u,f,c,d,this.width,this.height):(i=Math.ceil(Math.max(Ih(u,f),Ih(d,c))),n=Math.ceil(Math.max(Ih(u,d),Ih(f,c))));let m=mf.createFrom(this,{width:i,height:n}),[p,g]=u,[w,b]=f,[_,y]=c,[v,x]=d,[k,M]=[0,0],[A,E]=[0,i-1],[S,D]=[n-1,i-1],[I,C]=[n-1,0],R=new oh.Z([[k,M,1,0,0,0,-k*p,-M*p],[A,E,1,0,0,0,-A*w,-E*w],[S,D,1,0,0,0,-S*_,-M*_],[I,C,1,0,0,0,-I*v,-C*v],[0,0,0,k,M,1,-k*g,-M*g],[0,0,0,A,E,1,-A*b,-E*b],[0,0,0,S,D,1,-S*y,-D*y],[0,0,0,I,C,1,-I*x,-C*x]]),B=oh.Z.columnVector([p,w,_,v,g,b,y,x]),P=new Yo.Z(R).solve(B),[z,T,U,F,O,L,N,Z]=P.to1DArray(),Y=new oh.Z(n,i);for(let t=0;t<this.channels;t++){for(let e=0;e<n;e++)for(let r=0;r<i;r++)Y.set(e,r,Bh(e,r,z,T,U,F,O,L,N,Z,this,t));m.setMatrix(Y,{channel:t})}return m}function zh(t={}){let{x:e=0,y:r=0,width:i=this.width-e,height:n=this.height-r}=t;if(this.checkProcessable("max",{bitDepth:[8,16]}),e=Math.round(e),r=Math.round(r),i=Math.round(i),n=Math.round(n),e>this.width-1||r>this.height-1)throw new RangeError(`crop: origin (x:${e}, y:${r}) out of range (${this.width-1}; ${this.height-1})`);if(i<=0||n<=0)throw new RangeError(`crop: width and height (width:${i}; height:${n}) must be positive numbers`);if(e<0||r<0)throw new RangeError(`crop: x and y (x:${e}, y:${r}) must be positive numbers`);if(i>this.width-e||n>this.height-r)throw new RangeError(`crop: (x: ${e}, y:${r}, width:${i}, height:${n}) size is out of range`);let s=mf.createFrom(this,{width:i,height:n,position:[e,r]}),a=i*this.channels,o=r+n,h=0,l=e*this.channels;for(let t=r;t<o;t++){let e=t*this.width*this.channels+l,r=e+a;for(;e<r;e++)s.data[h++]=this.data[e]}return s}function Th(t={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:e=this.maxValue}=t;let r=function(t,e,r){for(let i=0;i<t.width;i++)for(let n=0;n<t.height;n++)if(t.getValueXY(i,n,r)>=e)return i;return-1}(this,e,this.components);if(-1===r)throw new Error("Could not find new dimensions. Threshold may be too high.");let i=function(t,e,r,i){for(let n=0;n<t.height;n++)for(let s=i;s<t.width;s++)if(t.getValueXY(s,n,r)>=e)return n;return-1}(this,e,this.components,r),n=function(t,e,r,i){for(let n=t.height-1;n>=0;n--)for(let s=i;s<t.width;s++)if(t.getValueXY(s,n,r)>=e)return n;return-1}(this,e,this.components,r),s=function(t,e,r,i,n,s){for(let a=t.width-1;a>=i;a--)for(let i=n;i<=s;i++)if(t.getValueXY(a,i,r)>=e)return a;return-1}(this,e,this.components,r,i,n);return this.crop({x:r,y:i,width:s-r+1,height:n-i+1})}function Uh(t,e){if(e<0||e>=t.channels)throw new RangeError(`channel must be included between 0 and ${t.channels-1}. Current value: ${e}`)}const Fh={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function Oh(t){if("string"!=typeof t)throw new TypeError("interpolation must be a string");if(t=t.toLowerCase(),!Fh[t])throw new RangeError(`invalid interpolation algorithm: ${t}`);return Fh[t]}function Lh(t,e,r){const i=this.width/e,n=this.height/r;if(this.bitDepth>1)for(let s=0;s<e;s++){const e=Math.floor((s+.5)*i);for(let i=0;i<r;i++){const r=Math.floor((i+.5)*n);for(let n=0;n<this.channels;n++)t.setValueXY(s,i,n,this.getValueXY(e,r,n))}}else for(let s=0;s<e;s++){const e=Math.floor((s+.5)*i);for(let i=0;i<r;i++){const r=Math.floor((i+.5)*n);this.getBitXY(e,r)&&t.setBitXY(s,i)}}}function Nh(t={}){const{factor:e=1,interpolation:r=Fh.nearestneighbor,preserveAspectRatio:i=!0}=t,n=Oh(r);let s=t.width,a=t.height;if(s||(s=a&&i?Math.round(a*(this.width/this.height)):this.width),a||(a=i?Math.round(s*(this.height/this.width)):this.height),({width:s,height:a}=function(t,e,r){t=function(t){if("string"==typeof t){const e=t[t.length-1];t=parseFloat(t),"%"===e&&(t/=100)}return t}(t);let i=Math.round(t*e),n=Math.round(t*r);return i<=0&&(i=1),n<=0&&(n=1),{width:i,height:n}}(e,s,a)),s===this.width&&a===this.height){const t=this.clone();return t.position=[0,0],t}let o=Math.round((this.width-s)/2),h=Math.round((this.height-a)/2);const l=mf.createFrom(this,{width:s,height:a,position:[o,h]});switch(n){case Fh.nearestneighbor:Lh.call(this,l,s,a);break;default:throw new Error(`unsupported resize interpolation: ${n}`)}return l}function Zh(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[hi]});let t=mf.createFrom(this,{colorModel:ui}),e=0,r=this.data;for(let i=0;i<r.length;i+=this.channels){let n=r[i],s=r[i+1],a=r[i+2],o=Math.min(n,s,a),h=Math.max(n,s,a),l=h-o,u=0,f=0===h?0:l/h,c=h;if(h!==o){switch(h){case n:u=(s-a)/l+(s<a?6:0);break;case s:u=(a-n)/l+2;break;case a:u=(n-s)/l+4;break;default:throw new Error("unreachable")}u/=6}t.data[e++]=u*this.maxValue,t.data[e++]=f*this.maxValue,t.data[e++]=c,this.alpha&&(t.data[e++]=r[i+3])}return t}function Yh(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[hi]});let t=mf.createFrom(this,{colorModel:li}),e=Math.floor(this.maxValue/2),r=0,i=this.data;for(let n=0;n<i.length;n+=this.channels){let s=i[n],a=i[n+1],o=i[n+2],h=Math.max(s,a,o),l=Math.min(s,a,o),u=0,f=0,c=(h+l)/2;if(h!==l){let t=h-l;switch(f=c>e?t/(2-h-l):t/(h+l),h){case s:u=(a-o)/t+(a<o?6:0);break;case a:u=(o-s)/t+2;break;case o:u=(s-a)/t+4;break;default:throw new Error("unreachable")}u/=6}t.data[r++]=u*this.maxValue,t.data[r++]=f*this.maxValue,t.data[r++]=c,this.alpha&&(t.data[r++]=i[n+3])}return t}function Vh(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[hi]});let t=mf.createFrom(this,{components:4,colorModel:fi}),e=0,r=this.data;for(let i=0;i<r.length;i+=this.channels){let n=r[i],s=r[i+1],a=r[i+2],o=Math.min(this.maxValue-n,this.maxValue-s,this.maxValue-a),h=(this.maxValue-n-o)/(1-o/this.maxValue),l=(this.maxValue-s-o)/(1-o/this.maxValue),u=(this.maxValue-a-o)/(1-o/this.maxValue);t.data[e++]=Math.round(h),t.data[e++]=Math.round(l),t.data[e++]=Math.round(u),t.data[e++]=Math.round(o),this.alpha&&(t.data[e++]=r[i+3])}return t}function jh(){return new mf(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const Xh={luma709:(t,e,r)=>6966*t+23436*e+2366*r>>15,luma601:(t,e,r)=>9798*t+19235*e+3735*r>>15,maximum:(t,e,r)=>Math.max(t,e,r),minimum:(t,e,r)=>Math.min(t,e,r),average:(t,e,r)=>(t+e+r)/3>>0,minmax:(t,e,r)=>(Math.max(t,e,r)+Math.min(t,e,r))/2,red:t=>t,green:(t,e)=>e,blue:(t,e,r)=>r,cyan(t,e,r,i){let n=Xh.black(t,e,r,i);return(i.maxValue-t-n)/(1-n/i.maxValue)>>0},magenta(t,e,r,i){let n=Xh.black(t,e,r,i);return(i.maxValue-e-n)/(1-n/i.maxValue)>>0},yellow(t,e,r,i){let n=Xh.black(t,e,r,i);return(i.maxValue-r-n)/(1-n/i.maxValue)>>0},black:(t,e,r,i)=>Math.min(i.maxValue-t,i.maxValue-e,i.maxValue-r),hue(t,e,r,i){let n=Xh.min(t,e,r),s=Xh.max(t,e,r);if(s===n)return 0;let a=0,o=s-n;switch(s){case t:a=(e-r)/o+(e<r?6:0);break;case e:a=(r-t)/o+2;break;case r:a=(t-e)/o+4;break;default:throw new Error("unreachable")}return a/6*i.maxValue>>0},saturation(t,e,r,i){let n=Xh.min(t,e,r),s=Xh.max(t,e,r);return 0===s?0:(s-n)/s*i.maxValue},lightness(t,e,r){let i=Xh.min(t,e,r);return(Xh.max(t,e,r)+i)/2}};Object.defineProperty(Xh,"luminosity",{enumerable:!1,value:Xh.lightness}),Object.defineProperty(Xh,"luminance",{enumerable:!1,value:Xh.lightness}),Object.defineProperty(Xh,"min",{enumerable:!1,value:Xh.minimum}),Object.defineProperty(Xh,"max",{enumerable:!1,value:Xh.maximum}),Object.defineProperty(Xh,"brightness",{enumerable:!1,value:Xh.maximum});const Gh={};function qh(t={}){let{algorithm:e="luma709",keepAlpha:r=!1,mergeAlpha:i=!0}=t;if("string"!=typeof e&&"function"!=typeof e)throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),1===this.components&&(e="red"),r&=this.alpha,i&=this.alpha,r&&(i=!1);let n,s=_o(this,t,{components:1,alpha:r,colorModel:oi});if("function"==typeof e)n=e;else if(n=Xh[e.toLowerCase()],!n)throw new Error(`unsupported grey algorithm: ${e}`);let a=0;for(let t=0;t<this.data.length;t+=this.channels)i?s.data[a++]=Lo(n(this.data[t],this.data[t+1],this.data[t+2],this)*this.data[t+this.components]/this.maxValue,this):(s.data[a++]=Lo(n(this.data[t],this.data[t+1],this.data[t+2],this),this),s.alpha&&(s.data[a++]=this.data[t+this.components]));return s}function Hh(t){let e=!1,r=0;for(let e=1;e<t.length-1;e++)if(t[e-1]<t[e]&&t[e+1]<t[e]&&(r++,r>2))return!1;return 2===r&&(e=!0),e}function Wh(t,e){let r=0;for(let i=0;i<=e;i++)r+=t[i];return r}function $h(t,e){let r=0;for(let i=0;i<=e;i++)r+=i*t[i];return r}function Kh(t,e){let r=0;for(let i=0;i<=e;i++)r+=i*i*t[i];return r}function Jh(t){let e=new Array(t.length);for(let r=1;r<t.length-1;r++)e[r]=(t[r-1]+t[r]+t[r+1])/3;return e[0]=(t[0]+t[1])/3,e[t.length-1]=(t[t.length-2]+t[t.length-1])/3,e}function Qh(t){let e=t.length,r=!1,i=0;for(let r=1;r<e-1;r++)if(t[r-1]<t[r]&&t[r+1]<t[r]&&(i++,i>2))return!1;return 2===i&&(r=!0),r}function tl(t,e){let r=0;for(let i=0;i<=e;i++)r+=t[i];return r}Object.keys(Xh).forEach((t=>{Gh[t]=t}));var el=__webpack_require__(6563);const rl={huang:function(t){let e=0;for(let r=0;r<t.length;r++)if(0!==t[r]){e=r;break}let r=t.length-1;for(let i=t.length-1;i>=e;i--)if(0!==t[i]){r=i;break}let i=1/(r-e),n=new Array(t.length),s=0,a=0;for(let r=e;r<t.length;r++)s+=r*t[r],a+=t[r],n[r]=s/a;let o=new Array(t.length);s=a=0;for(let e=r;e>0;e--)s+=e*t[e],a+=t[e],o[e-1]=s/a;let h=-1,l=Number.MAX_VALUE;for(let e=0;e<t.length;e++){let r,s=0;for(let a=0;a<=e;a++)r=1/(1+i*Math.abs(a-n[e])),r<1e-6||r>.999999||(s+=t[a]*(-r*Math.log(r)-(1-r)*Math.log(1-r)));for(let n=e+1;n<t.length;n++)r=1/(1+i*Math.abs(n-o[e])),r<1e-6||r>.999999||(s+=t[n]*(-r*Math.log(r)-(1-r)*Math.log(1-r)));s<l&&(l=s,h=e)}return h},intermodes:function(t){let e=t.slice(),r=0;for(;!Hh(e);){let i=0,n=0,s=e[0];for(let r=0;r<t.length-1;r++)i=n,n=s,s=e[r+1],e[r]=(i+n+s)/3;if(e[t.length-1]=(n+s)/3,r++,r>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let i=0;for(let r=1;r<t.length-1;r++)e[r-1]<e[r]&&e[r+1]<e[r]&&(i+=r);return Math.floor(i/2)},isodata:function(t){let e,r,i,n,s=0;for(let e=1;e<t.length;e++)if(t[e]>0){s=e+1;break}for(;;){e=0,i=0;for(let r=0;r<s;r++)i+=t[r],e+=t[r]*r;n=0,r=0;for(let e=s+1;e<t.length;e++)r+=t[e],n+=t[e]*e;if(i>0&&r>0&&(e/=i,n/=r,s===Math.round((e+n)/2)))break;if(s++,s>t.length-2)throw new Error("Threshold not found")}return s},li:function(t,e){let r,i,n,s,a,o,h,l,u,f,c,d;c=.5,f=0;for(let e=0;e<t.length;e++)f+=e*t[e];f/=e,h=f;do{o=h,r=o+.5|0,i=0,s=0;for(let e=0;e<=r;e++)i+=e*t[e],s+=t[e];l=0===s?0:i/s,n=0,a=0;for(let e=r+1;e<t.length;e++)n+=e*t[e],a+=t[e];u=0===a?0:n/a,d=(l-u)/(Math.log(l)-Math.log(u)),h=d<-Number.EPSILON?d-.5|0:d+.5|0}while(Math.abs(h-o)>.5);return r},maxentropy:function(t,e){let r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=t[i]/e;let i=new Array(t.length),n=new Array(t.length);i[0]=r[0],n[0]=1-i[0];for(let e=1;e<t.length;e++)i[e]=i[e-1]+r[e],n[e]=1-i[e];let s=0;for(let e=0;e<t.length;e++)if(Math.abs(i[e])>=Number.EPSILON){s=e;break}let a=t.length-1;for(let e=t.length-1;e>=s;e--)if(Math.abs(n[e])>=Number.EPSILON){a=e;break}let o,h,l,u=-1,f=Number.MIN_VALUE;for(let e=s;e<=a;e++){h=0;for(let n=0;n<=e;n++)0!==t[n]&&(h-=r[n]/i[e]*Math.log(r[n]/i[e]));l=0;for(let i=e+1;i<t.length;i++)0!==t[i]&&(l-=r[i]/n[e]*Math.log(r[i]/n[e]));o=h+l,f<o&&(f=o,u=e)}return u},mean:function(t,e){let r=0;for(let e=0;e<t.length;e++)r+=e*t[e];return Math.floor(r/e)},minerror:function(t,e){let r,i,n,s,a,o,h,l,u,f,c,d,m=-2,p=0;for(let e=0;e<t.length;e++)p+=e*t[e];for(p/=e,r=p;r!==m;){let e=Wh(t,r),p=Wh(t,t.length-1),g=$h(t,r),w=$h(t,t.length-1),b=Kh(t,r);if(i=g/e,n=(w-g)/(p-e),s=e/p,a=(p-e)/p,o=b/e-i*i,h=(Kh(t,t.length-1)-b)/(p-e)-n*n,l=1/o-1/h,u=i/o-n/h,f=i*i/o-n*n/h+Math.log10(o*(a*a)/(h*(s*s))),c=u*u-l*f,c<0)return r;m=r,d=(u+Math.sqrt(c))/l,r=isNaN(d)?m:Math.floor(d)}return r},minimum:function(t){if(t.length<2)return 0;let e=0,r=-1,i=-1,n=new Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[e],t[e]>0&&(i=e);for(;!Qh(n);)if(n=Jh(n),e++,e>1e4)return r;return r=function(t,e){let r;for(let i=1;i<e;i++)if(t[i-1]>t[i]&&t[i+1]>=t[i]){r=i;break}return r}(n,i),r},moments:function(t,e){let r,i,n,s,a,o,h=0,l=0,u=0,f=0,c=-1,d=t.length,m=new Array(d);for(let r=0;r<d;r++)m[r]=t[r]/e;for(let t=0;t<d;t++)h+=t*m[t],l+=t*t*m[t],u+=t*t*t*m[t];i=1*l-h*h,n=(-l*l+h*u)/i,s=(1*-u+l*h)/i,a=.5*(-s-Math.sqrt(s*s-4*n)),o=.5*(-s+Math.sqrt(s*s-4*n)),r=(o-h)/(o-a);for(let t=0;t<d;t++)if(f+=m[t],f>r){c=t;break}return c},otsu:function(t,e){let r=0,i=0,n=0,s=0,a=0;for(let e=0;e<t.length;e++)a+=e*t[e];for(let o=0;o<t.length;o++){i+=t[o];const h=e-i;if(0===i||0===h)continue;r+=o*t[o];const l=(a-r)/h,u=i*h*(r/i-l)*(r/i-l);u>=n&&(s=o,n=u)}return s},percentile:function(t){let e=-1,r=new Array(t.length),i=tl(t,t.length-1),n=1;for(let s=0;s<t.length;s++)r[s]=Math.abs(tl(t,s)/i-.5),r[s]<n&&(n=r[s],e=s);return e},renyientropy:function(t,e){let r,i,n,s=new Array(t.length),a=new Array(t.length),o=new Array(t.length),h=0,l=0,u=0,f=0,c=0,d=0;for(let r=0;r<t.length;r++)s[r]=t[r]/e;a[0]=s[0],o[0]=1-a[0];for(let e=1;e<t.length;e++)a[e]=a[e-1]+s[e],o[e]=1-a[e];i=0;for(let e=0;e<t.length;e++)if(Math.abs(a[e])>=Number.EPSILON){i=e;break}n=t.length-1;for(let e=t.length-1;e>=i;e--)if(Math.abs(o[e])>=Number.EPSILON){n=e;break}for(let e=i;e<=n;e++){let r=0,i=0,n=0;for(let o=0;o<=e;o++)0!==t[o]&&(r-=s[o]/a[e]*Math.log(s[o]/a[e])),i+=Math.sqrt(s[o]/a[e]),n+=s[o]*s[o]/(a[e]*a[e]);let m=0,p=0,g=0;for(let r=e+1;r<t.length;r++)0!==t[r]&&(m-=s[r]/o[e]*Math.log(s[r]/o[e])),p+=Math.sqrt(s[r]/o[e]),g+=s[r]*s[r]/(o[e]*o[e]);let w=r+m,b=2*(i*p>0?Math.log(i*p):0),_=-1*(n*g>0?Math.log(n*g):0);w>f&&(f=w,h=e),b>c&&(c=b,l=e),_>d&&(d=_,u=e)}let m,p=[h,l,u];p.sort(el.j),m=Math.abs(p[0]-p[1])<=5?Math.abs(p[1]-p[2])<=5?[1,2,1]:[0,1,3]:Math.abs(p[1]-p[2])<=5?[3,1,0]:[1,2,1];let g=a[p[2]]-a[p[0]];return r=Math.round(p[0]*(a[p[0]]+.25*g*m[0])+.25*p[1]*g*m[1]+p[2]*(o[p[2]]+.25*g*m[2])),r},shanbhag:function(t,e){let r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=t[i]/e;let i=new Array(t.length),n=new Array(t.length);i[0]=r[0],n[0]=1-i[0];for(let e=1;e<t.length;e++)i[e]=i[e-1]+r[e],n[e]=1-i[e];let s=0;for(let e=0;e<t.length;e++)if(Math.abs(i[e])>=Number.EPSILON){s=e;break}let a=t.length-1;for(let e=t.length-1;e>=s;e--)if(Math.abs(n[e])>=Number.EPSILON){a=e;break}let o,h,l,u,f=-1,c=Number.MAX_VALUE;for(let e=s;e<=a;e++){l=0,o=.5/i[e];for(let t=1;t<=e;t++)l-=r[t]*Math.log(1-o*i[t-1]);l*=o,u=0,o=.5/n[e];for(let i=e+1;i<t.length;i++)u-=r[i]*Math.log(1-o*n[i]);u*=o,h=Math.abs(l-u),h<c&&(c=h,f=e)}return f},triangle:function(t){let e=0,r=0,i=0,n=0;for(let r=0;r<t.length;r++)if(t[r]>0){e=r;break}e>0&&e--;for(let e=t.length-1;e>0;e--)if(t[e]>0){n=e;break}n<t.length-1&&n++;for(let e=0;e<t.length;e++)t[e]>r&&(i=e,r=t[e]);let s,a,o,h=!1;if(i-e<n-i){h=!0;let r=0,s=t.length-1;for(;r<s;){let e=t[r];t[r]=t[s],t[s]=e,r++,s--}e=t.length-1-n,i=t.length-1-i}if(e===i)return e;s=t[i],a=e-i,o=Math.sqrt(s*s+a*a),s/=o,a/=o,o=s*e+a*t[e];let l=e,u=0;for(let r=e+1;r<=i;r++){let e=s*r+a*t[r]-o;e>u&&(l=r,u=e)}if(l--,h){let e=0,r=t.length-1;for(;e<r;){let i=t[e];t[e]=t[r],t[r]=i,e++,r--}return t.length-1-l}return l},yen:function(t,e){let r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=t[i]/e;let i=new Array(t.length);i[0]=r[0];for(let e=1;e<t.length;e++)i[e]=i[e-1]+r[e];let n=new Array(t.length);n[0]=r[0]*r[0];for(let e=1;e<t.length;e++)n[e]=n[e-1]+r[e]*r[e];let s=new Array(t.length);s[t.length-1]=0;for(let e=t.length-2;e>=0;e--)s[e]=s[e+1]+r[e+1]*r[e+1];let a,o=-1,h=Number.MIN_VALUE;for(let e=0;e<t.length;e++)a=-1*(n[e]*s[e]>0?Math.log(n[e]*s[e]):0)+2*(i[e]*(1-i[e])>0?Math.log(i[e]*(1-i[e])):0),a>h&&(h=a,o=e);return o}},il={};function nl(t={}){let{algorithm:e=il.otsu}=t;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let r=rl[e.toLowerCase()];if(r)return r(this.getHistogram(),this.size);throw new Error(`unknown thresholding algorithm: ${e}`)}Object.keys(rl).forEach((t=>{il[t]=t}));const sl="threshold";function al(t={}){let{algorithm:e=sl,threshold:r=.5,useAlpha:i=!0,invert:n=!1}=t;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),r=e===sl?function(t,e){if(!e)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof t){if("%"!==t[t.length-1])throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(t)/100*e}if("number"==typeof t)return t<1?t*e:t;throw Error("getThreshold : the value is not valid")}(r,this.maxValue):nl.call(this,t);let s=new mf(this.width,this.height,{kind:"BINARY",parent:this}),a=0;if(this.alpha&&i)for(let t=0;t<this.data.length;t+=this.channels){let e=this.data[t]+(this.maxValue-this.data[t])*(this.maxValue-this.data[t+1])/this.maxValue;(n&&e<=r||!n&&e>=r)&&s.setBit(a),a++}else for(let t=0;t<this.data.length;t+=this.channels)(n&&this.data[t]<=r||!n&&this.data[t]>=r)&&s.setBit(a),a++;return s}function ol(t={}){let{size:e=0,algorithm:r="copy",color:i}=t;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===r){if(i.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let t=0;t<i.length;t++)0===i[t]&&(i[t]=.001)}else i=Ho()(this.channels,null);Array.isArray(e)||(e=[e,e]);let n=this.width+2*e[0],s=this.height+2*e[1],a=this.channels,o=mf.createFrom(this,{width:n,height:s});!function(t,e,r,i){let n=t.width,s=t.height,a=e.width,o=t.channels;for(let h=0;h<n;h++)for(let l=0;l<s;l++)for(let s=0;s<o;s++){let u=(l*n+h)*o+s,f=((i+l)*a+r+h)*o+s;e.data[f]=t.data[u]}}(this,o,e[0],e[1]);for(let t=e[0];t<n-e[0];t++)for(let r=0;r<a;r++){let h=i[r]||o.data[(e[1]*n+t)*a+r];for(let i=0;i<e[1];i++)o.data[(i*n+t)*a+r]=h;h=i[r]||o.data[((s-e[1]-1)*n+t)*a+r];for(let i=s-e[1];i<s;i++)o.data[(i*n+t)*a+r]=h}for(let t=0;t<s;t++)for(let r=0;r<a;r++){let s=i[r]||o.data[(t*n+e[0])*a+r];for(let i=0;i<e[0];i++)o.data[(t*n+i)*a+r]=s;s=i[r]||o.data[(t*n+n-e[0]-1)*a+r];for(let i=n-e[0];i<n;i++)o.data[(t*n+i)*a+r]=s}return o}function hl(t=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(t))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===t)return this.clone();let e=mf.createFrom(this,{bitDepth:t});switch(t){case 8:if(1===this.bitDepth)for(let t=0;t<this.size;t++)this.getBit(t)&&(e.data[t]=255);else for(let t=0;t<this.data.length;t++)e.data[t]=this.data[t]>>8;break;case 16:if(1===this.bitDepth)for(let t=0;t<this.size;t++)this.getBit(t)&&(e.data[t]=65535);else for(let t=0;t<this.data.length;t++)e.data[t]=this.data[t]<<8|this.data[t];break;default:throw new Error("colorDepth conversion unexpected case")}return e}function ll(t,e={}){const{interpolation:r=Fh.nearestneighbor,width:i=this.width,height:n=this.height}=e;if("number"!=typeof t)throw new TypeError("degrees must be a number");const s=Oh(r),a=t*Math.PI/180,o=Math.floor(Math.abs(i*Math.cos(a))+Math.abs(n*Math.sin(a))),h=Math.floor(Math.abs(n*Math.cos(a))+Math.abs(i*Math.sin(a))),l=mf.createFrom(this,{width:o,height:h}),u=Math.cos(-a),f=Math.sin(-a);let c=o/2,d=h/2;o%2==0?(c-=.5,h%2==0?d-=.5:d=Math.floor(d)):(c=Math.floor(c),h%2==0?d-=.5:d=Math.floor(d));const m=Math.floor(i/2-c),p=Math.floor(n/2-d);switch(s){case Fh.nearestneighbor:return function(t,e,r,i,n,s,a,o){for(let h=0;h<e.width;h+=1)for(let l=0;l<e.height;l+=1)for(let u=0;u<t.channels;u++){let f=Math.round((h-n)*a-(l-s)*o+n)+r,c=Math.round((l-s)*a+(h-n)*o+s)+i;f<0||f>=t.width||c<0||c>=t.height?1===t.alpha&&u===t.channels-1?e.setValueXY(h,l,u,0):e.setValueXY(h,l,u,t.maxValue):e.setValueXY(h,l,u,t.getValueXY(f,c,u))}return e}(this,l,m,p,c,d,u,f);case Fh.bilinear:return function(t,e,r,i,n,s,a,o){let h=t.width*t.channels;for(let l=0;l<e.height;l++)for(let u=0;u<e.width;u++){let f=(u-n)*a-(l-s)*o+n+r,c=(l-s)*a+(u-n)*o+s+i,d=0|f,m=0|c,p=f-d,g=c-m;for(let r=0;r<t.channels;r++)if(f<0||f>=t.width||c<0||c>=t.height)1===t.alpha&&r===t.channels-1?e.setValueXY(u,l,r,0):e.setValueXY(u,l,r,t.maxValue);else{let i=(m*t.width+d)*t.channels+r,n=t.data[i],s=t.data[i+t.channels],a=t.data[i+h],o=n+p*(s-n)+g*(a-n)+p*g*(n-s-a+t.data[i+h+t.channels])|0;e.setValueXY(u,l,r,o)}}return e}(this,l,m,p,c,d,u,f);default:throw new Error(`unsupported rotate interpolation: ${s}`)}}function ul(t,e){if("number"!=typeof t)throw new TypeError("angle must be a number");switch(t<0&&(t=360*Math.ceil(-t/360)+t),t%360){case 0:return this.clone();case 90:return cl.call(this);case 180:return dl.call(this);case 270:return fl.call(this);default:return ll.call(this,t,e)}}function fl(){const t=mf.createFrom(this,{width:this.height,height:this.width}),e=t.height-1;for(let r=0;r<this.height;r++)for(let i=0;i<this.width;i++)for(let n=0;n<this.channels;n++)t.setValueXY(r,e-i,n,this.getValueXY(i,r,n));return t}function cl(){const t=mf.createFrom(this,{width:this.height,height:this.width}),e=t.width-1;for(let r=0;r<this.height;r++)for(let i=0;i<this.width;i++)for(let n=0;n<this.channels;n++)t.setValueXY(e-r,i,n,this.getValueXY(i,r,n));return t}function dl(){const t=mf.createFrom(this),e=t.width-1,r=t.height-1;for(let i=0;i<this.height;i++)for(let n=0;n<this.width;n++)for(let s=0;s<this.channels;s++)t.setValueXY(e-n,r-i,s,this.getValueXY(n,i,s));return t}function ml(t,e={}){const r=bo(t);this.checkProcessable("insert",r);let{x:i=0,y:n=0}=e;const s=yo(this,e,{copy:!0}),a=Math.min(s.height,n+t.height),o=Math.min(s.width,i+t.width);if(1===s.bitDepth)for(let e=n;e<a;e++)for(let r=i;r<o;r++)t.getBitXY(r-i,e-n)?s.setBitXY(r,e):s.clearBitXY(r,e);else for(let e=n;e<a;e++)for(let r=i;r<o;r++)s.setPixelXY(r,e,t.getPixelXY(r-i,e-n));return s}function pl(t={}){let{size:e=0,algorithm:r="copy",color:i}=t;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===r){if(i.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let t=0;t<i.length;t++)0===i[t]&&(i[t]=.001)}else i=Ho()(this.channels,null);Array.isArray(e)||(e=[e,e]);let n=e[0],s=e[1],a=this.channels;for(let t=n;t<this.width-n;t++)for(let e=0;e<a;e++){let r=i[e]||this.data[(t+this.width*s)*a+e];for(let i=0;i<s;i++)this.data[(i*this.width+t)*a+e]=r;r=i[e]||this.data[(t+this.width*(this.height-s-1))*a+e];for(let i=this.height-s;i<this.height;i++)this.data[(i*this.width+t)*a+e]=r}for(let t=0;t<this.height;t++)for(let e=0;e<a;e++){let r=i[e]||this.data[(t*this.width+n)*a+e];for(let i=0;i<n;i++)this.data[(t*this.width+i)*a+e]=r;r=i[e]||this.data[(t*this.width+this.width-n-1)*a+e];for(let i=this.width-n;i<this.width;i++)this.data[(t*this.width+i)*a+e]=r}return this}function gl(t={}){let{preserveAlpha:e=!0}=t;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new uo([this.clone()]);let r=new uo,i=this.data;if(this.alpha&&e)for(let t=0;t<this.components;t++){let e=mf.createFrom(this,{components:1,alpha:!0,colorModel:oi}),n=0;for(let r=0;r<i.length;r+=this.channels)e.data[n++]=i[r+t],e.data[n++]=i[r+this.components];r.push(e)}else for(let t=0;t<this.channels;t++){let e=mf.createFrom(this,{components:1,alpha:!1,colorModel:oi}),n=0;for(let r=0;r<i.length;r+=this.channels)e.data[n++]=i[r+t];r.push(e)}return r}function wl(t,e={}){let{keepAlpha:r=!1,mergeAlpha:i=!1}=e;r&=this.alpha,i&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),t=Io(this,t);let n=mf.createFrom(this,{components:1,alpha:r,colorModel:oi}),s=0;for(let e=0;e<this.data.length;e+=this.channels)i?n.data[s++]=this.data[e+t]*this.data[e+this.components]/this.maxValue:(n.data[s++]=this.data[e+t],r&&(n.data[s++]=this.data[e+this.components]));return n}function bl(t=_l,e={}){let{mergeAlpha:r=!1,keepAlpha:i=!1}=e;r&=this.alpha,i&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let n=mf.createFrom(this,{components:1,alpha:i,colorModel:oi}),s=0;for(let e=0;e<this.size;e++){let a=t(this.getPixel(e));r?n.data[s++]=a*this.data[e*this.channels+this.components]/this.maxValue:(n.data[s++]=a,i&&(n.data[s++]=this.data[e*this.channels+this.components]))}return n}function _l(t){return(t[0]+t[1]+t[2])/3}function yl(t,e){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),e.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),e.width!==this.width||e.height!==this.height)throw new Error("Images must have exactly the same width and height");let r=t=Io(this,t);for(let t=0;t<e.data.length;t++)this.data[r]=e.data[t],r+=this.channels;return this}function vl(t,e={}){let{shift:r=[0,0],average:i,channels:n,defaultAlpha:s,normalize:a,border:o=[0,0]}=e;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(o)||(o=[o,o]),n=Do(this,{channels:n,defaultAlpha:s}),this.bitDepth!==t.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==t.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==t.colorModel)throw new Error("Both images must have the same colorModel");void 0===i&&(i=!0);let h=Math.max(o[0],-r[0]),l=Math.min(this.width-o[0],this.width-r[0]),u=Math.max(o[1],-r[1]),f=Math.min(this.height-o[1],this.height-r[1]),c=Ho()(n.length,0);for(let e=0;e<n.length;e++){let i=n[e],s=a?this.sum[i]:Math.max(this.sum[i],t.sum[i]),o=a?t.sum[i]:Math.max(this.sum[i],t.sum[i]);if(0!==s&&0!==o)for(let n=h;n<l;n++)for(let a=u;a<f;a++){let h=n*this.multiplierX+a*this.multiplierY+i,l=h+r[0]*this.multiplierX+r[1]*this.multiplierY;c[e]+=Math.min(this.data[h]/s,t.data[l]/o)}}return i?c.reduce(((t,e)=>t+e))/c.length:c}function xl(t={}){let{sampling:e=[10,10],painted:r=!1,mask:i}=t;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(e)||(e=[e,e]);const n=e[0],s=e[1],a=[],o=[],h=this.width/n,l=this.height/s;let u=Math.floor(h/2);for(let t=0;t<n;t++){let t=Math.floor(l/2);for(let e=0;e<s;e++){let e=Math.round(u),r=Math.round(t);i&&!i.getBitXY(e,r)||(a.push([e,r]),o.push(this.getPixelXY(e,r))),t+=l}u+=h}const f={xyS:a,zS:o};return r&&(f.painted=this.rgba8().paintPoints(a)),f}function kl(t,e,r){const i=new Array(t);for(let r=0;r<t;r++)i[r]=new Array(e);if(r)for(let n=0;n<t;n++)for(let t=0;t<e;t++)i[n][t]=r;return i.width=t,i.height=e,Object.setPrototypeOf(i,kl.prototype),i}function Ml(t,e={}){let{border:r}=e;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==t.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==t.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==t.colorModel)throw new Error("Both images must have the same colorModel");let i=new kl(t.width,t.height,-1/0),n=Math.floor(t.width/2),s=Math.floor(t.height/2),a=n,o=s,h=!1;for(;!h;){let e=i.localSearch(n,s,-1/0);for(let n=0;n<e.length;n++){let s=e[n],h=this.getSimilarity(t,{border:r,shift:[a-s[0],o-s[1]]});i[s[0]][s[1]]=h}let l=i.localMax(n,s);l.position[0]!==n||l.position[1]!==s?(n=l.position[0],s=l.position[1]):h=!0}return[n-a,s-o]}function Al(t,e=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),function(t,e){if(e<0||e>=t.height)throw new RangeError(`row must be included between 0 and ${t.height-1}. Current value: ${e}`)}(this,t),Uh(this,e);let r=new Array(this.width),i=0,n=t*this.width*this.channels+e,s=n+this.width*this.channels;for(let t=n;t<s;t+=this.channels)r[i++]=this.data[t];return r}function El(t,e=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),function(t,e){if(e<0||e>=t.width)throw new RangeError(`column must be included between 0 and ${t.width-1}. Current value: ${e}`)}(this,t),Uh(this,e);let r=new Array(this.height),i=0,n=this.width*this.channels;for(let s=e+t*this.channels;s<this.data.length;s+=n)r[i++]=this.data[s];return r}function Sl(t={}){let{channel:e}=t;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===e){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");e=0}let r=new oh.Z(this.height,this.width);for(let t=0;t<this.height;t++)for(let i=0;i<this.width;i++)r.set(t,i,this.getValueXY(i,t,e));return r}function Dl(t,e={}){t=new oh.Z(t);let{channel:r}=e;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===r){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");r=0}if(this.width!==t.columns||this.height!==t.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let e=0;e<this.height;e++)for(let i=0;i<this.width;i++)this.setValueXY(i,e,r,t.get(e,i))}function Il(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let t=new Array(this.size),e=0;for(let r=0;r<this.data.length;r+=this.channels){let i=new Array(this.components);for(let t=0;t<this.components;t++)i[t]=this.data[r+t];t[e++]=i}return t}function Cl(t){let e=this,r=e.getClosestCommonParent(t),i=e.getRelativePosition(r,{defaultFurther:!0}),n=Rl(e,i),s=t.getRelativePosition(r,{defaultFurther:!0}),a=Rl(t,s),o=function(t,e){let r=0,i=0,n=[];for(;r<t.length&&i<e.length;)t[r][0]===e[i][0]&&t[r][1]===e[i][1]?(n.push(t[r]),r++,i++):t[r][0]<e[i][0]||t[r][0]===e[i][0]&&t[r][1]<e[i][1]?r++:i++;return n}(n,a),h={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let r=0;r<o.length;r++){let n=o[r],a=[n[0]-i[0],n[1]-i[1]],l=[n[0]-s[0],n[1]-s[1]],u=e.getBitXY(a[0],a[1]),f=t.getBitXY(l[0],l[1]);1===u&&1===f&&h.commonWhitePixels.push(n)}for(let t=0;t<n.length;t++){let r,i;0!==t&&(r=Math.floor(t/e.width),i=t%e.width),1===e.getBitXY(r,i)&&h.whitePixelsMask1.push(n[t])}for(let e=0;e<a.length;e++){let r=0,i=0;0!==e&&(r=Math.floor(e/t.width),i=e%t.width),1===t.getBitXY(r,i)&&h.whitePixelsMask2.push(a[e])}return h}function Rl(t,e){let r=[];for(let i=0;i<t.height;i++)for(let n=0;n<t.width;n++){let t=[i,n];r.push([t[0]+e[0],t[1]+e[1]])}return r}function Bl(t){let e,r=Pl(this),i=Pl(t);if(e=r>=i?zl(this,r):zl(t,i),0===r||0===i)return e;let n=this,s=t;for(;r!==i;)if(r>i){if(n=n.parent,null===n)return e;r-=1}else{if(s=s.parent,null===s)return e;i-=1}for(;n!==s&&null!==n&&null!==s;)if(n=n.parent,s=s.parent,null===n||null===s)return e;return n!==s?e:n}function Pl(t){let e=0,r=t;for(;null!=r.parent;)r=r.parent,e++;return e}function zl(t,e){let r=t;for(;e>0;)r=r.parent,e-=1;return r}kl.prototype.localMin=function(t,e){let r=this[t][e],i=[t,e];for(let n=Math.max(0,t-1);n<Math.min(this.length,t+2);n++)for(let t=Math.max(0,e-1);t<Math.min(this[0].length,e+2);t++)this[n][t]<r&&(r=this[n][t],i=[n,t]);return{position:i,value:r}},kl.prototype.localMax=function(t,e){let r=this[t][e],i=[t,e];for(let n=Math.max(0,t-1);n<Math.min(this.length,t+2);n++)for(let t=Math.max(0,e-1);t<Math.min(this[0].length,e+2);t++)this[n][t]>r&&(r=this[n][t],i=[n,t]);return{position:i,value:r}},kl.prototype.localSearch=function(t,e,r){let i=[];for(let n=Math.max(0,t-1);n<Math.min(this.length,t+2);n++)for(let t=Math.max(0,e-1);t<Math.min(this[0].length,e+2);t++)this[n][t]===r&&i.push([n,t]);return i};const Tl={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},Ul=[[-1,0,1],[-2,0,2],[-1,0,1]],Fl=[[-1,-2,-1],[0,0,0],[1,2,1]],Ol={bitDepth:32,mode:"periodic"};function Ll(t){return function(t,e){t.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),e=Object.assign({},Tl,e);const r=t.width,i=t.height,n=t.maxValue,s={sigma:e.gaussianBlur,radius:3},a=t.gaussianFilter(s),o=a.convolution(Fl,Ol),h=a.convolution(Ul,Ol),l=h.hypotenuse(o),u=t.constructor,f=new u(r,i,{kind:"GREY",bitDepth:32}),c=new u(r,i,{kind:"GREY",bitDepth:32}),d=new u(r,i,{kind:"GREY"});for(var m=1;m<r-1;m++)for(var p=1;p<i-1;p++){var g=(Math.round(Math.atan2(h.getValueXY(m,p,0),o.getValueXY(m,p,0))*(5/Math.PI))+5)%5;0===g&&(l.getValueXY(m,p,0)<=l.getValueXY(m,p-1,0)||l.getValueXY(m,p,0)<=l.getValueXY(m,p+1,0))||1===g&&(l.getValueXY(m,p,0)<=l.getValueXY(m-1,p+1,0)||l.getValueXY(m,p,0)<=l.getValueXY(m+1,p-1,0))||2===g&&(l.getValueXY(m,p,0)<=l.getValueXY(m-1,p,0)||l.getValueXY(m,p,0)<=l.getValueXY(m+1,p,0))||3===g&&(l.getValueXY(m,p,0)<=l.getValueXY(m-1,p-1,0)||l.getValueXY(m,p,0)<=l.getValueXY(m+1,p+1,0))||f.setValueXY(m,p,0,l.getValueXY(m,p,0))}for(m=0;m<r*i;++m){var w=f.data[m],b=0;w>e.highThreshold&&(b++,d.data[m]=n),w>e.lowThreshold&&b++,c.data[m]=b}var _=[];for(m=1;m<r-1;++m)for(p=1;p<i-1;++p)if(1===c.getValueXY(m,p,0))t:for(var y=m-1;y<m+2;++y)for(var v=p-1;v<p+2;++v)if(2===c.getValueXY(y,v,0)){_.push([m,p]),d.setValueXY(m,p,0,n);break t}for(;_.length>0;){var x=[];for(m=0;m<_.length;++m)for(p=-1;p<2;++p)for(y=-1;y<2;++y)if(0!==p||0!==y){var k=_[m][0]+p,M=_[m][1]+y;1===c.getValueXY(k,M,0)&&0===d.getValueXY(k,M,0)&&(x.push([k,M]),d.setValueXY(k,M,0,n))}_=x}return d}(this,t)}function Nl(t,e={}){let{position:r}=e;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!r&&(r=t.getRelativePosition(this),!r))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let e=mf.createFrom(this,{width:t.width,height:t.height,alpha:1,position:r,parent:this});for(let i=0;i<t.width;i++)for(let n=0;n<t.height;n++){for(let t=0;t<this.channels;t++){let s=this.getValueXY(i+r[0],n+r[1],t);e.setValueXY(i,n,t,s)}t.getBitXY(i,n)||e.setValueXY(i,n,this.components,0)}return e}{let e=mf.createFrom(this,{width:t.width,height:t.height,position:r,parent:this});for(let i=0;i<t.height;i++)for(let n=0;n<t.width;n++)t.getBitXY(n,i)&&this.getBitXY(n+r[0],i+r[1])&&e.setBitXY(n,i);return e}}var Zl=__webpack_require__(8737),Yl=__webpack_require__.n(Zl);function Vl(t={}){const{x:e=0,y:r=0,inPlace:i=!0}=t,n=i?this:mf.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(e,r))return n;const s=new(Yl());for(s.push(new jl(e,r));s.length>0;){const t=s.shift();n.setBitXY(t.x,t.y);for(let e=t.x+1;e<this.width&&!n.getBitXY(e,t.y)&&!this.getBitXY(e,t.y);e++)n.setBitXY(e,t.y),t.y+1<this.height&&!this.getBitXY(e,t.y+1)&&s.push(new jl(e,t.y+1)),t.y-1>=0&&!this.getBitXY(e,t.y-1)&&s.push(new jl(e,t.y-1));for(let e=t.x-1;e>=0&&!n.getBitXY(e,t.y)&&!this.getBitXY(e,t.y);e++)n.setBitXY(e,t.y),t.y+1<this.height&&!this.getBitXY(e,t.y+1)&&s.push(new jl(e,t.y+1)),t.y-1>=0&&!this.getBitXY(e,t.y-1)&&s.push(new jl(e,t.y-1))}return n}function jl(t,e){this.x=t,this.y=e}function Xl(){return(Xl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function Gl(t,e,r){var i=function(t,e,r){return{h:t,s:2*(e*=(r<50?r:100-r)/100)/(r+e)*100,v:r+e}}(t,e,r);return function(t,e,r){var i,n=(r/=100)*(e/=100),s=t/60,a=n*(1-Math.abs(s%2-1)),o=r-n;return i=s>=0&&s<1?[n,a,0]:s>=1&&s<2?[a,n,0]:s>=2&&s<3?[0,n,a]:t>=3&&s<4?[0,a,n]:t>=4&&s<5?[a,0,n]:t>=5&&s<=6?[n,0,a]:[0,0,0],{r:Math.round(255*(i[0]+o)),g:Math.round(255*(i[1]+o)),b:Math.round(255*(i[2]+o))}}(i.h,i.s,i.v)}var ql={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function Hl(t){let e=function(t){var e=ql[t.toLowerCase()];if(e)return{r:e[0],g:e[1],b:e[2],a:100}}(r=t)||function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:100}}(r)||function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:100}}(r)||function(t){var e=t.match(/rgb\(([^)]+)\)/);if(e){var r=e[1].split(/ *, */).map(Number);return{r:r[0],g:r[1],b:r[2],a:100}}}(r)||function(t){var e=t.match(/rgba\(([^)]+)\)/);if(e){var r=e[1].split(/ *, */).map(Number);return{r:r[0],g:r[1],b:r[2],a:100*r[3]}}}(r)||function(t){var e=t.match(/hsl\(([^)]+)\)/);if(e){var r=e[1].split(/ *, */);return Xl({},Gl(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)),{a:100})}}(r)||function(t){var e=t.match(/hsla\(([^)]+)\)/);if(e){var r=e[1].split(/ *, */),i=parseInt(r[0],10),n=parseInt(r[1],10),s=parseInt(r[2],10),a=parseInt(100*parseFloat(r[3]),10);return Xl({},Gl(i,n,s),{a})}}(r);var r;return[e.r,e.g,e.b,Math.round(255*e.a/100)]}function Wl(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function $l(t,e,r){let i,n,s,a,o,h;return r/=100,0==(e/=100)?a=o=h=255*r:(n=r<=.5?r*(e+1):r+e-r*e,i=2*r-n,s=t/360,a=Wl(i,n,s+1/3),o=Wl(i,n,s),h=Wl(i,n,s-1/3)),{r:a,g:o,b:h}}function Kl(t){let{color:e,colors:r,randomColors:i,numberColors:n=50}=t;if(e&&!Array.isArray(e)&&(e=Hl(e)),e)return[e];if(r)return r=r.map((function(t){return Array.isArray(t)?t:Hl(t)})),r;if(i){r=new Array(n);for(let t=0;t<n;t++)r[t]=[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]}return function(t){let e=new Array(t),r=0;for(let i=0;i<360;i+=360/t){r++;let t=$l(i,100,30+r%4*15);e[r-1]=[Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b)]}return e}(n)}function Jl(t,e,r={}){let{color:i="blue",colors:n,font:s="12px Helvetica",rotate:a=0}=r;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:hi}),!Array.isArray(t))throw Error("paintLabels: labels must be an array");if(!Array.isArray(e))throw Error("paintLabels: positions must be an array");if(i&&!Array.isArray(i)&&(i=Hl(i)),n=n?n.map((function(t){return Array.isArray(t)?t:Hl(t)})):[i],t.length!==e.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(s)||(s=[s]),Array.isArray(a)||(a=[a]);let o=this.getCanvas().getContext("2d");for(let r=0;r<t.length;r++){o.save();let i=n[r%n.length];o.fillStyle=`rgba(${i[0]},${i[1]},${i[2]},${i[3]/this.maxValue})`,o.font=s[r%s.length];let h=e[r];o.translate(h[0],h[1]),o.rotate(a[r%a.length]/180*Math.PI),o.fillText(t[r],0,0),o.restore()}return this.data=Uint8Array.from(o.getImageData(0,0,this.width,this.height).data),this}function Ql(t,e={}){let{alpha:r=255,labels:i=[],labelsPosition:n=[],labelColor:s="blue",labelFont:a="12px Helvetica"}=e;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:hi});let o=Kl(Object.assign({},e,{numberColors:t.length}));Array.isArray(t)||(t=[t]);for(let e=0;e<t.length;e++){let i=t[e],n=o[e%o.length];for(let t=0;t<i.width;t++)for(let e=0;e<i.height;e++)if(i.getBitXY(t,e))for(let s=0;s<Math.min(this.components,n.length);s++)if(255===r)this.setValueXY(t+i.position[0],e+i.position[1],s,n[s]);else{let a=this.getValueXY(t+i.position[0],e+i.position[1],s);a=Math.round((a*(255-r)+n[s]*r)/255),this.setValueXY(t+i.position[0],e+i.position[1],s,a)}}if(Array.isArray(i)&&i.length>0){let e=this.getCanvas().getContext("2d");e.fillStyle=s,e.font=a;for(let r=0;r<Math.min(t.length,i.length);r++){let s=n[r]?n[r]:t[r].position;e.fillText(i[r],s[0],s[1])}this.data=Uint8Array.from(e.getImageData(0,0,this.width,this.height).data)}return this}function tu(t,e){let r=new Array(t);for(let i=0;i<t;i++)r[i]=new Array(e).fill(0);return r}const eu=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],ru=[[0,1,0],[1,1,1],[0,1,0]];class iu{constructor(t={}){let{kind:e="cross",shape:r,size:i,width:n,height:s,filled:a=!0}=t;if(i&&(n=i,s=i),r)switch(r.toLowerCase()){case"square":case"rectangle":this.matrix=function(t,e,r){const i=tu(e,t);if(r.filled)for(let r=0;r<e;r++)for(let e=0;e<t;e++)i[r][e]=1;else{for(let r of[0,e-1])for(let e=0;e<t;e++)i[r][e]=1;for(let r=0;r<e;r++)for(let e of[0,t-1])i[r][e]=1}return i}(n,s,{filled:a});break;case"circle":case"ellipse":this.matrix=function(t,e,r){const i=tu(e,t);let n=1-e%2,s=1-t%2,a=Math.floor((t-1)/2),o=Math.floor((e-1)/2),h=a*a,l=o*o;if(r.filled)for(let e=0;e<=o;e++)for(let r=a-Math.floor(Math.sqrt(h-h*e*e/l));r<=a;r++)i[o-e][r]=1,i[o+e+n][r]=1,i[o-e][t-r-1]=1,i[o+e+n][t-r-1]=1;else{for(let e=0;e<=o;e++){let r=a-Math.floor(Math.sqrt(h-h*e*e/l));i[o-e][r]=1,i[o+e+n][r]=1,i[o-e][t-r-1]=1,i[o+e+n][t-r-1]=1}for(let t=0;t<=a;t++){let r=o-Math.floor(Math.sqrt(l-l*t*t/h));i[r][a-t]=1,i[r][a+t+s]=1,i[e-r-1][a-t]=1,i[e-r-1][a+t+s]=1}}return i}(n,s,{filled:a});break;case"triangle":this.matrix=function(t,e,r){if(!r.filled)throw new Error("Non filled triangle is not implemented");const i=tu(e,t);for(let r=0;r<e;r++){let n=Math.floor((1-r/e)*t/2);for(let e=n;e<t-n;e++)i[r][e]=1}return i}(n,s,{filled:a});break;default:throw new Error(`Shape: unexpected shape: ${r}`)}else{if(!e)throw new Error("Shape: expected a kind or a shape option");switch(e.toLowerCase()){case"cross":this.matrix=eu;break;case"smallcross":this.matrix=ru;break;default:throw new Error(`Shape: unexpected kind: ${e}`)}}this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let t=this.matrix,e=[];for(let r=0;r<t.length;r++)for(let i=0;i<t[0].length;i++)t[r][i]&&e.push([i-this.halfWidth,r-this.halfHeight]);return e}getMask(){let t=new mf(this.width,this.height,{kind:ci});for(let e=0;e<this.matrix.length;e++)for(let r=0;r<this.matrix[0].length;r++)this.matrix[e][r]&&t.setBitXY(r,e);return t}}function nu(t,e={}){let{shape:r}=e;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let i=Kl(Object.assign({},e,{numberColors:t.length})),n=new iu(r).getPoints(),s=Math.min(this.channels,i[0].length);for(let e=0;e<t.length;e++){let r=i[e%i.length],a=t[e][0],o=t[e][1];for(let t=0;t<n.length;t++){let e=n[t][0],i=n[t][1];if(a+e>=0&&o+i>=0&&a+e<this.width&&o+i<this.height){let t=(a+e+(o+i)*this.width)*this.channels;for(let e=0;e<s;e++)this.data[t+e]=r[e]}}}return this}function su(t,e={}){let{color:r=[this.maxValue,0,0],closed:i=!1}=e;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let n=Math.min(this.channels,r.length);for(let e=0;e<t.length-1+i;e++){let i=t[e],s=t[(e+1)%t.length],a=s[0]-i[0],o=s[1]-i[1],h=Math.max(Math.abs(a),Math.abs(o)),l=a/h,u=o/h,f=i[0],c=i[1];for(let t=0;t<=h;t++){let t=Math.round(f),e=Math.round(c);if(t>=0&&e>=0&&t<this.width&&e<this.height)if(1===this.bitDepth)this.setBitXY(t,e);else{let i=(t+e*this.width)*this.channels;for(let t=0;t<n;t++)this.data[i+t]=r[t]}f+=l,c+=u}}return this}function au(t,e={}){let r=Object.assign({},e);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let i=Kl(Object.assign({},e,{numberColors:t.length}));for(let e=0;e<t.length;e++)r.color=i[e%i.length],this.paintPolyline(t[e],r);return this}function ou(t,e={}){let{color:r=[this.maxValue,0,0],filled:i=!1}=e;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),e.closed=!0;let n=function(t){let e=[];for(let r=0;r<t.length;r++)t[r][0]===t[(r+1)%t.length][0]&&t[r][1]===t[(r+1)%t.length][1]||t[r][0]===t[(r-1+t.length)%t.length][0]&&t[r][1]===t[(r-1+t.length)%t.length][1]||t[(r+1)%t.length][0]===t[(r-1+t.length)%t.length][0]&&t[(r-1+t.length)%t.length][1]===t[(r+1)%t.length][1]||e.push(t[r]);return e}(t);if(!1===i)return this.paintPolyline(t,e);{let i=Array(this.height);for(let t=0;t<this.height;t++){i[t]=[];for(let e=0;e<this.width;e++)i[t].push(0)}for(let t=0;t<n.length;t++){const e=hu(n[t],n[(t+1)%n.length]);for(let t=0;t<this.height;t++)for(let r=0;r<this.width;r++)lu(r,t,e,this.height)&&(i[t][r]=0===i[t][r]?1:0)}for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++)if(1===i[t][e])if(1===this.bitDepth)this.setBitXY(e,t);else{let i=Math.min(this.channels,r.length),n=(e+t*this.width)*this.channels;for(let t=0;t<i;t++)this.data[n+t]=r[t]}return this.paintPolyline(t,e)}}function hu(t,e){if(t[0]===e[0])return{a:0,b:t[0],vertical:!0};{const r=(e[1]-t[1])/(e[0]-t[0]);return{a:r,b:t[1]-r*t[0],vertical:!1}}}function lu(t,e,r,i){if(!0===r.vertical)return r.b<=t;if(0===r.a)return!1;{const n=(e-r.b)/r.a;return n<t&&n>=0&&n<=i}}function uu(t,e={}){let r=Object.assign({},e);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let i=Kl(Object.assign({},e,{numberColors:t.length}));for(let e=0;e<t.length;e++)r.color=i[e%i.length],this.paintPolygon(t[e],r);return this}function fu(t={}){let{maxSlots:e=256,channel:r,useAlpha:i=!0}=t;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),void 0===r){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");r=0}return du.call(this,r,{useAlpha:i,maxSlots:e})}function cu(t={}){const{maxSlots:e=256,useAlpha:r=!0}=t;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let i=new Array(r?this.components:this.channels);for(let t=0;t<i.length;t++)i[t]=du.call(this,t,{useAlpha:r,maxSlots:e});return i}function du(t,e){let{useAlpha:r,maxSlots:i}=e;if(1===this.bitDepth){let t=[0,0];for(let e=0;e<this.height;e++)for(let r=0;r<this.width;r++){let i=this.getBitXY(e,r);0===i?t[0]+=1:1===i&&(t[1]+=1)}return t}let n=Math.log2(i);if(!Oo()(n))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let s=0;this.bitDepth>n&&(s=this.bitDepth-n);let a=this.data,o=Ho()(Math.pow(2,Math.min(this.bitDepth,n)),0);if(r&&this.alpha){let e=this.channels-t-1;for(let r=t;r<a.length;r+=this.channels)o[a[r]>>s]+=a[r+e]/this.maxValue}else for(let e=t;e<a.length;e+=this.channels)o[a[e]>>s]++;return o}function mu(t={}){let{useAlpha:e=!0,nbSlots:r=512}=t;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let i=Math.log(r)/Math.log(8);if(i!==Math.floor(i))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let n=this.bitDepth-i,s=this.data,a=Ho()(Math.pow(8,i),0),o=Math.pow(2,2*i),h=Math.pow(2,i);for(let t=0;t<s.length;t+=this.channels){let r=(s[t]>>n)*o+(s[t+1]>>n)*h+(s[t+2]>>n);e&&this.alpha?a[r]+=s[t+this.channels-1]/this.maxValue:a[r]++}return a}function pu(){this.checkProcessable("min",{bitDepth:[8,16,32]});let t=Ho()(this.channels,1/0);for(let e=0;e<this.data.length;e+=this.channels)for(let r=0;r<this.channels;r++)this.data[e+r]<t[r]&&(t[r]=this.data[e+r]);return t}function gu(){this.checkProcessable("max",{bitDepth:[8,16,32]});let t=Ho()(this.channels,-1/0);for(let e=0;e<this.data.length;e+=this.channels)for(let r=0;r<this.channels;r++)this.data[e+r]>t[r]&&(t[r]=this.data[e+r]);return t}function wu(){this.checkProcessable("sum",{bitDepth:[8,16]});let t=Ho()(this.channels,0);for(let e=0;e<this.data.length;e+=this.channels)for(let r=0;r<this.channels;r++)t[r]+=this.data[e+r];return t}function bu(t=0,e=0){this.checkProcessable("getMoment",{bitDepth:[1]});let r=0;for(let i=0;i<this.width;i++)for(let n=0;n<this.height;n++)1===this.getBitXY(i,n)&&(r+=i**t*n**e);return r}function _u(t={}){let{mask:e,region:r=3,removeClosePoints:i=0,invert:n=!1,maxEquals:s=2}=t,a=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),r*=4;let o=n?0:1,h=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],l=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],u=r<=8?1:2,f=[];for(let t=u;t<a.height-u;t++)for(let i=u;i<a.width-u;i++){if(e&&e.getBitXY(i,t)!==o)continue;let u=0,c=0,d=a.data[i+t*a.width];for(let e=0;e<r;e++)n?a.data[i+h[e]+(t+l[e])*a.width]>d&&u++:a.data[i+h[e]+(t+l[e])*a.width]<d&&u++,a.data[i+h[e]+(t+l[e])*a.width]===d&&c++;u+c===r&&c<=s&&f.push([i,t])}if(i>0)for(let t=0;t<f.length;t++)for(let e=t+1;e<f.length;e++)Math.sqrt(Math.pow(f[t][0]-f[e][0],2)+Math.pow(f[t][1]-f[e][1],2))<i&&(f[t][0]=f[t][0]+f[e][0]>>1,f[t][1]=f[t][1]+f[e][1]>>1,f.splice(e,1),e--);return f}function yu(){let t=this.getHistograms({maxSlots:this.maxValue+1}),e=new Array(t.length);for(let r=0;r<t.length;r++){let i=t[r];e[r]=ro(i)}return e}function vu(){let t=this.getHistograms({maxSlots:this.maxValue+1}),e=new Array(t.length);for(let r=0;r<t.length;r++){let i=t[r];e[r]=eo(i)}return e}function xu(){this.checkProcessable("points",{bitDepth:[1]});const t=[];for(let e=0;e<this.width;e++)for(let r=0;r<this.height;r++)1===this.getBitXY(e,r)&&t.push([e,r]);return t}function ku(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const t=[];for(let e=0;e<this.height;e++)for(let r=0;r<this.width;r++)1===this.getBitXY(r,e)&&(t.push([r,e]),1!==this.getBitXY(r+1,e)?(t.push([r+1,e]),t.push([r+1,e+1]),1!==this.getBitXY(r,e+1)&&t.push([r,e+1])):1!==this.getBitXY(r,e+1)&&(t.push([r,e+1]),t.push([r+1,e+1])));return t}function Mu(t,e={}){if(this===t)return[0,0];let r=[0,0],i=this;for(;i;){if(i===t)return r;i.position&&(r[0]+=i.position[0],r[1]+=i.position[1]),i=i.parent}return!!e.defaultFurther&&r}function Au(t={}){let{alpha:e=1}=t;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let r=0;if(void 0!==e){for(let t=this.components;t<this.data.length;t+=this.channels)this.data[t]===e&&r++;return r}return this.size}function Eu(t,e={}){e.sorted||t.sort(Du);const r=t.length,i=new Array(2*r);for(var n=0,s=0;s<r;s++){const e=t[s];for(;n>=2&&Su(i[n-2],i[n-1],e)<=0;)n--;i[n++]=e}const a=n+1;for(s=r-2;s>=0;s--){const e=t[s];for(;n>=a&&Su(i[n-2],i[n-1],e)<=0;)n--;i[n++]=e}return i.slice(0,n-1)}function Su(t,e,r){return(e[1]-t[1])*(r[0]-t[0])-(e[0]-t[0])*(r[1]-t[1])}function Du(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}function Iu(){return Eu(this.extendedPoints,{sorted:!1})}function Cu(t,e){return[t[0]-e[0],t[1]-e[1]]}function Ru(t){let e=Math.sqrt(t[0]**2+t[1]**2);return[t[0]/e,t[1]/e]}function Bu(t,e,r){void 0===r&&(r=new Array(e.length));let i=Math.cos(t),n=Math.sin(t);for(let t=0;t<r.length;++t)r[t]=[i*e[t][0]-n*e[t][1],n*e[t][0]+i*e[t][1]];return r}function Pu(t){let e=0;for(let r=0;r<t.length;r++){let i=t[r][0],n=t[r][1],s=t[r===t.length-1?0:r+1][0],a=t[r===t.length-1?0:r+1][1];e+=Math.sqrt((s-i)**2+(a-n)**2)}return e}function zu(t){let e=0;for(let r=0;r<t.length;r++)e+=t[r][0]*t[r===t.length-1?0:r+1][1]*.5,e-=t[r===t.length-1?0:r+1][0]*t[r][1]*.5;return Math.abs(e)}function Tu(t){let e=1/0,r=1/0,i=-1/0,n=-1/0;for(let s=0;s<t.length;s++)t[s][0]<e&&(e=t[s][0]),t[s][0]>i&&(i=t[s][0]),t[s][1]<r&&(r=t[s][1]),t[s][1]>n&&(n=t[s][1]);return[[e,r],[i,n]]}function Uu(t={}){const{originalPoints:e=Iu.call(this)}=t;if(0===e.length)return[];if(1===e.length)return[e[0],e[0],e[0],e[0]];const r=new Array(e.length);let i,n=1/0,s=0;for(let t=0;t<r.length;t++){let a=Fu(e[t],e[(t+1)%r.length]);Bu(-a,e,r);let o=r[t][0],h=r[t][1],l=r[(t+1)%r.length][0],u=r[(t+1)%r.length][1],f=!0,c=0,d=0,m=0;for(let t=0;t<r.length;t++){let e=r[t][0],i=r[t][1],n=(e-o)/(l-o);!0===f?(f=!1,c=n,d=n):(n<c&&(c=n),n>d&&(d=n));let s=(-(l-o)*i+l*h-u*o)/(l-o);Math.abs(s)>Math.abs(m)&&(m=s)}let p=[o+c*(l-o),h],g=[o+d*(l-o),h],w=Math.abs(m*(c-d)*(l-o));w<n&&(s=a,n=w,i=[p,g,[g[0],g[1]-m],[p[0],p[1]-m]])}return Bu(s,i,i),i}function Fu(t,e){let r=Ru(Cu(e,t)),i=Math.acos(r[0]);return r[1]<0?-i:i}var Ou=__webpack_require__(2229),Lu=__webpack_require__.n(Ou),Nu=__webpack_require__(4707),Zu=__webpack_require__.n(Nu);function Yu(t,e){let r=Ru(Cu(e,t)),i=Math.acos(r[0]);return r[1]<0?-i:i}class Vu{constructor(t,e){this.map=t,this.id=e,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(t={}){const{scale:e=1,kind:r=""}=t;let i;switch(r){case"contour":i=this.contourMask;break;case"box":i=this.boxMask;break;case"filled":i=this.filledMask;break;case"center":i=this.centerMask;break;case"mbr":i=this.mbrFilledMask;break;case"hull":i=this.convexHullFilledMask;break;case"hullContour":i=this.convexHullMask;break;case"mbrContour":i=this.mbrMask;break;case"feret":i=this.feretMask;break;default:i=this.mask}return e<1&&(i=i.resize({factor:e}),i.parent=this.mask.parent,i.position[0]+=this.minX,i.position[1]+=this.minY),i}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let t=this.borderIDs,e=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let r=this.internalIDs;for(let i=0;i<t.length;i++)r.includes(t[i])||(this.computed.externalIDs.push(t[i]),this.computed.externalLengths.push(e[i]))}get externalIDs(){return this.computed.externalIDs||this._computExternalIDs(),this.computed.externalIDs}get externalLengths(){return this.computed.externalLengths||this._computExternalIDs(),this.computed.externalLengths}_computeBorderIDs(){let t=function(t){let e=t.map,r=e.data,i=new Set,n=new Map,s=new Set,a=[1,0,-1,0],o=[0,1,0,-1];for(let h=t.minX;h<=t.maxX;h++)for(let l=t.minY;l<=t.maxY;l++)if(r[h+l*e.width]===t.id)for(let u=0;u<4;u++){let f=h+a[u],c=l+o[u];if(f>=0&&c>=0&&f<e.width&&c<e.height){let a=f+c*e.width;if(r[a]!==t.id&&!s.has(a)){s.add(a),i.add(r[a]);let t=n.get(r[a]);t?n.set(r[a],++t):n.set(r[a],1)}}}let h=Array.from(i),l=h.map((function(t){return n.get(t)}));return{ids:h,lengths:l}}(this);this.computed.borderIDs=t.ids,this.computed.borderLengths=t.lengths}get borderIDs(){return this.computed.borderIDs||this._computeBorderIDs(),this.computed.borderIDs}get borderLengths(){return this.computed.borderLengths||this._computeBorderIDs(),this.computed.borderLengths}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=function(t){let e=new Set,r=t.map,i=r.data;for(let n of[0,t.height-1])for(let s=0;s<t.width;s++){let a=(n+t.minY)*r.width+s+t.minX;if(s-t.minX>0&&i[a]===t.id&&i[a-1]!==t.id){let t=i[a-1];e.add(t)}if(r.width-s-t.minX>1&&i[a]===t.id&&i[a+1]!==t.id){let t=i[a+1];e.add(t)}}for(let n of[0,t.width-1])for(let s=0;s<t.height;s++){let a=(s+t.minY)*r.width+n+t.minX;if(s-t.minY>0&&i[a]===t.id&&i[a-r.width]!==t.id){let t=i[a-r.width];e.add(t)}if(r.height-s-t.minY>1&&i[a]===t.id&&i[a+r.width]!==t.id){let t=i[a+r.width];e.add(t)}}return Array.from(e)}(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=function(t){let e=[t.id],r=t.map,i=r.data;if(t.height>2)for(let n=0;n<t.width;n++){let s=t.minY*r.width+n+t.minX;if(e.includes(i[s])){let n=i[s+r.width];e.includes(n)||t.boxIDs.includes(n)||e.push(n)}}let n=new Array(4);for(let s=1;s<t.width-1;s++)for(let a=1;a<t.height-1;a++){let o=(a+t.minY)*r.width+s+t.minX;if(e.includes(i[o])){n[0]=i[o-1],n[1]=i[o+1],n[2]=i[o-r.width],n[3]=i[o+r.width];for(let r=0;r<4;r++){let i=n[r];e.includes(i)||t.boxIDs.includes(i)||e.push(i)}}}return e}(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=function(t){let e=0,r=t.map,i=r.data,n=[0];t.height>1&&(n[1]=t.height-1);for(let s of n)for(let n=1;n<t.width-1;n++)i[(s+t.minY)*r.width+n+t.minX]===t.id&&e++;let s=[0];t.width>1&&(s[1]=t.width-1);for(let n of s)for(let s=0;s<t.height;s++)i[(s+t.minY)*r.width+n+t.minX]===t.id&&e++;return e}(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=function(t){let e=0,r=t.map,i=r.data;for(let n=1;n<t.width-1;n++)for(let s=1;s<t.height-1;s++){let a=(s+t.minY)*r.width+n+t.minX;i[a]===t.id&&(t.externalIDs.includes(i[a-1])||t.externalIDs.includes(i[a+1])||t.externalIDs.includes(i[a-r.width])||t.externalIDs.includes(i[a+r.width]))&&e++}return e+t.box}(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=function(t){let e=0,r=t.map.width,i=t.map.data;for(let n=1;n<t.width-1;n++)for(let s=1;s<t.height-1;s++){let a=(s+t.minY)*r+n+t.minX;t.internalIDs.includes(i[a])&&i[a]!==t.id&&e++}return{number:t.internalIDs.length-1,surface:e}}(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=function(t){let e=0,r=t.map,i=r.data;for(let n=1;n<t.width-1;n++)for(let s=1;s<t.height-1;s++){let a=(s+t.minY)*r.width+n+t.minX;i[a]===t.id&&(i[a-1]===t.id&&i[a+1]===t.id&&i[a-r.width]===t.id&&i[a+r.width]===t.id||e++)}return e+t.box}(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let t=new mf(this.width,this.height,{kind:ci,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)for(let r=0;r<this.height;r++)this.map.data[e+this.minX+(r+this.minY)*this.map.width]===this.id&&(e>0&&e<this.width-1&&r>0&&r<this.height-1&&this.map.data[e-1+this.minX+(r+this.minY)*this.map.width]===this.id&&this.map.data[e+1+this.minX+(r+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(r-1+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(r+1+this.minY)*this.map.width]===this.id||t.setBitXY(e,r));this.computed.contourMask=t}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let t=new mf(this.width,this.height,{kind:ci,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)t.setBitXY(e,0),t.setBitXY(e,this.height-1);for(let e=0;e<this.height;e++)t.setBitXY(0,e),t.setBitXY(this.width-1,e);this.computed.boxMask=t}return this.computed.boxMask}get mask(){if(!this.computed.mask){let t=new mf(this.width,this.height,{kind:ci,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)for(let r=0;r<this.height;r++)this.map.data[e+this.minX+(r+this.minY)*this.map.width]===this.id&&t.setBitXY(e,r);this.computed.mask=t}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let t=new mf(this.width,this.height,{kind:ci,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)for(let r=0;r<this.height;r++){let i=e+this.minX+(r+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[i])&&t.setBitXY(e,r)}this.computed.filledMask=t}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let t=new iu({kind:"smallCross"}).getMask();t.parent=this.map.parent,t.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=t}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const t=[];for(let e=0;e<this.width;e++)for(let r=0;r<this.height;r++)this.map.data[e+this.minX+(r+this.minY)*this.map.width]===this.id&&(e>0&&e<this.width-1&&r>0&&r<this.height-1&&this.map.data[e-1+this.minX+(r+this.minY)*this.map.width]===this.id&&this.map.data[e+1+this.minX+(r+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(r-1+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(r+1+this.minY)*this.map.width]===this.id||(t.push([e,r]),t.push([e+1,r]),t.push([e,r+1]),t.push([e+1,r+1])));const e=Eu(t);this.computed.convexHull={polyline:e,surface:zu(e),perimeter:Pu(e)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const t=this.convexHull,e=new mf(this.width+1,this.height+1,{kind:ci,position:[this.minX,this.minY],parent:this.map.parent});e.paintPolyline(t.polyline,{closed:!0}),this.computed.convexHullMask=e}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const t=this.convexHull,e=new mf(this.width,this.height,{kind:ci,position:[this.minX,this.minY],parent:this.map.parent});for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++)1!==Zu()(t.polyline,[r,i])&&e.setBitXY(r,i);this.computed.convexHullFilledMask=e}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let t=Uu({originalPoints:this.convexHull.polyline});if(0===t.length)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:t};else{let e=t[0],r=t[1],i=t[2],n=Math.sqrt((e[0]-r[0])**2+(e[1]-r[1])**2),s=Math.sqrt((i[0]-r[0])**2+(i[1]-r[1])**2);this.computed.mbr={width:n,height:s,elongation:1-n/s,aspectRatio:n/s,surface:n*s,perimeter:2*(n+s),rectangle:t}}}return this.computed.mbr}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=function(t={}){const{originalPoints:e=Iu.call(this)}=t;if(0===e.length)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(1===e.length)return{min:1,max:1,minLine:[e[0],e[0]],maxLine:[e[0],e[0]],aspectRatio:1};const r=new Array(e.length);let i=1/0,n=0,s=[];for(let t=0;t<e.length;t++){let a=Yu(e[t],e[(t+1)%e.length]);Bu(-a,e,r);let o=0,h=[];for(let i=0;i<e.length;i++){let e=Math.abs(r[t][1]-r[i][1]);e>o&&(o=e,h=[],h.push([r[i][0],r[t][1]],[r[i][0],r[i][1]]))}o<i&&(i=o,n=a,s=h)}Bu(n,s,s);let a=0,o=[],h=0;for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){let i=(e[t][0]-e[r][0])**2+(e[t][1]-e[r][1])**2;i>h&&(h=i,a=Math.sqrt(i),o=[e[t],e[r]])}return{min:i,minLine:s,max:a,maxLine:o,aspectRatio:i/a}}({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=function(t){let e=t.map,r=e.data,i=0,n=0,s=0,a=0;for(let o=0;o<t.width;o++)for(let h=0;h<t.height;h++){let l=(h+t.minY)*e.width+o+t.minX;if(r[l]===t.id){let u=0;switch((0===o||t.externalIDs.includes(r[l-1]))&&u++,(o===t.width-1||t.externalIDs.includes(r[l+1]))&&u++,(0===h||t.externalIDs.includes(r[l-e.width]))&&u++,(h===t.height-1||t.externalIDs.includes(r[l+e.width]))&&u++,u){case 1:i++;break;case 2:n++;break;case 3:s++;break;case 4:a++}}}return{one:i,two:n,three:s,four:a}}(this)),this.computed.perimeterInfo}get perimeter(){let t=this.perimeterInfo,e=2-Math.sqrt(2);return t.one+2*t.two+3*t.three+4*t.four-e*(t.two+2*t.three+t.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const t=new mf(this.width+1,this.height+1,{kind:ci,position:[this.minX,this.minY],parent:this.map.parent});t.paintPolyline(this.feretDiameters.minLine),t.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=t}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let t=function(t){for(let e=0;e<t.length;e++)t[e][0]=Math.round(t[e][0]),t[e][1]=Math.round(t[e][1]);return t}(this.mbr.rectangle);if(t.length>0){const e=Tu(t),r=new mf(e[1][0]-e[0][0]+1,e[1][1]-e[0][1]+1,{kind:ci,position:[this.minX+e[0][0],this.minY+e[0][1]],parent:this.map.parent});t=function(t,e){void 0===e&&(e=new Array(t.length).fill(0).map((()=>[])));let r=Tu(t),i=r[0][0],n=r[0][1];for(let r=0;r<t.length;r++)e[r][0]=t[r][0]-i,e[r][1]=t[r][1]-n;return e}(t),r.paintPolyline(t,{closed:!0}),this.computed.mbrMask=r}else this.computed.mbrMask=new mf(1,1,{kind:ci,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const t=new mf(this.width,this.height,{kind:ci,position:[this.minX,this.minY],parent:this.map.parent}),e=this.mask.minimalBoundingRectangle();for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++)1!==Zu()(e,[r,i])&&t.setBitXY(r,i);this.computed.mbrFilledMask=t}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let t=[];for(let e=0;e<this.height;e++)for(let r=0;r<this.width;r++){let i=(e+this.minY)*this.map.width+r+this.minX;this.map.data[i]===this.id&&t.push([r,e])}this.computed.points=t}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let t,e=0;const r=this.points;for(let i=0;i<r.length;i++)for(let n=i+1;n<r.length;n++){let s=Math.pow(r[i][0]-r[n][0],2)+Math.pow(r[i][1]-r[n][1],2);s>=e&&(e=s,t=[r[i],r[n]])}this.computed.maxLengthPoints=t}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let t=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=t}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let t=this.maxLengthPoints,e=180*-Math.atan2(t[0][1]-t[1][1],t[0][0]-t[1][0])/Math.PI;this.computed.angle=e}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}class ju{constructor(t,e){this.roiMap=t,this.options=e,this.roi=this.createRoi()}createRoi(){let t=this.roiMap.data,e={};this.roiMap.positive=0,this.roiMap.negative=0;for(let r=0;r<t.length;r++)t[r]&&!e[t[r]]&&(e[t[r]]=!0,t[r]>0?this.roiMap.positive++:this.roiMap.negative++);let r={};for(let t in e)r[t]=new Vu(this.roiMap,1*t);let i=this.roiMap.width,n=this.roiMap.height;for(let e=0;e<n;e++)for(let n=0;n<i;n++){let s=e*i+n;if(0!==t[s]){const i=r[t[s]];n<i.minX&&(i.minX=n),n>i.maxX&&(i.maxX=n),e<i.minY&&(i.minY=e),e>i.maxY&&(i.maxY=e),i.meanX+=n,i.meanY+=e,i.surface++}}let s=[];for(let t in e)r[t].meanX/=r[t].surface,r[t].meanY/=r[t].surface,s.push(r[t]);return s}}function Xu(t={}){const{algorithm:e="commonBorderLength",minCommonBorderLength:r=5,maxCommonBorderLength:i=100,minCommonBorderRatio:n=.3,maxCommonBorderRatio:s=1}=t;let a=function(t,e,n){return t[n]>=r&&t[n]<=i};"function"==typeof e&&(a=e),"commonborderratio"===e.toLowerCase()&&(a=function(t,e,r){let i=Math.min(t[r]/t[e],1);return i>=n&&i<=s});const o=this,h=o.commonBorderLength;let l={},u={};for(let t of Object.keys(h)){let e=h[t],r=Object.keys(e);for(let i of r)if(i!==t&&a(e,t,i)){let e=i;u[i]&&(e=u[i]);let r=t;if(u[t]&&(r=u[t]),Number(e)!==r){let t=Math.min(e,r),i=Math.max(e,r);if(l[t]||(l[t]={}),l[t][i]=!0,u[i]=t,l[i]){for(let e of Object.keys(l[i]))l[t][e]=!0,u[e]=t;delete l[i]}}}}let f=o.minMax,c=-f.min,d=f.max+c,m=new Array(d+1).fill(0);for(let t of Object.keys(u))m[Number(t)+c]=u[t];let p=o.data;for(let t=0;t<p.length;t++){let e=p[t];if(0!==e){let r=m[e+c];0!==r&&(p[t]=r)}}return o.computed={},o}class Gu{constructor(t,e){this.parent=t,this.width=t.width,this.height=t.height,this.data=e,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;for(let r=0;r<this.data.length;r++)this.data[r]<t&&(t=this.data[r]),this.data[r]>e&&(e=this.data[r]);return{min:t,max:e}}get commonBorderLength(){return function(t){let e=t.data,r=[1,0,-1,0],i=[0,1,0,-1],n=t.minMax,s=-n.min,a=n.max+s,o=[];for(let t=0;t<=a;t++)o.push(Object.create(null));for(let n=0;n<t.width;n++)for(let a=0;a<t.height;a++){let h=e[n+a*t.width];if(0!==h){let l=Object.create(null),u=!1;for(let f=0;f<4;f++){let c=n+r[f],d=a+i[f];if(c>=0&&d>=0&&c<t.width&&d<t.height){let r=e[c+d*t.width];h!==r&&(u=!0,0!==r&&void 0===l[r]&&(l[r]=!0,o[r+s][h]?o[r+s][h]++:o[r+s][h]=1))}else u=!0}u&&(o[h+s][h]?o[h+s][h]++:o[h+s][h]=1)}}let h={};for(let t=0;t<o.length;t++)Object.keys(o[t]).length>0&&(h[t-s]=o[t]);return h}(this)}mergeRoi(t={}){return Xu.call(this,t)}mergeRois(t){const e=t[0],r=t.slice(1);for(let t=0;t<this.data.length;t++)r.includes(this.data[t])&&(this.data[t]=e)}rowsInfo(){let t=new Array(this.height),e=0;for(let r=0;r<this.data.length;r+=this.width){let i={row:e,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[e++]=i;let n={},s={},a=[],o=this.data[r],h=0;for(let t=r;t<r+this.width;t++){let e=this.data[t];o!==e&&(o=e,a.push(h),h=0),h++,e>0?(i.positivePixel++,n[e]||(n[e]=!0)):e<0?(i.negativePixel++,s[e]||(s[e]=!0)):i.zeroPixel++}a.push(h),i.medianChange=a.sort(((t,e)=>t-e))[Math.floor(a.length/2)],i.positiveRoiIDs=Object.keys(n),i.negativeRoiIDs=Object.keys(s),i.positiveRoi=i.positiveRoiIDs.length,i.negativeRoi=i.negativeRoiIDs.length}return t}colsInfo(){let t=new Array(this.width),e=0;for(let r=0;r<this.width;r++){let i={col:e,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[e++]=i;let n={},s={},a=[],o=this.data[r],h=0;for(let t=r;t<r+this.data.length;t+=this.width){let e=this.data[t];o!==e&&(o=e,a.push(h),h=0),h++,e>0?(i.positivePixel++,n[e]||(n[e]=!0)):e<0?(i.negativePixel++,s[e]||(s[e]=!0)):i.zeroPixel++}a.push(h),i.medianChange=a.sort(((t,e)=>t-e))[Math.floor(a.length/2)],i.positiveRoiIDs=Object.keys(n),i.negativeRoiIDs=Object.keys(s),i.positiveRoi=i.positiveRoiIDs.length,i.negativeRoi=i.negativeRoiIDs.length}return t}}function qu(t,e={}){const{allowCorners:r=!1}=e,i=65535;let n=new Int16Array(t.size),s=0,a=0,o=new Uint16Array(65536),h=new Uint16Array(65536);for(let e=0;e<t.width;e++)for(let r=0;r<t.height;r++)0===n[r*t.width+e]&&l(e,r);function l(e,l){let u=0,f=0,c=t.getBitXY(e,l),d=c?++s:--a;if(s>32767||a<-32768)throw new Error("Too many regions of interest");for(o[0]=e,h[0]=l;u<=f;){let e=o[u&i],s=h[u&i];if(n[s*t.width+e]=d,e>0&&0===n[s*t.width+e-1]&&t.getBitXY(e-1,s)===c&&(f++,o[f&i]=e-1,h[f&i]=s,n[s*t.width+e-1]=-32768),s>0&&0===n[(s-1)*t.width+e]&&t.getBitXY(e,s-1)===c&&(f++,o[f&i]=e,h[f&i]=s-1,n[(s-1)*t.width+e]=-32768),e<t.width-1&&0===n[s*t.width+e+1]&&t.getBitXY(e+1,s)===c&&(f++,o[f&i]=e+1,h[f&i]=s,n[s*t.width+e+1]=-32768),s<t.height-1&&0===n[(s+1)*t.width+e]&&t.getBitXY(e,s+1)===c&&(f++,o[f&i]=e,h[f&i]=s+1,n[(s+1)*t.width+e]=-32768),r&&(e>0&&s>0&&0===n[(s-1)*t.width+e-1]&&t.getBitXY(e-1,s-1)===c&&(f++,o[f&i]=e-1,h[f&i]=s-1,n[(s-1)*t.width+e-1]=-32768),e<t.width-1&&s>0&&0===n[(s-1)*t.width+e+1]&&t.getBitXY(e+1,s-1)===c&&(f++,o[f&i]=e+1,h[f&i]=s-1,n[(s-1)*t.width+e+1]=-32768),e>0&&s<t.height-1&&0===n[(s+1)*t.width+e-1]&&t.getBitXY(e-1,s+1)===c&&(f++,o[f&i]=e-1,h[f&i]=s+1,n[(s+1)*t.width+e-1]=-32768),e<t.width-1&&s<t.height-1&&0===n[(s+1)*t.width+e+1]&&t.getBitXY(e+1,s+1)===c&&(f++,o[f&i]=e+1,h[f&i]=s+1,n[(s+1)*t.width+e+1]=-32768)),u++,f-u>i)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new Gu(t,n)}var Hu=__webpack_require__(530),Wu=__webpack_require__.n(Hu);const $u=[-1,0],Ku=[0,-1],Ju=[null,null],Qu=[-1,-1,0,1],tf=[0,-1,-1,-1],ef=[null,null,null,null];function rf(t,e={}){const{allowCorners:r=!1}=e;let i,n,s,a=4;if(r&&(a=8),8===a)i=Qu,n=tf,s=ef;else{if(4!==a)throw new RangeError(`unsupported neighbours count: ${a}`);i=$u,n=Ku,s=Ju}const o=t.size,h=t.width,l=t.height,u=new Array(o),f=new Uint32Array(o),c=new(Wu());let d=1;for(let e=0;e<l;e++)for(let r=0;r<h;r++){const a=r+e*h;if(t.getBit(a)){let t=null;for(let a=0;a<s.length;a++){const o=r+i[a],f=e+n[a];if(o>=0&&f>=0&&o<h&&f<l){let e=u[o+f*h];e?(s[a]=e,(!t||s[a].value<t.value)&&(t=s[a])):s[a]=null}}if(t){u[a]=t;for(let e=0;e<s.length;e++)s[e]&&s[e]!==t&&c.union(t,s[e])}else u[a]=c.add(d++)}}for(let e=0;e<l;e++)for(let r=0;r<h;r++){const i=r+e*h;t.getBit(i)&&(f[i]=c.find(u[i]).value)}return new Gu(t,f)}function nf(t={}){let{allowCorner:e=!0,onlyTop:r=!1,invert:i=!1}=t,n=this;n.checkProcessable("fromMaxima",{components:[1]});let s=0,a=0,o=new Int16Array(n.size),h=new Int8Array(n.size),l=new Float32Array(n.size),u=1048575,f=new Uint16Array(1048576),c=new Uint16Array(1048576),d=0,m=0,p=new Uint16Array(1048576),g=new Uint16Array(1048576),w=0,b=0;for(function({maxima:t=!0}){for(let r=1;r<n.height-1;r++)for(let i=1;i<n.width-1;i++){let l=i+r*n.width;if(0===h[l]){let h=t?n.data[l]:-n.data[i+r*n.width];if(n.data[r*n.width+i-1]>h)continue;if(n.data[r*n.width+i+1]>h)continue;if(n.data[(r-1)*n.width+i]>h)continue;if(n.data[(r+1)*n.width+i]>h)continue;if(e){if(n.data[(r-1)*n.width+i-1]>h)continue;if(n.data[(r-1)*n.width+i+1]>h)continue;if(n.data[(r+1)*n.width+i-1]>h)continue;if(n.data[(r+1)*n.width+i+1]>h)continue}o[l]=t?++s:--a,_(i,r)||(t?--s:++a)}}}(n);d<m;)y(f[d&u],c[d&u],2),d++;return new Gu(n,o);function _(t,e){let r=m;w=0,b=1,p[0]=t,g[0]=e;let i=!0;for(;w<b;)i&=y(p[w&u],g[w&u],1),w++;if(!i){for(let t=0;t<b;t++){let e=p[t&u],r=g[t&u]*n.width+e;o[r]=0}m=r}return i}function y(t,e,i){let s=o[e*n.width+t],a=n.data[e*n.width+t];for(let d=e-1;d<=e+1;d++)for(let e=t-1;e<=t+1;e++){let t=d*n.width+e;if(0===h[t])switch(h[t]=1,l[t]=n.data[t]-a,i){case 1:if(0===l[t]){if(0===e||0===d||e===n.width-1||d===n.height-1)return!1;o[t]=s,p[b&u]=e,g[b&u]=d,b++}else{if(l[t]>0)return!1;r||(o[t]=s,f[m&u]=e,c[m&u]=d,m++)}break;case 2:l[t]<=0&&(o[t]=s,f[m&u]=e,c[m&u]=d,m++);break;default:throw new Error("unreachable")}}return!0}}function sf(t,e={}){let r=new iu(e),i=new Int16Array(this.size),n=0,s=r.getPoints();for(let e=0;e<t.length;e++){n++;let r=t[e][0],a=t[e][1];for(let t=0;t<s.length;t++){let e=s[t][0],o=s[t][1];r+e>=0&&a+o>=0&&r+e<this.width&&a+o<this.height&&(i[r+e+(a+o)*this.width]=n)}}return new Gu(this,i)}var af=__webpack_require__(5307),of=__webpack_require__.n(af);const hf=[1,0,-1,0,1,1,-1,-1],lf=[0,1,0,-1,1,-1,1,-1];function uf(t={}){let{points:e,mask:r,image:i,fillMaxValue:n=this.maxValue,invert:s=!1}=t,a=i||this;a.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),s=!s,e||(e=a.getLocalMaxima({invert:s,mask:r}));let o=s?0:1,h=new Int16Array(a.size),l=a.width,u=a.height,f=new(of())({comparator:(t,e)=>t[2]-e[2],strategy:of().BinaryHeapStrategy});for(let t=0;t<e.length;t++){let r=e[t][0]+e[t][1]*l;h[r]=t+1;let i=a.data[r];(s&&i<=n||!s&&i>=n)&&f.queue([e[t][0],e[t][1],i])}for(;f.length>0;){let t=f.dequeue(),e=t[0]+t[1]*l;for(let i=0;i<4;i++){let c=t[0]+hf[i],d=t[1]+lf[i];if(c>=0&&d>=0&&c<l&&d<u){let u=c+d*l;if(!r||r.getBit(u)===o){let r=a.data[u];(s&&r<=n||!s&&r>=n)&&0===h[u]&&(h[u]=h[e],f.queue([t[0]+hf[i],t[1]+lf[i],r]))}}}}return new Gu(a,h)}class ff{constructor(t,e={}){this._image=t,this._options=e,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(t={}){let e=Object.assign({},this._options,t),r=nf.call(this._image,t);this._layers[e.label]=new ju(r,e)}fromPoints(t,e={}){let r=Object.assign({},this._options,e),i=sf.call(this._image,t,e);return this._layers[r.label]=new ju(i,r),this}putMap(t,e={}){let r=new Gu(this._image,t),i=Object.assign({},this._options,e);return this._layers[i.label]=new ju(r,i),this}fromWaterShed(t={}){let e=Object.assign({},this._options,t),r=uf.call(this._image,t);this._layers[e.label]=new ju(r,e)}fromMask(t,e={}){let r=Object.assign({},this._options,e),i=qu.call(this._image,t,e);return this._layers[r.label]=new ju(i,r),this}fromMaskConnectedComponentLabelingAlgorithm(t,e={}){let r=Object.assign({},this._options,e),i=rf.call(this._image,t,e);return this._layers[r.label]=new ju(i,r),this}getMap(t={}){let e=Object.assign({},this._options,t);return this._assertLayerWithLabel(e.label),this._layers[e.label].roiMap}rowsInfo(t={}){return this.getMap(t).rowsInfo()}colsInfo(t={}){return this.getMap(t).rowsInfo()}getRoiIds(t={}){let e=this.getRois(t);if(e){let t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r].id;return t}throw new Error("ROIs not found")}getRois(t={}){let{label:e=this._options.label,positive:r=!0,negative:i=!0,minSurface:n=0,maxSurface:s=Number.POSITIVE_INFINITY,minWidth:a=0,maxWidth:o=Number.POSITIVE_INFINITY,minHeight:h=0,maxHeight:l=Number.POSITIVE_INFINITY,minRatio:u=0,maxRatio:f=Number.POSITIVE_INFINITY}=t;if(!this._layers[e])throw new Error(`this Roi layer (${e}) does not exist`);const c=this._layers[e].roi,d=[];for(const t of c)(t.id<0&&i||t.id>0&&r)&&t.surface>=n&&t.surface<=s&&t.width>=a&&t.width<=o&&t.height>=h&&t.height<=l&&t.ratio>=u&&t.ratio<=f&&d.push(t);return d}getRoi(t,e={}){const{label:r=this._options.label}=e;if(!this._layers[r])throw new Error(`this Roi layer (${r}) does not exist`);const i=this._layers[r].roi.find((e=>e.id===t));if(!i)throw new Error(`found no Roi with id ${t}`);return i}getMasks(t={}){let e=this.getRois(t),r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=e[i].getMask(t);return r}getAnalysisMasks(t={}){const{analysisProperty:e}=t;let r=`${e}Mask`,i=this.getRois(t);return 0!==i.length&&i[0][r]?i.map((t=>t[r])):[]}getData(t={}){let e=Object.assign({},this._options,t);return this._assertLayerWithLabel(e.label),this._layers[e.label].roiMap.data}paint(t={}){let{labelProperty:e,analysisProperty:r}=t;this._painted||(this._painted=this._image.rgba8());let i=this.getMasks(t);if(e){const r=this.getRois(t);t.labels=r.map((t=>function(t,e=""){let r=e.split(".");for(let e of r){if(void 0===t[e])return;t=t[e]}return t}(t,e)));const i=Math.max(...t.labels);let n=!1,s=!1;if(e.includes("surface")?n=!0:/(?:perimeter|min|max|external|width|height|length)/.test(e)&&(s=!0),isFinite(i)){let e="";if("pixel"!==t.unit&&t.pixelSize&&(s||n)){e=n?`${t.unit}^2`:t.unit;let r=n?"m^2":"m",i=n?t.pixelSize**2:t.pixelSize;const s=Lu().swiftConverter(r,e);t.labels=t.labels.map((t=>s(i*t)))}t.labels=i>50?t.labels.map((t=>Math.round(t)+e)):i>10?t.labels.map((t=>t.toFixed(1)+e)):t.labels.map((t=>t.toFixed(2)+e))}t.labelsPosition=r.map((t=>[t.meanX,t.meanY]))}if(this._painted.paintMasks(i,t),r){let e=this.getAnalysisMasks(t);this._painted.paintMasks(e,{color:t.analysisColor,alpha:t.analysisAlpha})}return this._painted}getMask(t={}){let e=new mf(this._image.width,this._image.height,{kind:"BINARY"}),r=this.getMasks(t);for(let t=0;t<r.length;t++){let i=r[t];for(let t=0;t<i.width;t++)for(let r=0;r<i.height;r++)i.getBitXY(t,r)&&e.setBitXY(t+i.position[0],r+i.position[1])}return e}resetPainted(t={}){const{image:e}=t;this._painted=e?this.image.rgba8():this._image.rgba8()}mergeRoi(t={}){const e=this.getMap(t);return e.mergeRoi(t),this.putMap(e.data,t),this}mergeRois(t,e={}){if(!Array.isArray(t)||t.some((t=>!Number.isInteger(t))))throw new Error("Roi ids must be an array of integers");if(t.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(t).size!==t.length)throw new Error("Roi ids must be all different");t.forEach((t=>this.getRoi(t)));const r=this.getMap(e);return r.mergeRois(t),this.putMap(r.data,e),this}findCorrespondingRoi(t,e={}){let r=this.getRois(e),i=[];for(let e=0;e<r.length;e++){let n=r[e],s=cf(n.minX,n.minY,n.points,t,Math.sign(n.id));i.push(s)}return i}_assertLayerWithLabel(t){if(!this._layers[t])throw new Error(`no layer with label ${t}`)}}function cf(t,e,r,i,n){let s={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let n=0;n<r.length;n++){let a=r[n],o=a[0]+t+(a[1]+e)*i.width,h=i.data[o];(h>0||h<0)&&(s.id.includes(h)?s.surface[s.id.indexOf(h)]+=1:(s.id.push(h),s.surface.push(1)))}for(let t=0;t<s.id.length;t++)Math.sign(s.id[t])===n?s.same+=s.surface[t]:s.opposite+=s.surface[t],s.roiSurfaceCovered[t]=s.surface[t]/r.length;return s.total=s.opposite+s.same,s}const df=Object.prototype.toString;class mf{constructor(e,r,i,n){if(1===arguments.length?(n=e,({width:e,height:r,data:i}=n)):i&&!i.length&&(n=i,({data:i}=n)),void 0===e&&(e=1),void 0===r&&(r=1),void 0===n&&(n={}),"object"!=typeof n||null===n)throw new TypeError("options must be an object");if(!Number.isInteger(e)||e<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new RangeError("height must be a positive integer");const{kind:s=di}=n;if("string"!=typeof s)throw new TypeError("kind must be a string");const a=function(t){const e=mi[t];if(!e)throw new RangeError(`invalid image kind: ${t}`);return e}(s),o=Object.assign({},n);for(const t in a)void 0===o[t]&&(o[t]=a[t]);!function(e){const{components:r,alpha:i,bitDepth:n,colorModel:s}=e;if(!Number.isInteger(r)||r<=0)throw new RangeError(`invalid components: ${r}. Must be a positive integer`);if(0!==i&&1!==i&&"boolean"!=typeof i)throw new TypeError(`invalid alpha: ${i}: must be a boolean, 0 or 1`);if(!pi.includes(n))throw new RangeError(`invalid bitDepth: ${n}. Must be one of ${pi.join(", ")}`);if(!t[s])throw new RangeError(`invalid colorModel: ${s}. Must be one of ${Object.keys(t).join(", ")}`)}(o);const{components:h,bitDepth:l,colorModel:u}=o,f=o.alpha+0,c=e*r,d=h+f,m=32===l?Number.MAX_VALUE:2**l-1;if(void 0===i)i=function(t,e,r,i,n,s){const a=i*t;let o;switch(n){case 1:o=new Uint8Array(Math.ceil(a/8));break;case 8:o=new Uint8Array(a);break;case 16:o=new Uint16Array(a);break;case 32:o=new Float32Array(a);break;default:throw new Error(`Cannot create pixel array for bit depth ${n}`)}if(r)for(let t=e;t<o.length;t+=i)o[t]=s;return o}(c,h,f,d,l,m);else{const t=function(t,e,r){let i=e*t;return 1===r&&(i=Math.ceil(i/8)),i}(c,d,l);if(i.length!==t)throw new RangeError(`incorrect data size: ${i.length}. Should be ${t}`)}this.width=e,this.height=r,this.data=i,this.size=c,this.components=h,this.alpha=f,this.bitDepth=l,this.maxValue=m,this.colorModel=u,this.channels=d,this.meta=n.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:n.parent||null}),this.position=n.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(t){return"[object IJSImage]"===df.call(t)}static fromCanvas(t){const e=t.getContext("2d").getImageData(0,0,t.width,t.height);return new mf(e.width,e.height,e.data)}static createFrom(t,e){const r=bo(t);return Object.assign(r,{parent:t,position:[0,0]},e),new mf(r)}getRoiManager(t){return new ff(this,t)}clone(){const t=this.data.slice();return new mf(this.width,this.height,t,this)}apply(t){for(let e=0;e<this.height;e++)for(let r=0;r<this.width;r++){let i=(e*this.width+r)*this.channels;t.call(this,i)}}}!function(t){for(const e in wo)t.prototype[e]=wo[e]}(mf),function(t){for(const e in a)t.prototype[e]=a[e]}(mf),function(t){for(const e in ii)t.prototype[e]=ii[e]}(mf),mf.prototype.checkProcessable=function(t,e={}){let{bitDepth:r,alpha:i,colorModel:n,components:s,channels:a}=e;if("string"!=typeof t||0===t.length)throw new TypeError("processName must be a string");if(r&&(Array.isArray(r)||(r=[r]),!r.includes(this.bitDepth)))throw new TypeError(`The process: ${t} can only be applied if bit depth is in: ${r}`);if(i&&(Array.isArray(i)||(i=[i]),!i.includes(this.alpha)))throw new TypeError(`The process: ${t} can only be applied if alpha is in: ${i}`);if(n&&(Array.isArray(n)||(n=[n]),!n.includes(this.colorModel)))throw new TypeError(`The process: ${t} can only be applied if color model is in: ${n}`);if(s&&(Array.isArray(s)||(s=[s]),!s.includes(this.components))){let e=`The process: ${t} can only be applied if the number of components is in: ${s}`;throw 1===s.length&&1===s[0]?new TypeError(`${e}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(e)}if(a&&(Array.isArray(a)||(a=[a]),!a.includes(this.channels)))throw new TypeError(`The process: ${t} can only be applied if the number of channels is in: ${a}`)},mf.prototype.getRGBAData=function(t={}){const{clamped:e}=t;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const r=this.width*this.height*4;let i=e?new Uint8ClampedArray(r):new Uint8Array(r);return 1===this.bitDepth?function(t,e){for(let r=0;r<t.size;r++){const i=t.getBit(r);e[4*r]=255*i,e[4*r+1]=255*i,e[4*r+2]=255*i}}(this,i):32===this.bitDepth?(this.checkProcessable("getRGBAData",{alpha:0}),1===this.components?function(t,e){const r=t.min[0],i=t.max[0]-r;for(let n=0;n<t.size;n++){const s=Math.floor(255*(t.data[n]-r)/i);e[4*n]=s,e[4*n+1]=s,e[4*n+2]=s}}(this,i):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[hi]}),function(t,e){const r=Math.min(...t.min),i=Math.max(...t.max)-r;for(let n=0;n<t.size;n++){const s=Math.floor(255*(t.data[3*n]-r)/i),a=Math.floor(255*(t.data[3*n+1]-r)/i),o=Math.floor(255*(t.data[3*n+2]-r)/i);e[4*n]=s,e[4*n+1]=a,e[4*n+2]=o}}(this,i))):1===this.components?function(t,e){for(let r=0;r<t.size;r++)e[4*r]=t.data[r*t.channels]>>>t.bitDepth-8,e[4*r+1]=t.data[r*t.channels]>>>t.bitDepth-8,e[4*r+2]=t.data[r*t.channels]>>>t.bitDepth-8}(this,i):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[hi]}),function(t,e){for(let r=0;r<t.size;r++)e[4*r]=t.data[r*t.channels]>>>t.bitDepth-8,e[4*r+1]=t.data[r*t.channels+1]>>>t.bitDepth-8,e[4*r+2]=t.data[r*t.channels+2]>>>t.bitDepth-8}(this,i)),1===this.alpha?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),function(t,e){for(let r=0;r<t.size;r++)e[4*r+3]=t.data[r*t.channels+t.components]>>t.bitDepth-8}(this,i)):function(t,e){for(let r=0;r<t.size;r++)e[4*r+3]=255}(this,i),i},mf.load=function(t,e){if("string"==typeof t)return function(t,e){const r=t.slice(0,64).match(fo);let i;return i=null!==r?Promise.resolve(function(t){let e,r,i,n,s=.75*t.length,a=t.length,o=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);const h=new Uint8Array(s);for(let s=0;s<a;s+=4)e=$r[t.charCodeAt(s)],r=$r[t.charCodeAt(s+1)],i=$r[t.charCodeAt(s+2)],n=$r[t.charCodeAt(s+3)],h[o++]=e<<2|r>>4,h[o++]=(15&r)<<4|i>>2,h[o++]=(3&i)<<6|63&n;return h}(t.slice(r[0].length))):function(t,{withCredentials:e=!1}={}){return new Promise((function(r,i){let n=new self.XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.withCredentials=e,n.onload=function(t){200!==this.status?i(t):r(this.response)},n.onerror=i,n.send()}))}(t,e),i.then((e=>co(new Uint8Array(e),r?t:void 0)))}(t,e);if(t instanceof ArrayBuffer)return Promise.resolve(co(new Uint8Array(t)));if(t.buffer)return Promise.resolve(co(t));throw new Error('argument to "load" must be a string or buffer.')},mf.extendMethod=function(t,e,r={}){let{inPlace:i=!1,returnThis:n=!0,partialArgs:s=[]}=r;return mf.prototype[t]=i?function(...t){this.computed=null;let r=e.apply(this,[...s,...t]);return n?this:r}:function(...t){return e.apply(this,[...s,...t])},mf},mf.extendProperty=function(t,e,r={}){let{partialArgs:i=[]}=r;return ai.get=function(){if(null===this.computed)this.computed={};else if(si()(t,this.computed))return this.computed[t];let r=e.apply(this,i);return this.computed[t]=r,r},Object.defineProperty(mf.prototype,t,ai),mf},function(t){let e={inPlace:!0};t.extendMethod("invert",xo),t.extendMethod("abs",vo),t.extendMethod("level",Wo,e),t.extendMethod("add",Qo,e),t.extendMethod("subtract",th,e),t.extendMethod("subtractImage",eh),t.extendMethod("multiply",ih,e),t.extendMethod("divide",nh,e),t.extendMethod("hypotenuse",rh),t.extendMethod("background",dh),t.extendMethod("flipX",ko),t.extendMethod("flipY",Mo),t.extendMethod("blurFilter",Ao),t.extendMethod("medianFilter",Co),t.extendMethod("gaussianFilter",Ro),t.extendMethod("sobelFilter",Xo),t.extendMethod("gradientFilter",jo),t.extendMethod("scharrFilter",Go),t.extendMethod("dilate",mh),t.extendMethod("erode",_h),t.extendMethod("open",Mh),t.extendMethod("close",Ah),t.extendMethod("topHat",Eh),t.extendMethod("blackHat",Sh),t.extendMethod("morphologicalGradient",Dh),t.extendMethod("warpingFourPoints",Ph),t.extendMethod("crop",zh),t.extendMethod("cropAlpha",Th),t.extendMethod("resize",Nh).extendMethod("scale",Nh),t.extendMethod("hsv",Zh),t.extendMethod("hsl",Yh),t.extendMethod("cmyk",Vh),t.extendMethod("rgba8",jh),t.extendMethod("grey",qh).extendMethod("gray",qh),t.extendMethod("mask",al),t.extendMethod("pad",ol),t.extendMethod("colorDepth",hl),t.extendMethod("setBorder",pl,e),t.extendMethod("rotate",ul),t.extendMethod("rotateLeft",fl),t.extendMethod("rotateRight",cl),t.extendMethod("insert",ml),t.extendMethod("getRow",Al),t.extendMethod("getColumn",El),t.extendMethod("getMatrix",Sl),t.extendMethod("setMatrix",Dl),t.extendMethod("getPixelsArray",Il),t.extendMethod("getIntersection",Cl),t.extendMethod("getClosestCommonParent",Bl),t.extendMethod("getThreshold",nl),t.extendMethod("split",gl),t.extendMethod("getChannel",wl),t.extendMethod("combineChannels",bl),t.extendMethod("setChannel",yl),t.extendMethod("getSimilarity",vl),t.extendMethod("getPixelsGrid",xl),t.extendMethod("getBestMatch",Ml),t.extendMethod("cannyEdge",Ll),t.extendMethod("convolution",Vo),t.extendMethod("extract",Nl),t.extendMethod("floodFill",Vl),t.extendMethod("paintLabels",Jl,e),t.extendMethod("paintMasks",Ql,e),t.extendMethod("paintPoints",nu,e),t.extendMethod("paintPolyline",su,e),t.extendMethod("paintPolylines",au,e),t.extendMethod("paintPolygon",ou,e),t.extendMethod("paintPolygons",uu,e),t.extendMethod("countAlphaPixels",Au),t.extendMethod("monotoneChainConvexHull",Iu),t.extendMethod("minimalBoundingRectangle",Uu),t.extendMethod("getHistogram",fu).extendProperty("histogram",fu),t.extendMethod("getHistograms",cu).extendProperty("histograms",cu),t.extendMethod("getColorHistogram",mu).extendProperty("colorHistogram",mu),t.extendMethod("getMin",pu).extendProperty("min",pu),t.extendMethod("getMax",gu).extendProperty("max",gu),t.extendMethod("getSum",wu).extendProperty("sum",wu),t.extendMethod("getMoment",bu).extendProperty("moment",bu),t.extendMethod("getLocalMaxima",_u),t.extendMethod("getMedian",vu).extendProperty("median",vu),t.extendMethod("getMean",yu).extendProperty("mean",yu),t.extendMethod("getPoints",xu).extendProperty("points",xu),t.extendMethod("getExtendedPoints",ku).extendProperty("extendedPoints",ku),t.extendMethod("getRelativePosition",Mu)}(mf);var pf=__webpack_require__(6732),gf=__webpack_require__.n(pf);const wf={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function bf(t,e,r){return t.post("data",[e,r]).then((function(t){for(let e in t)t[e]=new mf(t[e]);return t}))}const _f={run:function(t,e,r){e=Object.assign({},wf,e);const i=this.manager;return Array.isArray(t)?Promise.all(t.map((function(t){const n=bf(i,t,e);return"function"==typeof r&&n.then(r),n}))):bf(i,t,e)},work:function(){worker.on("data",(function(t,e,r){e=new IJS(e);const i={},n=[],s=e.grey(),a=s.sobelFilter();d("sobel",a);const o=a.level().mask({threshold:r.threshold});d("mask",o);const h=a.getRoiManager();h.fromMask(o);const l=h.getMask(r.roi);d("realMask",l);const u=s.getPixelsGrid({sampling:r.sampling,mask:l}),f=e.getBackground(u.xyS,u.zS,r.regression);d("background",f);const c=e.subtract(f);function d(t,e){r.include.includes(t)&&(i[t]=e,n.push(e.data.buffer))}i.result=c,n.push(c.data.buffer),t(i,n)}))}};class yf{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(t){if("string"!=typeof t)throw new TypeError("worker URL must be a string");this._url=t,this._deps[0]=t}static extendMethod(t,e){let r,i,n={};function s(...t){return r||(this.checkUrl(),i=this.url,r=new(gf())(e.work,{deps:i}),n.manager=r),e.run.call(n,...t)}s.reset=function(){r&&(r.terminate(),r=new(gf())(e.work,{deps:i}),n.manager=r)},yf.prototype[t]=s}}!function(t){t.extendMethod("background",_f)}(yf),new yf;var vf=__webpack_require__(7708);const xf=document.getElementById.bind(document);xf("upload").onchange=async()=>{let t=await(0,vf.readAsDataURL)(xf("upload").files[0]);t=await mf.load(t);const e=new(s()),r=e.folder("photos"),i=t.height/3;for(let e=0;e<4;++e){let n=e*(t.width/4),s=t.crop({x:n,y:i,width:i,height:i});r.file(`middle-${e+1}.png`,await s.toBlob("image/png"))}r.file("top.png",await t.crop({x:t.width/4,y:0,width:i,height:i}).toBlob("image/png")),r.file("bottom.png",await t.crop({x:t.width/4,y:t.height/3*2,width:i,height:i}).toBlob("image/png"));let n=await e.generateAsync({type:"blob"}),a=document.createElement("a");a.download="cubemap.zip",a.href=URL.createObjectURL(n),a.click()}})()})();
//# sourceMappingURL=client.js.map